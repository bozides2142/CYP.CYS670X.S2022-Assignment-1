(window.data_bundle_jsonpfunction=window.data_bundle_jsonpfunction||[]).push([[1],{108:function(e,t,a){"use strict";a.r(t),a.d(t,"FILTER_EDITOR_WIDTH",(function(){return b})),a.d(t,"FilterItem",(function(){return O}));var r=a(14),s=a(5),i=a(106),n=a.n(i),l=a(4),o=a.n(l),d=a(124),u=a(50),c=a.n(u),p=a(0),h=a(68);const E=({filter:e,iconOnClick:t,onClick:a,valueLabel:i,errorMessage:n,filterLabelStatus:l,...d})=>{const[u,E]=Object(r.useInnerText)();let f=n||p.i18n.translate("data.filter.filterBar.moreFilterActionsMessage",{defaultMessage:"Filter: {innerText}. Select for more filter actions.",values:{innerText:E}});return Object(s.A)(e)&&(f=`${p.i18n.translate("data.filter.filterBar.pinnedFilterPrefix",{defaultMessage:"Pinned"})} ${f}`),e.meta.disabled&&(f=`${p.i18n.translate("data.filter.filterBar.disabledFilterPrefix",{defaultMessage:"Disabled"})} ${f}`),o.a.createElement(r.EuiBadge,c()({title:f,color:"hollow",iconType:"cross",iconSide:"right",closeButtonProps:{tabIndex:-1},iconOnClick:t,iconOnClickAriaLabel:p.i18n.translate("data.filter.filterBar.filterItemBadgeIconAriaLabel",{defaultMessage:"Delete {filter}",values:{filter:E}}),onClick:a,onClickAriaLabel:p.i18n.translate("data.filter.filterBar.filterItemBadgeAriaLabel",{defaultMessage:"Filter actions"})},d),o.a.createElement("span",{ref:u},o.a.createElement(h.b,{filter:e,valueLabel:i,filterLabelStatus:l})))};var f=a(20),m=a(21);const g="warn",I="error",b=800;function O(e){var t;const[a,i]=Object(l.useState)(!1),[u,c]=Object(l.useState)(void 0),{id:p,filter:h,indexPatterns:O,hiddenPanelOptions:S}=e;function L(t){i(!1),e.onUpdate(t)}function R(){const t=Object(s.Q)(h);e.onUpdate(t)}function N(e){const{disabled:t}=h.meta;return t||e.status===I}if(Object(l.useEffect)((()=>{const t=e.filter.meta.index;let a=!0;return t?Object(m.a)().get(t).then((e=>{a&&c(!!e)})).catch((()=>{a&&c(!1)})):a&&c(!0),()=>{a=!1}}),[e.filter.meta.index]),void 0===u)return null;const C=function(){var t;const a={title:"",message:"",status:""};if(null!==(t=h.meta)&&void 0!==t&&t.isMultiIndex)return a;if(!1===u)a.status=I,a.title=e.intl.formatMessage({id:"data.filter.filterBar.labelErrorText",defaultMessage:"Error"}),a.message=e.intl.formatMessage({id:"data.filter.filterBar.labelErrorInfo",defaultMessage:"Index pattern {indexPattern} not found"},{indexPattern:h.meta.index});else if(e.indexPatterns.length&&!Object(f.n)(h,O)&&!O.map((e=>e.fields.map((e=>e.name)))).reduce(((e,t)=>[...e,...t]),[]).includes((null===(r=h.meta)||void 0===r?void 0:r.key)||""))a.status=g,a.title=e.intl.formatMessage({id:"data.filter.filterBar.labelWarningText",defaultMessage:"Warning"}),a.message=e.intl.formatMessage({id:"data.filter.filterBar.labelWarningInfo",defaultMessage:"Field {fieldName} does not exist in current view"},{fieldName:h.meta.key});else try{a.title=Object(f.m)(h,O)}catch(t){a.status=I,a.title=e.intl.formatMessage({id:"data.filter.filterBar.labelErrorText",defaultMessage:"Error"}),a.message=t.message}var r;return a}();if(C.status===I&&!h.meta.disabled)return h.meta.disabled=!0,e.onUpdate(h),null;const v=o.a.createElement(E,{filter:h,valueLabel:C.title,filterLabelStatus:C.status,errorMessage:C.message,className:(F=null!==(t=h.meta.negate)&&void 0!==t&&t,T=C,n()("globalFilterItem",{"globalFilterItem-isDisabled":N(T),"globalFilterItem-isError":T.status===I,"globalFilterItem-isWarning":T.status===g,"globalFilterItem-isPinned":Object(s.A)(h),"globalFilterItem-isExcluded":F},e.className)),iconOnClick:()=>e.onRemove(),onClick:function(e){e.shiftKey?R():i(!a)},"data-test-subj":function(e){const t=h.meta.key?`filter-key-${h.meta.key}`:"",a=h.meta.value?`filter-value-${function(e){return""===e.status}(e)?e.title:e.status}`:"",r=h.meta.negate?"filter-negated":"",i="filter-"+(N(e)?"disabled":"enabled"),l="filter-"+(Object(s.A)(h)?"pinned":"unpinned");return n()("filter",i,t,a,l,r)}(C)});var F,T;return o.a.createElement(r.EuiPopover,{id:`popoverFor_filter${p}`,className:"globalFilterItem__popover",anchorClassName:"globalFilterItem__popoverAnchor",isOpen:a,closePopover:()=>{i(!1)},button:v,anchorPosition:"downLeft",panelPaddingSize:"none"},o.a.createElement(r.EuiContextMenu,{initialPanelId:0,panels:function(){const{negate:t,disabled:a}=h.meta;let r=[{name:Object(s.A)(h)?e.intl.formatMessage({id:"data.filter.filterBar.unpinFilterButtonLabel",defaultMessage:"Unpin"}):e.intl.formatMessage({id:"data.filter.filterBar.pinFilterButtonLabel",defaultMessage:"Pin across all apps"}),icon:"pin",onClick:()=>{i(!1),function(){const t=Object(s.S)(h);e.onUpdate(t)}()},"data-test-subj":"pinFilter"},{name:e.intl.formatMessage({id:"data.filter.filterBar.editFilterButtonLabel",defaultMessage:"Edit filter"}),icon:"pencil",panel:1,"data-test-subj":"editFilter"},{name:t?e.intl.formatMessage({id:"data.filter.filterBar.includeFilterButtonLabel",defaultMessage:"Include results"}):e.intl.formatMessage({id:"data.filter.filterBar.excludeFilterButtonLabel",defaultMessage:"Exclude results"}),icon:t?"plusInCircle":"minusInCircle",onClick:()=>{i(!1),function(){const t=Object(s.R)(h);e.onUpdate(t)}()},"data-test-subj":"negateFilter"},{name:a?e.intl.formatMessage({id:"data.filter.filterBar.enableFilterButtonLabel",defaultMessage:"Re-enable"}):e.intl.formatMessage({id:"data.filter.filterBar.disableFilterButtonLabel",defaultMessage:"Temporarily disable"}),icon:""+(a?"eye":"eyeClosed"),onClick:()=>{i(!1),R()},"data-test-subj":"disableFilter"},{name:e.intl.formatMessage({id:"data.filter.filterBar.deleteFilterButtonLabel",defaultMessage:"Delete"}),icon:"trash",onClick:()=>{i(!1),e.onRemove()},"data-test-subj":"deleteFilter"}];return S&&S.length>0&&(r=r.filter((e=>!S.includes(e["data-test-subj"])))),[{id:0,items:r},{id:1,width:b,content:o.a.createElement("div",null,o.a.createElement(d.a,{filter:h,indexPatterns:O,onSubmit:L,onCancel:()=>{i(!1)},timeRangeForSuggestionsOverride:e.timeRangeForSuggestionsOverride}))}]}()}))}t.default=O},117:function(e,t,a){"use strict";a.d(t,"c",(function(){return o})),a.d(t,"b",(function(){return p})),a.d(t,"a",(function(){return E}));var r=a(0),s=a(5),i=a(37);const n={message:r.i18n.translate("data.filter.filterEditor.isOperatorOptionLabel",{defaultMessage:"is"}),type:s.b.PHRASE,negate:!1},l={message:r.i18n.translate("data.filter.filterEditor.isNotOperatorOptionLabel",{defaultMessage:"is not"}),type:s.b.PHRASE,negate:!0},o={message:r.i18n.translate("data.filter.filterEditor.isOneOfOperatorOptionLabel",{defaultMessage:"is one of"}),type:s.b.PHRASES,negate:!1,fieldTypes:["string","number","date","ip","geo_point","geo_shape"]},d={message:r.i18n.translate("data.filter.filterEditor.isNotOneOfOperatorOptionLabel",{defaultMessage:"is not one of"}),type:s.b.PHRASES,negate:!0,fieldTypes:["string","number","date","ip","geo_point","geo_shape"]},u={message:r.i18n.translate("data.filter.filterEditor.isBetweenOperatorOptionLabel",{defaultMessage:"is between"}),type:s.b.RANGE,negate:!1,field:e=>{var t;return!!["number","number_range","date","date_range","ip","ip_range"].includes(e.type)||!("string"!==e.type||null===(t=e.esTypes)||void 0===t||!t.includes(i.ES_FIELD_TYPES.VERSION))}},c={message:r.i18n.translate("data.filter.filterEditor.isNotBetweenOperatorOptionLabel",{defaultMessage:"is not between"}),type:s.b.RANGE,negate:!0,field:e=>{var t;return!!["number","number_range","date","date_range","ip","ip_range"].includes(e.type)||!("string"!==e.type||null===(t=e.esTypes)||void 0===t||!t.includes(i.ES_FIELD_TYPES.VERSION))}},p={message:r.i18n.translate("data.filter.filterEditor.existsOperatorOptionLabel",{defaultMessage:"exists"}),type:s.b.EXISTS,negate:!1},h={message:r.i18n.translate("data.filter.filterEditor.doesNotExistOperatorOptionLabel",{defaultMessage:"does not exist"}),type:s.b.EXISTS,negate:!0},E=[n,l,o,d,u,c,p,h]},118:function(e,t){const a=Number.MAX_SAFE_INTEGER||9007199254740991;e.exports={SEMVER_SPEC_VERSION:"2.0.0",MAX_LENGTH:256,MAX_SAFE_INTEGER:a,MAX_SAFE_COMPONENT_LENGTH:16}},122:function(e,t,a){const{MAX_SAFE_COMPONENT_LENGTH:r}=a(118),s=a(123),i=(t=e.exports={}).re=[],n=t.src=[],l=t.t={};let o=0;const d=(e,t,a)=>{const r=o++;s(r,t),l[e]=r,n[r]=t,i[r]=new RegExp(t,a?"g":void 0)};d("NUMERICIDENTIFIER","0|[1-9]\\d*"),d("NUMERICIDENTIFIERLOOSE","[0-9]+"),d("NONNUMERICIDENTIFIER","\\d*[a-zA-Z-][a-zA-Z0-9-]*"),d("MAINVERSION",`(${n[l.NUMERICIDENTIFIER]})\\.(${n[l.NUMERICIDENTIFIER]})\\.(${n[l.NUMERICIDENTIFIER]})`),d("MAINVERSIONLOOSE",`(${n[l.NUMERICIDENTIFIERLOOSE]})\\.(${n[l.NUMERICIDENTIFIERLOOSE]})\\.(${n[l.NUMERICIDENTIFIERLOOSE]})`),d("PRERELEASEIDENTIFIER",`(?:${n[l.NUMERICIDENTIFIER]}|${n[l.NONNUMERICIDENTIFIER]})`),d("PRERELEASEIDENTIFIERLOOSE",`(?:${n[l.NUMERICIDENTIFIERLOOSE]}|${n[l.NONNUMERICIDENTIFIER]})`),d("PRERELEASE",`(?:-(${n[l.PRERELEASEIDENTIFIER]}(?:\\.${n[l.PRERELEASEIDENTIFIER]})*))`),d("PRERELEASELOOSE",`(?:-?(${n[l.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${n[l.PRERELEASEIDENTIFIERLOOSE]})*))`),d("BUILDIDENTIFIER","[0-9A-Za-z-]+"),d("BUILD",`(?:\\+(${n[l.BUILDIDENTIFIER]}(?:\\.${n[l.BUILDIDENTIFIER]})*))`),d("FULLPLAIN",`v?${n[l.MAINVERSION]}${n[l.PRERELEASE]}?${n[l.BUILD]}?`),d("FULL",`^${n[l.FULLPLAIN]}$`),d("LOOSEPLAIN",`[v=\\s]*${n[l.MAINVERSIONLOOSE]}${n[l.PRERELEASELOOSE]}?${n[l.BUILD]}?`),d("LOOSE",`^${n[l.LOOSEPLAIN]}$`),d("GTLT","((?:<|>)?=?)"),d("XRANGEIDENTIFIERLOOSE",`${n[l.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),d("XRANGEIDENTIFIER",`${n[l.NUMERICIDENTIFIER]}|x|X|\\*`),d("XRANGEPLAIN",`[v=\\s]*(${n[l.XRANGEIDENTIFIER]})(?:\\.(${n[l.XRANGEIDENTIFIER]})(?:\\.(${n[l.XRANGEIDENTIFIER]})(?:${n[l.PRERELEASE]})?${n[l.BUILD]}?)?)?`),d("XRANGEPLAINLOOSE",`[v=\\s]*(${n[l.XRANGEIDENTIFIERLOOSE]})(?:\\.(${n[l.XRANGEIDENTIFIERLOOSE]})(?:\\.(${n[l.XRANGEIDENTIFIERLOOSE]})(?:${n[l.PRERELEASELOOSE]})?${n[l.BUILD]}?)?)?`),d("XRANGE",`^${n[l.GTLT]}\\s*${n[l.XRANGEPLAIN]}$`),d("XRANGELOOSE",`^${n[l.GTLT]}\\s*${n[l.XRANGEPLAINLOOSE]}$`),d("COERCE",`(^|[^\\d])(\\d{1,${r}})(?:\\.(\\d{1,${r}}))?(?:\\.(\\d{1,${r}}))?(?:$|[^\\d])`),d("COERCERTL",n[l.COERCE],!0),d("LONETILDE","(?:~>?)"),d("TILDETRIM",`(\\s*)${n[l.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",d("TILDE",`^${n[l.LONETILDE]}${n[l.XRANGEPLAIN]}$`),d("TILDELOOSE",`^${n[l.LONETILDE]}${n[l.XRANGEPLAINLOOSE]}$`),d("LONECARET","(?:\\^)"),d("CARETTRIM",`(\\s*)${n[l.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",d("CARET",`^${n[l.LONECARET]}${n[l.XRANGEPLAIN]}$`),d("CARETLOOSE",`^${n[l.LONECARET]}${n[l.XRANGEPLAINLOOSE]}$`),d("COMPARATORLOOSE",`^${n[l.GTLT]}\\s*(${n[l.LOOSEPLAIN]})$|^$`),d("COMPARATOR",`^${n[l.GTLT]}\\s*(${n[l.FULLPLAIN]})$|^$`),d("COMPARATORTRIM",`(\\s*)${n[l.GTLT]}\\s*(${n[l.LOOSEPLAIN]}|${n[l.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",d("HYPHENRANGE",`^\\s*(${n[l.XRANGEPLAIN]})\\s+-\\s+(${n[l.XRANGEPLAIN]})\\s*$`),d("HYPHENRANGELOOSE",`^\\s*(${n[l.XRANGEPLAINLOOSE]})\\s+-\\s+(${n[l.XRANGEPLAINLOOSE]})\\s*$`),d("STAR","(<|>)?=?\\s*\\*"),d("GTE0","^\\s*>=\\s*0.0.0\\s*$"),d("GTE0PRE","^\\s*>=\\s*0.0.0-0\\s*$")},123:function(e,t,a){(function(t){const a="object"==typeof t&&Object({IS_KIBANA_DISTRIBUTABLE:"true"})&&Object({IS_KIBANA_DISTRIBUTABLE:"true"}).NODE_DEBUG&&/\bsemver\b/i.test(Object({IS_KIBANA_DISTRIBUTABLE:"true"}).NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};e.exports=a}).call(this,a(129))},124:function(e,t,a){"use strict";a.d(t,"a",(function(){return j}));var r=a(3),s=a.n(r),i=a(14),n=a(0),l=a(17),o=a(5),d=a(1),u=a(4),c=a.n(u),p=a(110),h=a(50),E=a.n(h);function f(e){const{options:t,selectedOptions:a,getLabel:r,onChange:s,...n}=e,l=t.map(r),o=l.map((e=>({label:e}))),d=a.filter((e=>-1!==t.indexOf(e))).map((e=>o[t.indexOf(e)]));return c.a.createElement(i.EuiComboBox,E()({options:o,selectedOptions:d,onChange:e=>{const a=e.map((({label:e})=>t[l.indexOf(e)]));s(a)},sortMatchesBy:"startsWith"},n))}var m=a(18),g=a.n(m),I=a(37),b=a(127),O=a.n(b),S=a(117),L=a(2);function R(e,t){var a;switch(t.type){case"date":const r="string"==typeof e?g.a.parse(e):null;return Boolean("string"==typeof e&&r&&r.isValid());case"ip":try{return Boolean(new L.IpAddress(e))}catch(e){return!1}case"string":return null===(a=t.esTypes)||void 0===a||!a.includes(I.ES_FIELD_TYPES.VERSION)||O()(e);default:return!0}}var N=a(28);class phrase_suggestor_PhraseSuggestorUI extends c.a.Component{constructor(...e){super(...e),s()(this,"services",this.props.kibana.services),s()(this,"abortController",void 0),s()(this,"state",{suggestions:[],isLoading:!1}),s()(this,"onSearchChange",(e=>{this.updateSuggestions(`${e}`)})),s()(this,"updateSuggestions",Object(d.debounce)((async(e="")=>{this.abortController&&this.abortController.abort(),this.abortController=new AbortController;const{indexPattern:t,field:a,timeRangeForSuggestionsOverride:r}=this.props;if(!a||!this.isSuggestingValues())return;this.setState({isLoading:!0});const s=await this.services.data.autocomplete.getValueSuggestions({indexPattern:t,field:a,query:e,signal:this.abortController.signal,useTimeRange:r});this.setState({suggestions:s,isLoading:!1})}),500))}componentDidMount(){this.updateSuggestions()}componentWillUnmount(){this.abortController&&this.abortController.abort()}isSuggestingValues(){var e;const t=this.services.uiSettings.get(L.UI_SETTINGS.FILTERS_EDITOR_SUGGEST_VALUES),{field:a}=this.props,r=null==a||null===(e=a.esTypes)||void 0===e?void 0:e.includes("version");return t&&a&&a.aggregatable&&"string"===a.type&&!r}}Object(N.withKibana)(phrase_suggestor_PhraseSuggestorUI);class value_input_type_ValueInputTypeUI extends u.Component{constructor(...e){super(...e),s()(this,"onBoolChange",(e=>{const t="true"===e.target.value;this.props.onChange(t)})),s()(this,"onChange",(e=>{const t=e.target.value;this.props.onChange(t)})),s()(this,"onBlur",(e=>{if(this.props.onBlur){const t=e.target.value;this.props.onBlur(t)}}))}render(){const e=this.props.value;let t;switch(this.props.field.type){case"string":t=c.a.createElement(i.EuiFieldText,{fullWidth:this.props.fullWidth,placeholder:this.props.placeholder,value:e,onChange:this.onChange,isInvalid:!R(e,this.props.field),controlOnly:this.props.controlOnly,className:this.props.className});break;case"number":case"number_range":t=c.a.createElement(i.EuiFieldNumber,{fullWidth:this.props.fullWidth,placeholder:this.props.placeholder,value:"string"==typeof e?parseFloat(e):e,onChange:this.onChange,controlOnly:this.props.controlOnly,className:this.props.className});break;case"date":case"date_range":t=c.a.createElement(i.EuiFieldText,{fullWidth:this.props.fullWidth,placeholder:this.props.placeholder,value:e,onChange:this.onChange,onBlur:this.onBlur,isInvalid:!Object(d.isEmpty)(e)&&!R(e,this.props.field),controlOnly:this.props.controlOnly,className:this.props.className});break;case"ip":case"ip_range":t=c.a.createElement(i.EuiFieldText,{fullWidth:this.props.fullWidth,placeholder:this.props.placeholder,value:e,onChange:this.onChange,isInvalid:!Object(d.isEmpty)(e)&&!R(e,this.props.field),controlOnly:this.props.controlOnly,className:this.props.className});break;case"boolean":t=c.a.createElement(i.EuiSelect,{options:[{value:void 0,text:this.props.placeholder},{value:"true",text:this.props.intl.formatMessage({id:"data.filter.filterEditor.trueOptionLabel",defaultMessage:"true"})},{value:"false",text:this.props.intl.formatMessage({id:"data.filter.filterEditor.falseOptionLabel",defaultMessage:"false"})}],value:e,onChange:this.onBoolChange,className:this.props.className,fullWidth:this.props.fullWidth})}return t}}const C=Object(l.injectI18n)(value_input_type_ValueInputTypeUI);function v(e){return f(e)}const F=Object(l.injectI18n)(Object(N.withKibana)(class phrase_value_input_PhraseValueInputUI extends phrase_suggestor_PhraseSuggestorUI{render(){return c.a.createElement(i.EuiFormRow,{fullWidth:this.props.fullWidth,label:this.props.intl.formatMessage({id:"data.filter.filterEditor.valueInputLabel",defaultMessage:"Value"})},this.isSuggestingValues()?this.renderWithSuggestions():c.a.createElement(C,{fullWidth:this.props.fullWidth,placeholder:this.props.intl.formatMessage({id:"data.filter.filterEditor.valueInputPlaceholder",defaultMessage:"Enter a value"}),value:this.props.value,onChange:this.props.onChange,field:this.props.field}))}renderWithSuggestions(){const{suggestions:e}=this.state,{value:t,intl:a,onChange:r,fullWidth:s}=this.props,i=String(t),n=t?Object(d.uniq)([i,...e]):e;return c.a.createElement(v,{fullWidth:s,placeholder:a.formatMessage({id:"data.filter.filterEditor.valueSelectPlaceholder",defaultMessage:"Select a value"}),options:n,getLabel:e=>e,selectedOptions:t?[i]:[],onChange:([e=""])=>r(e),onSearchChange:this.onSearchChange,singleSelection:{asPlainText:!0},onCreateOption:r,isClearable:!1,"data-test-subj":"filterParamsComboBox phraseParamsComboxBox"})}}));function T(e){return f(e)}const M=Object(l.injectI18n)(Object(N.withKibana)(class phrases_values_input_PhrasesValuesInputUI extends phrase_suggestor_PhraseSuggestorUI{render(){const{suggestions:e}=this.state,{values:t,intl:a,onChange:r,fullWidth:s}=this.props,n=t?Object(d.uniq)([...t,...e]):e;return c.a.createElement(i.EuiFormRow,{fullWidth:s,label:a.formatMessage({id:"data.filter.filterEditor.valuesSelectLabel",defaultMessage:"Values"})},c.a.createElement(T,{fullWidth:s,placeholder:a.formatMessage({id:"data.filter.filterEditor.valuesSelectPlaceholder",defaultMessage:"Select values"}),options:n,getLabel:e=>e,selectedOptions:t||[],onSearchChange:this.onSearchChange,onCreateOption:e=>r([...t||[],e]),onChange:r,isClearable:!1,"data-test-subj":"filterParamsComboBox phrasesParamsComboxBox"}))}}));var P=a(6),A=a.n(P);const y=Object(l.injectI18n)((function(e){const t=Object(N.useKibana)().services.uiSettings.get("dateFormat:tz"),a=e=>{if("string"!=typeof e&&"number"!=typeof e)return e;const a=A()(e).tz(t);return a.isValid()?null==a?void 0:a.format("YYYY-MM-DDTHH:mm:ss.SSSZ"):e},r=t=>{if("string"!=typeof t&&"number"!=typeof t)throw new Error("Range params must be a string or number");e.onChange({from:t,to:Object(d.get)(e,"value.to")})},s=t=>{if("string"!=typeof t&&"number"!=typeof t)throw new Error("Range params must be a string or number");e.onChange({from:Object(d.get)(e,"value.from"),to:t})};return c.a.createElement("div",null,c.a.createElement(i.EuiFormControlLayoutDelimited,{fullWidth:e.fullWidth,"aria-label":e.intl.formatMessage({id:"data.filter.filterEditor.rangeInputLabel",defaultMessage:"Range"}),startControl:c.a.createElement(C,{controlOnly:!0,field:e.field,value:e.value?e.value.from:void 0,onChange:r,onBlur:e=>{r(a(e))},placeholder:e.intl.formatMessage({id:"data.filter.filterEditor.rangeStartInputPlaceholder",defaultMessage:"Start of the range"})}),endControl:c.a.createElement(C,{controlOnly:!0,field:e.field,value:e.value?e.value.to:void 0,onChange:s,onBlur:e=>{s(a(e))},placeholder:e.intl.formatMessage({id:"data.filter.filterEditor.rangeEndInputPlaceholder",defaultMessage:"End of the range"})})}))}));var x=a(20);class filter_editor_FilterEditorUI extends u.Component{constructor(e){super(e),s()(this,"toggleCustomEditor",(()=>{const e=!this.state.isCustomEditorOpen;this.setState({isCustomEditorOpen:e})})),s()(this,"onIndexPatternChange",(([e])=>{this.setState({selectedIndexPattern:e,selectedField:undefined,selectedOperator:undefined,params:undefined})})),s()(this,"onFieldChange",(([e])=>{this.setState({selectedField:e,selectedOperator:undefined,params:undefined})})),s()(this,"onOperatorChange",(([e])=>{const t=Object(d.get)(this.state.selectedOperator,"type")===Object(d.get)(e,"type")?this.state.params:void 0;this.setState({selectedOperator:e,params:t})})),s()(this,"onCustomLabelSwitchChange",(e=>{const t=e.target.checked,a=e.target.checked?"":null;this.setState({useCustomLabel:t,customLabel:a})})),s()(this,"onCustomLabelChange",(e=>{const t=e.target.value;this.setState({customLabel:t})})),s()(this,"onParamsChange",(e=>{this.setState({params:e})})),s()(this,"onQueryDslChange",(e=>{this.setState({queryDsl:e})})),s()(this,"onSubmit",(()=>{const{selectedIndexPattern:e,selectedField:t,selectedOperator:a,params:r,useCustomLabel:s,customLabel:i,isCustomEditorOpen:n,queryDsl:l}=this.state,{$state:d}=this.props.filter;if(!d||!d.store)return;const u=s?i:null;if(n){const{index:e,disabled:t=!1,negate:a=!1}=this.props.filter.meta,r=e||this.props.indexPatterns[0].id,s=JSON.parse(l),i=Object(o.d)(r,s,t,a,u,d.store);this.props.onSubmit(i)}else if(e&&t&&a){var c;const s=Object(o.h)(e,t,a.type,a.negate,null!==(c=this.props.filter.meta.disabled)&&void 0!==c&&c,null!=r?r:"",u,d.store);this.props.onSubmit(s)}})),this.state={selectedIndexPattern:this.getIndexPatternFromFilter(),selectedField:this.getFieldFromFilter(),selectedOperator:this.getSelectedOperator(),params:Object(o.u)(e.filter),useCustomLabel:null!==e.filter.meta.alias,customLabel:e.filter.meta.alias||"",queryDsl:JSON.stringify(Object(o.n)(e.filter),null,2),isCustomEditorOpen:this.isUnknownFilterType()}}render(){return c.a.createElement("div",null,c.a.createElement(i.EuiPopoverTitle,{paddingSize:"m"},c.a.createElement(i.EuiFlexGroup,{alignItems:"baseline",responsive:!1},c.a.createElement(i.EuiFlexItem,null,c.a.createElement(l.FormattedMessage,{id:"data.filter.filterEditor.editFilterPopupTitle",defaultMessage:"Edit filter"})),c.a.createElement(i.EuiFlexItem,{grow:!1,className:"filterEditor__hiddenItem"}),c.a.createElement(i.EuiFlexItem,{grow:!1},c.a.createElement(i.EuiButtonEmpty,{size:"xs","data-test-subj":"editQueryDSL",onClick:this.toggleCustomEditor},this.state.isCustomEditorOpen?c.a.createElement(l.FormattedMessage,{id:"data.filter.filterEditor.editFilterValuesButtonLabel",defaultMessage:"Edit filter values"}):c.a.createElement(l.FormattedMessage,{id:"data.filter.filterEditor.editQueryDslButtonLabel",defaultMessage:"Edit as Query DSL"}))))),c.a.createElement("div",{className:"globalFilterItem__editorForm"},c.a.createElement(i.EuiForm,null,this.renderIndexPatternInput(),this.state.isCustomEditorOpen?this.renderCustomEditor():this.renderRegularEditor(),c.a.createElement(i.EuiSpacer,{size:"m"}),c.a.createElement(i.EuiSwitch,{id:"filterEditorCustomLabelSwitch","data-test-subj":"createCustomLabel",label:this.props.intl.formatMessage({id:"data.filter.filterEditor.createCustomLabelSwitchLabel",defaultMessage:"Create custom label?"}),checked:this.state.useCustomLabel,onChange:this.onCustomLabelSwitchChange}),this.state.useCustomLabel&&c.a.createElement("div",null,c.a.createElement(i.EuiSpacer,{size:"m"}),c.a.createElement(i.EuiFormRow,{label:this.props.intl.formatMessage({id:"data.filter.filterEditor.createCustomLabelInputLabel",defaultMessage:"Custom label"}),fullWidth:!0},c.a.createElement(i.EuiFieldText,{value:`${this.state.customLabel}`,onChange:this.onCustomLabelChange,fullWidth:!0}))),c.a.createElement(i.EuiSpacer,{size:"m"}),c.a.createElement(i.EuiFlexGroup,{direction:"rowReverse",alignItems:"center",responsive:!1},c.a.createElement(i.EuiFlexItem,{grow:!1},c.a.createElement(i.EuiButton,{fill:!0,onClick:this.onSubmit,isDisabled:!this.isFilterValid(),"data-test-subj":"saveFilter"},c.a.createElement(l.FormattedMessage,{id:"data.filter.filterEditor.saveButtonLabel",defaultMessage:"Save"}))),c.a.createElement(i.EuiFlexItem,{grow:!1},c.a.createElement(i.EuiButtonEmpty,{flush:"right",onClick:this.props.onCancel,"data-test-subj":"cancelSaveFilter"},c.a.createElement(l.FormattedMessage,{id:"data.filter.filterEditor.cancelButtonLabel",defaultMessage:"Cancel"}))),c.a.createElement(i.EuiFlexItem,null)))))}renderIndexPatternInput(){if(this.props.indexPatterns.length<=1&&this.props.indexPatterns.find((e=>e===this.getIndexPatternFromFilter())))return"";const{selectedIndexPattern:e}=this.state;return c.a.createElement(i.EuiFlexGroup,null,c.a.createElement(i.EuiFlexItem,null,c.a.createElement(i.EuiFormRow,{fullWidth:!0,label:this.props.intl.formatMessage({id:"data.filter.filterEditor.indexPatternSelectLabel",defaultMessage:"Index Pattern"})},c.a.createElement($,{fullWidth:!0,placeholder:this.props.intl.formatMessage({id:"data.filter.filterBar.indexPatternSelectPlaceholder",defaultMessage:"Select an index pattern"}),options:this.props.indexPatterns,selectedOptions:e?[e]:[],getLabel:e=>e.title,onChange:this.onIndexPatternChange,singleSelection:{asPlainText:!0},isClearable:!1,"data-test-subj":"filterIndexPatternsSelect"}))))}renderRegularEditor(){return c.a.createElement("div",null,c.a.createElement(i.EuiFlexGroup,{responsive:!0,gutterSize:"s"},c.a.createElement(i.EuiFlexItem,{grow:2},this.renderFieldInput()),c.a.createElement(i.EuiFlexItem,{grow:!1,style:{flexBasis:160}},this.renderOperatorInput())),c.a.createElement(i.EuiSpacer,{size:"s"}),c.a.createElement("div",{"data-test-subj":"filterParams"},this.renderParamsEditor()))}renderFieldInput(){const{selectedIndexPattern:e,selectedField:t}=this.state,a=e?e.fields.filter(L.isFilterable):[];return c.a.createElement(i.EuiFormRow,{fullWidth:!0,label:this.props.intl.formatMessage({id:"data.filter.filterEditor.fieldSelectLabel",defaultMessage:"Field"})},c.a.createElement(_,{fullWidth:!0,id:"fieldInput",isDisabled:!e,placeholder:this.props.intl.formatMessage({id:"data.filter.filterEditor.fieldSelectPlaceholder",defaultMessage:"Select a field first"}),options:a,selectedOptions:t?[t]:[],getLabel:e=>e.name,onChange:this.onFieldChange,singleSelection:{asPlainText:!0},isClearable:!1,"data-test-subj":"filterFieldSuggestionList"}))}renderOperatorInput(){const{selectedField:e,selectedOperator:t}=this.state,a=e?(r=e,S.a.filter((e=>e.field?e.field(r):!e.fieldTypes||e.fieldTypes.includes(r.type)))):[];var r;return c.a.createElement(i.EuiFormRow,{fullWidth:!0,label:this.props.intl.formatMessage({id:"data.filter.filterEditor.operatorSelectLabel",defaultMessage:"Operator"})},c.a.createElement(D,{fullWidth:!0,isDisabled:!e,placeholder:e?this.props.intl.formatMessage({id:"data.filter.filterEditor.operatorSelectPlaceholderSelect",defaultMessage:"Select"}):this.props.intl.formatMessage({id:"data.filter.filterEditor.operatorSelectPlaceholderWaiting",defaultMessage:"Waiting"}),options:a,selectedOptions:t?[t]:[],getLabel:({message:e})=>e,onChange:this.onOperatorChange,singleSelection:{asPlainText:!0},isClearable:!1,"data-test-subj":"filterOperatorList"}))}renderCustomEditor(){return c.a.createElement(i.EuiFormRow,{fullWidth:!0,label:n.i18n.translate("data.filter.filterEditor.queryDslLabel",{defaultMessage:"Elasticsearch Query DSL"})},c.a.createElement(N.CodeEditor,{languageId:p.XJsonLang.ID,width:"100%",height:"250px",value:this.state.queryDsl,onChange:this.onQueryDslChange,"data-test-subj":"customEditorInput","aria-label":n.i18n.translate("data.filter.filterEditor.queryDslAriaLabel",{defaultMessage:"Elasticsearch Query DSL editor"})}))}renderParamsEditor(){const e=this.state.selectedIndexPattern;if(!e||!this.state.selectedOperator||!this.state.selectedField)return"";switch(this.state.selectedOperator.type){case"exists":return"";case"phrase":return c.a.createElement(F,{indexPattern:e,field:this.state.selectedField,value:this.state.params,onChange:this.onParamsChange,"data-test-subj":"phraseValueInput",timeRangeForSuggestionsOverride:this.props.timeRangeForSuggestionsOverride,fullWidth:!0});case"phrases":return c.a.createElement(M,{indexPattern:e,field:this.state.selectedField,values:this.state.params,onChange:this.onParamsChange,timeRangeForSuggestionsOverride:this.props.timeRangeForSuggestionsOverride,fullWidth:!0});case"range":return c.a.createElement(y,{field:this.state.selectedField,value:this.state.params,onChange:this.onParamsChange,fullWidth:!0})}}isUnknownFilterType(){const{type:e}=this.props.filter.meta;return!!e&&!["phrase","phrases","range","exists"].includes(e)}getIndexPatternFromFilter(){return Object(x.n)(this.props.filter,this.props.indexPatterns)}getFieldFromFilter(){const e=this.getIndexPatternFromFilter();return e&&function(e,t){return t.fields.find((t=>t.name===e.meta.key))}(this.props.filter,e)}getSelectedOperator(){return e=this.props.filter,S.a.find((t=>e.meta.type===t.type&&e.meta.negate===t.negate));var e}isFilterValid(){const{isCustomEditorOpen:e,queryDsl:t,selectedIndexPattern:a,selectedField:r,selectedOperator:s,params:i}=this.state;if(e)try{const e=JSON.parse(t);return Object.keys(e).length>0}catch(e){return!1}return function(e,t,a,r){if(!e||!t||!a)return!1;switch(a.type){case"phrase":return R(r,t);case"phrases":return!(!Array.isArray(r)||!r.length)&&r.every((e=>R(e,t)));case"range":return"object"==typeof r&&(!r.from||R(r.from,t))&&(!r.to||R(r.to,t));case"exists":return!0;default:throw new Error(`Unknown operator type: ${a.type}`)}}(a,r,s,i)}}function $(e){return f(e)}function _(e){return f(e)}function D(e){return f(e)}const j=Object(l.injectI18n)(filter_editor_FilterEditorUI)},127:function(e,t,a){const r=a(128);e.exports=(e,t)=>{const a=r(e,t);return a?a.version:null}},128:function(e,t,a){const{MAX_LENGTH:r}=a(118),{re:s,t:i}=a(122),n=a(130);e.exports=(e,t)=>{if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof n)return e;if("string"!=typeof e)return null;if(e.length>r)return null;if(!(t.loose?s[i.LOOSE]:s[i.FULL]).test(e))return null;try{return new n(e,t)}catch(e){return null}}},129:function(e,t,a){e.exports=a(29)(954)},130:function(e,t,a){const r=a(123),{MAX_LENGTH:s,MAX_SAFE_INTEGER:i}=a(118),{re:n,t:l}=a(122),{compareIdentifiers:o}=a(131);class SemVer{constructor(e,t){if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof SemVer){if(e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease)return e;e=e.version}else if("string"!=typeof e)throw new TypeError(`Invalid Version: ${e}`);if(e.length>s)throw new TypeError(`version is longer than ${s} characters`);r("SemVer",e,t),this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease;const a=e.trim().match(t.loose?n[l.LOOSE]:n[l.FULL]);if(!a)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+a[1],this.minor=+a[2],this.patch=+a[3],this.major>i||this.major<0)throw new TypeError("Invalid major version");if(this.minor>i||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>i||this.patch<0)throw new TypeError("Invalid patch version");a[4]?this.prerelease=a[4].split(".").map((e=>{if(/^[0-9]+$/.test(e)){const t=+e;if(t>=0&&t<i)return t}return e})):this.prerelease=[],this.build=a[5]?a[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(r("SemVer.compare",this.version,this.options,e),!(e instanceof SemVer)){if("string"==typeof e&&e===this.version)return 0;e=new SemVer(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof SemVer||(e=new SemVer(e,this.options)),o(this.major,e.major)||o(this.minor,e.minor)||o(this.patch,e.patch)}comparePre(e){if(e instanceof SemVer||(e=new SemVer(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let t=0;do{const a=this.prerelease[t],s=e.prerelease[t];if(r("prerelease compare",t,a,s),void 0===a&&void 0===s)return 0;if(void 0===s)return 1;if(void 0===a)return-1;if(a!==s)return o(a,s)}while(++t)}compareBuild(e){e instanceof SemVer||(e=new SemVer(e,this.options));let t=0;do{const a=this.build[t],s=e.build[t];if(r("prerelease compare",t,a,s),void 0===a&&void 0===s)return 0;if(void 0===s)return 1;if(void 0===a)return-1;if(a!==s)return o(a,s)}while(++t)}inc(e,t){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t),this.inc("pre",t);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t),this.inc("pre",t);break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":if(0===this.prerelease.length)this.prerelease=[0];else{let e=this.prerelease.length;for(;--e>=0;)"number"==typeof this.prerelease[e]&&(this.prerelease[e]++,e=-2);-1===e&&this.prerelease.push(0)}t&&(this.prerelease[0]===t?isNaN(this.prerelease[1])&&(this.prerelease=[t,0]):this.prerelease=[t,0]);break;default:throw new Error(`invalid increment argument: ${e}`)}return this.format(),this.raw=this.version,this}}e.exports=SemVer},131:function(e,t){const a=/^[0-9]+$/,r=(e,t)=>{const r=a.test(e),s=a.test(t);return r&&s&&(e=+e,t=+t),e===t?0:r&&!s?-1:s&&!r?1:e<t?-1:1};e.exports={compareIdentifiers:r,rcompareIdentifiers:(e,t)=>r(t,e)}}}]);