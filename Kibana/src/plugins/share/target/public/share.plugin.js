!function(e){function t(t){for(var r,n,o=t[0],a=t[1],i=0,l=[];i<o.length;i++)n=o[i],Object.prototype.hasOwnProperty.call(s,n)&&s[n]&&l.push(s[n][0]),s[n]=0;for(r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r]);for(c&&c(t);l.length;)l.shift()()}var r={},s={0:0};function n(t){if(r[t])return r[t].exports;var s=r[t]={i:t,l:!1,exports:{}};return e[t].call(s.exports,s,s.exports,n),s.l=!0,s.exports}n.e=function(e){var t=[],r=s[e];if(0!==r)if(r)t.push(r[2]);else{var o=new Promise((function(t,n){r=s[e]=[t,n]}));t.push(r[2]=o);var a,i=document.createElement("script");i.charset="utf-8",i.timeout=120,n.nc&&i.setAttribute("nonce",n.nc),i.src=function(e){return n.p+"share.chunk."+e+".js"}(e);var c=new Error;a=function(t){i.onerror=i.onload=null,clearTimeout(l);var r=s[e];if(0!==r){if(r){var n=t&&("load"===t.type?"missing":t.type),o=t&&t.target&&t.target.src;c.message="Loading chunk "+e+" failed.\n("+n+": "+o+")",c.name="ChunkLoadError",c.type=n,c.request=o,r[1](c)}s[e]=void 0}};var l=setTimeout((function(){a({type:"timeout",target:i})}),12e4);i.onerror=i.onload=a,document.head.appendChild(i)}return Promise.all(t)},n.m=e,n.c=r,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)n.d(r,s,function(t){return e[t]}.bind(null,s));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n.oe=function(e){throw console.error(e),e};var o=window.share_bundle_jsonpfunction=window.share_bundle_jsonpfunction||[],a=o.push.bind(o);o.push=t,o=o.slice();for(var i=0;i<o.length;i++)t(o[i]);var c=a;n(n.s=18)}([function(e,t,r){e.exports=r(7)(2)},function(e,t){e.exports=__kbnSharedDeps__.EmotionReact},function(e,t){e.exports=__kbnSharedDeps__.ElasticEui},function(e,t){e.exports=__kbnSharedDeps__.KbnI18n},function(e,t){e.exports=__kbnSharedDeps__.KbnI18nReact},function(e,t){e.exports=__kbnSharedDeps__.React},function(e,t,r){"use strict";var s=r(25),n=r(28);function o(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}t.parse=y,t.resolve=function(e,t){return y(e,!1,!0).resolve(t)},t.resolveObject=function(e,t){return e?y(e,!1,!0).resolveObject(t):t},t.format=function(e){n.isString(e)&&(e=y(e));return e instanceof o?e.format():o.prototype.format.call(e)},t.Url=o;var a=/^([a-z0-9.+-]+:)/i,i=/:[0-9]*$/,c=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,l=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),h=["'"].concat(l),u=["%","/","?",";","#"].concat(h),p=["/","?","#"],d=/^[+a-z0-9A-Z_-]{0,63}$/,f=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,m={javascript:!0,"javascript:":!0},g={javascript:!0,"javascript:":!0},b={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},v=r(29);function y(e,t,r){if(e&&n.isObject(e)&&e instanceof o)return e;var s=new o;return s.parse(e,t,r),s}o.prototype.parse=function(e,t,r){if(!n.isString(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var o=e.indexOf("?"),i=-1!==o&&o<e.indexOf("#")?"?":"#",l=e.split(i);l[0]=l[0].replace(/\\/g,"/");var y=e=l.join(i);if(y=y.trim(),!r&&1===e.split("#").length){var w=c.exec(y);if(w)return this.path=y,this.href=y,this.pathname=w[1],w[2]?(this.search=w[2],this.query=t?v.parse(this.search.substr(1)):this.search.substr(1)):t&&(this.search="",this.query={}),this}var S=a.exec(y);if(S){var U=(S=S[0]).toLowerCase();this.protocol=U,y=y.substr(S.length)}if(r||S||y.match(/^\/\/[^@\/]+@[^@\/]+/)){var j="//"===y.substr(0,2);!j||S&&g[S]||(y=y.substr(2),this.slashes=!0)}if(!g[S]&&(j||S&&!b[S])){for(var _,x,O=-1,E=0;E<p.length;E++){-1!==(P=y.indexOf(p[E]))&&(-1===O||P<O)&&(O=P)}-1!==(x=-1===O?y.lastIndexOf("@"):y.lastIndexOf("@",O))&&(_=y.slice(0,x),y=y.slice(x+1),this.auth=decodeURIComponent(_)),O=-1;for(E=0;E<u.length;E++){var P;-1!==(P=y.indexOf(u[E]))&&(-1===O||P<O)&&(O=P)}-1===O&&(O=y.length),this.host=y.slice(0,O),y=y.slice(O),this.parseHost(),this.hostname=this.hostname||"";var C="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!C)for(var M=this.hostname.split(/\./),A=(E=0,M.length);E<A;E++){var R=M[E];if(R&&!R.match(d)){for(var T="",L=0,I=R.length;L<I;L++)R.charCodeAt(L)>127?T+="x":T+=R[L];if(!T.match(d)){var k=M.slice(0,E),F=M.slice(E+1),N=R.match(f);N&&(k.push(N[1]),F.unshift(N[2])),F.length&&(y="/"+F.join(".")+y),this.hostname=k.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),C||(this.hostname=s.toASCII(this.hostname));var D=this.port?":"+this.port:"",G=this.hostname||"";this.host=G+D,this.href+=this.host,C&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==y[0]&&(y="/"+y))}if(!m[U])for(E=0,A=h.length;E<A;E++){var B=h[E];if(-1!==y.indexOf(B)){var q=encodeURIComponent(B);q===B&&(q=escape(B)),y=y.split(B).join(q)}}var $=y.indexOf("#");-1!==$&&(this.hash=y.substr($),y=y.slice(0,$));var z=y.indexOf("?");if(-1!==z?(this.search=y.substr(z),this.query=y.substr(z+1),t&&(this.query=v.parse(this.query)),y=y.slice(0,z)):t&&(this.search="",this.query={}),y&&(this.pathname=y),b[U]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){D=this.pathname||"";var W=this.search||"";this.path=D+W}return this.href=this.format(),this},o.prototype.format=function(){var e=this.auth||"";e&&(e=(e=encodeURIComponent(e)).replace(/%3A/i,":"),e+="@");var t=this.protocol||"",r=this.pathname||"",s=this.hash||"",o=!1,a="";this.host?o=e+this.host:this.hostname&&(o=e+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(o+=":"+this.port)),this.query&&n.isObject(this.query)&&Object.keys(this.query).length&&(a=v.stringify(this.query));var i=this.search||a&&"?"+a||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||b[t])&&!1!==o?(o="//"+(o||""),r&&"/"!==r.charAt(0)&&(r="/"+r)):o||(o=""),s&&"#"!==s.charAt(0)&&(s="#"+s),i&&"?"!==i.charAt(0)&&(i="?"+i),t+o+(r=r.replace(/[?#]/g,(function(e){return encodeURIComponent(e)})))+(i=i.replace("#","%23"))+s},o.prototype.resolve=function(e){return this.resolveObject(y(e,!1,!0)).format()},o.prototype.resolveObject=function(e){if(n.isString(e)){var t=new o;t.parse(e,!1,!0),e=t}for(var r=new o,s=Object.keys(this),a=0;a<s.length;a++){var i=s[a];r[i]=this[i]}if(r.hash=e.hash,""===e.href)return r.href=r.format(),r;if(e.slashes&&!e.protocol){for(var c=Object.keys(e),l=0;l<c.length;l++){var h=c[l];"protocol"!==h&&(r[h]=e[h])}return b[r.protocol]&&r.hostname&&!r.pathname&&(r.path=r.pathname="/"),r.href=r.format(),r}if(e.protocol&&e.protocol!==r.protocol){if(!b[e.protocol]){for(var u=Object.keys(e),p=0;p<u.length;p++){var d=u[p];r[d]=e[d]}return r.href=r.format(),r}if(r.protocol=e.protocol,e.host||g[e.protocol])r.pathname=e.pathname;else{for(var f=(e.pathname||"").split("/");f.length&&!(e.host=f.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==f[0]&&f.unshift(""),f.length<2&&f.unshift(""),r.pathname=f.join("/")}if(r.search=e.search,r.query=e.query,r.host=e.host||"",r.auth=e.auth,r.hostname=e.hostname||e.host,r.port=e.port,r.pathname||r.search){var m=r.pathname||"",v=r.search||"";r.path=m+v}return r.slashes=r.slashes||e.slashes,r.href=r.format(),r}var y=r.pathname&&"/"===r.pathname.charAt(0),w=e.host||e.pathname&&"/"===e.pathname.charAt(0),S=w||y||r.host&&e.pathname,U=S,j=r.pathname&&r.pathname.split("/")||[],_=(f=e.pathname&&e.pathname.split("/")||[],r.protocol&&!b[r.protocol]);if(_&&(r.hostname="",r.port=null,r.host&&(""===j[0]?j[0]=r.host:j.unshift(r.host)),r.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===f[0]?f[0]=e.host:f.unshift(e.host)),e.host=null),S=S&&(""===f[0]||""===j[0])),w)r.host=e.host||""===e.host?e.host:r.host,r.hostname=e.hostname||""===e.hostname?e.hostname:r.hostname,r.search=e.search,r.query=e.query,j=f;else if(f.length)j||(j=[]),j.pop(),j=j.concat(f),r.search=e.search,r.query=e.query;else if(!n.isNullOrUndefined(e.search)){if(_)r.hostname=r.host=j.shift(),(C=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@"))&&(r.auth=C.shift(),r.host=r.hostname=C.shift());return r.search=e.search,r.query=e.query,n.isNull(r.pathname)&&n.isNull(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.href=r.format(),r}if(!j.length)return r.pathname=null,r.search?r.path="/"+r.search:r.path=null,r.href=r.format(),r;for(var x=j.slice(-1)[0],O=(r.host||e.host||j.length>1)&&("."===x||".."===x)||""===x,E=0,P=j.length;P>=0;P--)"."===(x=j[P])?j.splice(P,1):".."===x?(j.splice(P,1),E++):E&&(j.splice(P,1),E--);if(!S&&!U)for(;E--;E)j.unshift("..");!S||""===j[0]||j[0]&&"/"===j[0].charAt(0)||j.unshift(""),O&&"/"!==j.join("/").substr(-1)&&j.push("");var C,M=""===j[0]||j[0]&&"/"===j[0].charAt(0);_&&(r.hostname=r.host=M?"":j.length?j.shift():"",(C=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@"))&&(r.auth=C.shift(),r.host=r.hostname=C.shift()));return(S=S||r.host&&j.length)&&!M&&j.unshift(""),j.length?r.pathname=j.join("/"):(r.pathname=null,r.path=null),n.isNull(r.pathname)&&n.isNull(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.auth=e.auth||r.auth,r.slashes=r.slashes||e.slashes,r.href=r.format(),r},o.prototype.parseHost=function(){var e=this.host,t=i.exec(e);t&&(":"!==(t=t[0])&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)}},function(e,t){e.exports=__kbnSharedDeps_npm__},function(e,t,r){var s,n=function(){var e=String.fromCharCode,t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",s={};function n(e,t){if(!s[e]){s[e]={};for(var r=0;r<e.length;r++)s[e][e.charAt(r)]=r}return s[e][t]}var o={compressToBase64:function(e){if(null==e)return"";var r=o._compress(e,6,(function(e){return t.charAt(e)}));switch(r.length%4){default:case 0:return r;case 1:return r+"===";case 2:return r+"==";case 3:return r+"="}},decompressFromBase64:function(e){return null==e?"":""==e?null:o._decompress(e.length,32,(function(r){return n(t,e.charAt(r))}))},compressToUTF16:function(t){return null==t?"":o._compress(t,15,(function(t){return e(t+32)}))+" "},decompressFromUTF16:function(e){return null==e?"":""==e?null:o._decompress(e.length,16384,(function(t){return e.charCodeAt(t)-32}))},compressToUint8Array:function(e){for(var t=o.compress(e),r=new Uint8Array(2*t.length),s=0,n=t.length;s<n;s++){var a=t.charCodeAt(s);r[2*s]=a>>>8,r[2*s+1]=a%256}return r},decompressFromUint8Array:function(t){if(null==t)return o.decompress(t);for(var r=new Array(t.length/2),s=0,n=r.length;s<n;s++)r[s]=256*t[2*s]+t[2*s+1];var a=[];return r.forEach((function(t){a.push(e(t))})),o.decompress(a.join(""))},compressToEncodedURIComponent:function(e){return null==e?"":o._compress(e,6,(function(e){return r.charAt(e)}))},decompressFromEncodedURIComponent:function(e){return null==e?"":""==e?null:(e=e.replace(/ /g,"+"),o._decompress(e.length,32,(function(t){return n(r,e.charAt(t))})))},compress:function(t){return o._compress(t,16,(function(t){return e(t)}))},_compress:function(e,t,r){if(null==e)return"";var s,n,o,a={},i={},c="",l="",h="",u=2,p=3,d=2,f=[],m=0,g=0;for(o=0;o<e.length;o+=1)if(c=e.charAt(o),Object.prototype.hasOwnProperty.call(a,c)||(a[c]=p++,i[c]=!0),l=h+c,Object.prototype.hasOwnProperty.call(a,l))h=l;else{if(Object.prototype.hasOwnProperty.call(i,h)){if(h.charCodeAt(0)<256){for(s=0;s<d;s++)m<<=1,g==t-1?(g=0,f.push(r(m)),m=0):g++;for(n=h.charCodeAt(0),s=0;s<8;s++)m=m<<1|1&n,g==t-1?(g=0,f.push(r(m)),m=0):g++,n>>=1}else{for(n=1,s=0;s<d;s++)m=m<<1|n,g==t-1?(g=0,f.push(r(m)),m=0):g++,n=0;for(n=h.charCodeAt(0),s=0;s<16;s++)m=m<<1|1&n,g==t-1?(g=0,f.push(r(m)),m=0):g++,n>>=1}0==--u&&(u=Math.pow(2,d),d++),delete i[h]}else for(n=a[h],s=0;s<d;s++)m=m<<1|1&n,g==t-1?(g=0,f.push(r(m)),m=0):g++,n>>=1;0==--u&&(u=Math.pow(2,d),d++),a[l]=p++,h=String(c)}if(""!==h){if(Object.prototype.hasOwnProperty.call(i,h)){if(h.charCodeAt(0)<256){for(s=0;s<d;s++)m<<=1,g==t-1?(g=0,f.push(r(m)),m=0):g++;for(n=h.charCodeAt(0),s=0;s<8;s++)m=m<<1|1&n,g==t-1?(g=0,f.push(r(m)),m=0):g++,n>>=1}else{for(n=1,s=0;s<d;s++)m=m<<1|n,g==t-1?(g=0,f.push(r(m)),m=0):g++,n=0;for(n=h.charCodeAt(0),s=0;s<16;s++)m=m<<1|1&n,g==t-1?(g=0,f.push(r(m)),m=0):g++,n>>=1}0==--u&&(u=Math.pow(2,d),d++),delete i[h]}else for(n=a[h],s=0;s<d;s++)m=m<<1|1&n,g==t-1?(g=0,f.push(r(m)),m=0):g++,n>>=1;0==--u&&(u=Math.pow(2,d),d++)}for(n=2,s=0;s<d;s++)m=m<<1|1&n,g==t-1?(g=0,f.push(r(m)),m=0):g++,n>>=1;for(;;){if(m<<=1,g==t-1){f.push(r(m));break}g++}return f.join("")},decompress:function(e){return null==e?"":""==e?null:o._decompress(e.length,32768,(function(t){return e.charCodeAt(t)}))},_decompress:function(t,r,s){var n,o,a,i,c,l,h,u=[],p=4,d=4,f=3,m="",g=[],b={val:s(0),position:r,index:1};for(n=0;n<3;n+=1)u[n]=n;for(a=0,c=Math.pow(2,2),l=1;l!=c;)i=b.val&b.position,b.position>>=1,0==b.position&&(b.position=r,b.val=s(b.index++)),a|=(i>0?1:0)*l,l<<=1;switch(a){case 0:for(a=0,c=Math.pow(2,8),l=1;l!=c;)i=b.val&b.position,b.position>>=1,0==b.position&&(b.position=r,b.val=s(b.index++)),a|=(i>0?1:0)*l,l<<=1;h=e(a);break;case 1:for(a=0,c=Math.pow(2,16),l=1;l!=c;)i=b.val&b.position,b.position>>=1,0==b.position&&(b.position=r,b.val=s(b.index++)),a|=(i>0?1:0)*l,l<<=1;h=e(a);break;case 2:return""}for(u[3]=h,o=h,g.push(h);;){if(b.index>t)return"";for(a=0,c=Math.pow(2,f),l=1;l!=c;)i=b.val&b.position,b.position>>=1,0==b.position&&(b.position=r,b.val=s(b.index++)),a|=(i>0?1:0)*l,l<<=1;switch(h=a){case 0:for(a=0,c=Math.pow(2,8),l=1;l!=c;)i=b.val&b.position,b.position>>=1,0==b.position&&(b.position=r,b.val=s(b.index++)),a|=(i>0?1:0)*l,l<<=1;u[d++]=e(a),h=d-1,p--;break;case 1:for(a=0,c=Math.pow(2,16),l=1;l!=c;)i=b.val&b.position,b.position>>=1,0==b.position&&(b.position=r,b.val=s(b.index++)),a|=(i>0?1:0)*l,l<<=1;u[d++]=e(a),h=d-1,p--;break;case 2:return g.join("")}if(0==p&&(p=Math.pow(2,f),f++),u[h])m=u[h];else{if(h!==d)return null;m=o+o.charAt(0)}g.push(m),u[d++]=o+m.charAt(0),o=m,0==--p&&(p=Math.pow(2,f),f++)}}};return o}();void 0===(s=function(){return n}.call(t,r,t,e))||(e.exports=s)},function(e,t){e.exports=__kbnSharedDeps__.ReactDom},function(e,t,r){"use strict";var s,n=function(){return void 0===s&&(s=Boolean(window&&document&&document.all&&!window.atob)),s},o=function(){var e={};return function(t){if(void 0===e[t]){var r=document.querySelector(t);if(window.HTMLIFrameElement&&r instanceof window.HTMLIFrameElement)try{r=r.contentDocument.head}catch(e){r=null}e[t]=r}return e[t]}}(),a=[];function i(e){for(var t=-1,r=0;r<a.length;r++)if(a[r].identifier===e){t=r;break}return t}function c(e,t){for(var r={},s=[],n=0;n<e.length;n++){var o=e[n],c=t.base?o[0]+t.base:o[0],l=r[c]||0,h="".concat(c," ").concat(l);r[c]=l+1;var u=i(h),p={css:o[1],media:o[2],sourceMap:o[3]};-1!==u?(a[u].references++,a[u].updater(p)):a.push({identifier:h,updater:g(p,t),references:1}),s.push(h)}return s}function l(e){var t=document.createElement("style"),s=e.attributes||{};if(void 0===s.nonce){var n=r.nc;n&&(s.nonce=n)}if(Object.keys(s).forEach((function(e){t.setAttribute(e,s[e])})),"function"==typeof e.insert)e.insert(t);else{var a=o(e.insert||"head");if(!a)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");a.appendChild(t)}return t}var h,u=(h=[],function(e,t){return h[e]=t,h.filter(Boolean).join("\n")});function p(e,t,r,s){var n=r?"":s.media?"@media ".concat(s.media," {").concat(s.css,"}"):s.css;if(e.styleSheet)e.styleSheet.cssText=u(t,n);else{var o=document.createTextNode(n),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(o,a[t]):e.appendChild(o)}}function d(e,t,r){var s=r.css,n=r.media,o=r.sourceMap;if(n?e.setAttribute("media",n):e.removeAttribute("media"),o&&"undefined"!=typeof btoa&&(s+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),e.styleSheet)e.styleSheet.cssText=s;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(s))}}var f=null,m=0;function g(e,t){var r,s,n;if(t.singleton){var o=m++;r=f||(f=l(t)),s=p.bind(null,r,o,!1),n=p.bind(null,r,o,!0)}else r=l(t),s=d.bind(null,r,t),n=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(r)};return s(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;s(e=t)}else n()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=n());var r=c(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var s=0;s<r.length;s++){var n=i(r[s]);a[n].references--}for(var o=c(e,t),l=0;l<r.length;l++){var h=i(r[l]);0===a[h].references&&(a[h].updater(),a.splice(h,1))}r=o}}}},function(e,t,r){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var r=function(e,t){var r=e[1]||"",s=e[3];if(!s)return r;if(t&&"function"==typeof btoa){var n=(a=s,i=btoa(unescape(encodeURIComponent(JSON.stringify(a)))),c="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(i),"/*# ".concat(c," */")),o=s.sources.map((function(e){return"/*# sourceURL=".concat(s.sourceRoot||"").concat(e," */")}));return[r].concat(o).concat([n]).join("\n")}var a,i,c;return[r].join("\n")}(t,e);return t[2]?"@media ".concat(t[2]," {").concat(r,"}"):r})).join("")},t.i=function(e,r,s){"string"==typeof e&&(e=[[null,e,""]]);var n={};if(s)for(var o=0;o<this.length;o++){var a=this[o][0];null!=a&&(n[a]=!0)}for(var i=0;i<e.length;i++){var c=[].concat(e[i]);s&&n[c[0]]||(r&&(c[2]?c[2]="".concat(r," and ").concat(c[2]):c[2]=r),t.push(c))}},t}},function(e,t,r){r.r(t);var s=__kbnBundles__.get("plugin/kibanaReact/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(s))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=r(5);t.default=function(){var e=s.useRef(!1),t=s.useCallback((function(){return e.current}),[]);return s.useEffect((function(){return e.current=!0,function(){e.current=!1}})),t}},function(e,t){e.exports=__kbnSharedDeps__.Rxjs},function(e,t,r){r.r(t);var s=__kbnBundles__.get("plugin/kibanaUtils/common");Object.defineProperties(t,Object.getOwnPropertyDescriptors(s))},function(e,t,r){var s,n=n||function(e){"use strict";if("undefined"==typeof navigator||!/MSIE [1-9]\./.test(navigator.userAgent)){var t=e.document,r=function(){return e.URL||e.webkitURL||e},s=t.createElementNS("http://www.w3.org/1999/xhtml","a"),n="download"in s,o=e.webkitRequestFileSystem,a=e.requestFileSystem||o||e.mozRequestFileSystem,i=function(t){(e.setImmediate||e.setTimeout)((function(){throw t}),0)},c="application/octet-stream",l=0,h=function(t){var s=function(){"string"==typeof t?r().revokeObjectURL(t):t.remove()};e.chrome?s():setTimeout(s,500)},u=function(e,t,r){for(var s=(t=[].concat(t)).length;s--;){var n=e["on"+t[s]];if("function"==typeof n)try{n.call(e,r||e)}catch(e){i(e)}}},p=function(e){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob(["\ufeff",e],{type:e.type}):e},d=function(t,i,d){d||(t=p(t));var f,m,g,b=this,v=t.type,y=!1,w=function(){u(b,"writestart progress write writeend".split(" "))},S=function(){(!y&&f||(f=r().createObjectURL(t)),m)?m.location.href=f:null==e.open(f,"_blank")&&"undefined"!=typeof safari&&(e.location.href=f);b.readyState=b.DONE,w(),h(f)},U=function(e){return function(){if(b.readyState!==b.DONE)return e.apply(this,arguments)}},j={create:!0,exclusive:!1};if(b.readyState=b.INIT,i||(i="download"),n)return f=r().createObjectURL(t),s.href=f,s.download=i,void setTimeout((function(){var e,t;e=s,t=new MouseEvent("click"),e.dispatchEvent(t),w(),h(f),b.readyState=b.DONE}));e.chrome&&v&&v!==c&&(g=t.slice||t.webkitSlice,t=g.call(t,0,t.size,c),y=!0),o&&"download"!==i&&(i+=".download"),(v===c||o)&&(m=e),a?(l+=t.size,a(e.TEMPORARY,l,U((function(e){e.root.getDirectory("saved",j,U((function(e){var r=function(){e.getFile(i,j,U((function(e){e.createWriter(U((function(r){r.onwriteend=function(t){m.location.href=e.toURL(),b.readyState=b.DONE,u(b,"writeend",t),h(e)},r.onerror=function(){var e=r.error;e.code!==e.ABORT_ERR&&S()},"writestart progress write abort".split(" ").forEach((function(e){r["on"+e]=b["on"+e]})),r.write(t),b.abort=function(){r.abort(),b.readyState=b.DONE},b.readyState=b.WRITING})),S)})),S)};e.getFile(i,{create:!1},U((function(e){e.remove(),r()})),U((function(e){e.code===e.NOT_FOUND_ERR?r():S()})))})),S)})),S)):S()},f=d.prototype;return"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob?function(e,t,r){return r||(e=p(e)),navigator.msSaveOrOpenBlob(e,t||"download")}:(f.abort=function(){var e=this;e.readyState=e.DONE,u(e,"abort")},f.readyState=f.INIT=0,f.WRITING=1,f.DONE=2,f.error=f.onwritestart=f.onprogress=f.onwrite=f.onabort=f.onerror=f.onwriteend=null,function(e,t,r){return new d(e,t,r)})}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content);
/*! @source http://purl.eligrey.com/github/FileSaver.js/blob/master/FileSaver.js */e.exports?e.exports.saveAs=n:null!==r(32)&&null!=r(33)&&(void 0===(s=function(){return n}.apply(t,[]))||(e.exports=s))},function(e,t,r){"use strict";const s=r(34);e.exports=async(e,t,{concurrency:r=1/0,stopOnError:n=!0}={})=>new Promise(((o,a)=>{if("function"!=typeof t)throw new TypeError("Mapper function is required");if(!Number.isSafeInteger(r)&&r!==1/0||!(r>=1))throw new TypeError(`Expected \`concurrency\` to be an integer from 1 and up or \`Infinity\`, got \`${r}\` (${typeof r})`);const i=[],c=[],l=e[Symbol.iterator]();let h=!1,u=!1,p=0,d=0;const f=()=>{if(h)return;const e=l.next(),r=d;if(d++,e.done)return u=!0,void(0===p&&(n||0===c.length?o(i):a(new s(c))));p++,(async()=>{try{const s=await e.value;i[r]=await t(s,r),p--,f()}catch(e){n?(h=!0,a(e)):(c.push(e),p--,f())}})()};for(let e=0;e<r&&(f(),!u);e++);}))},function(e,t,r){r(19),__kbnBundles__.define("plugin/share/public",r,38)},function(e,t,r){r.p=window.__kbnPublicPath__.share},function(e,t,r){switch(window.__kbnThemeTag__){case"v8dark":return r(21);case"v8light":return r(23)}},function(e,t,r){var s=r(10),n=r(22);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[e.i,n,""]]);var o={insert:"head",singleton:!1};s(n,o);e.exports=n.locals||{}},function(e,t,r){(t=r(11)(!1)).push([e.i,".kbnShareContextMenu__finalPanel{padding:16px}\n",""]),e.exports=t},function(e,t,r){var s=r(10),n=r(24);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[e.i,n,""]]);var o={insert:"head",singleton:!1};s(n,o);e.exports=n.locals||{}},function(e,t,r){(t=r(11)(!1)).push([e.i,".kbnShareContextMenu__finalPanel{padding:16px}\n",""]),e.exports=t},function(e,t,r){(function(e,s){var n;/*! https://mths.be/punycode v1.4.1 by @mathias */!function(o){t&&t.nodeType,e&&e.nodeType;var a="object"==typeof s&&s;a.global!==a&&a.window!==a&&a.self;var i,c=2147483647,l=36,h=/^xn--/,u=/[^\x20-\x7E]/,p=/[\x2E\u3002\uFF0E\uFF61]/g,d={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},f=Math.floor,m=String.fromCharCode;function g(e){throw new RangeError(d[e])}function b(e,t){for(var r=e.length,s=[];r--;)s[r]=t(e[r]);return s}function v(e,t){var r=e.split("@"),s="";return r.length>1&&(s=r[0]+"@",e=r[1]),s+b((e=e.replace(p,".")).split("."),t).join(".")}function y(e){for(var t,r,s=[],n=0,o=e.length;n<o;)(t=e.charCodeAt(n++))>=55296&&t<=56319&&n<o?56320==(64512&(r=e.charCodeAt(n++)))?s.push(((1023&t)<<10)+(1023&r)+65536):(s.push(t),n--):s.push(t);return s}function w(e){return b(e,(function(e){var t="";return e>65535&&(t+=m((e-=65536)>>>10&1023|55296),e=56320|1023&e),t+=m(e)})).join("")}function S(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function U(e,t,r){var s=0;for(e=r?f(e/700):e>>1,e+=f(e/t);e>455;s+=l)e=f(e/35);return f(s+36*e/(e+38))}function j(e){var t,r,s,n,o,a,i,h,u,p,d,m=[],b=e.length,v=0,y=128,S=72;for((r=e.lastIndexOf("-"))<0&&(r=0),s=0;s<r;++s)e.charCodeAt(s)>=128&&g("not-basic"),m.push(e.charCodeAt(s));for(n=r>0?r+1:0;n<b;){for(o=v,a=1,i=l;n>=b&&g("invalid-input"),((h=(d=e.charCodeAt(n++))-48<10?d-22:d-65<26?d-65:d-97<26?d-97:l)>=l||h>f((c-v)/a))&&g("overflow"),v+=h*a,!(h<(u=i<=S?1:i>=S+26?26:i-S));i+=l)a>f(c/(p=l-u))&&g("overflow"),a*=p;S=U(v-o,t=m.length+1,0==o),f(v/t)>c-y&&g("overflow"),y+=f(v/t),v%=t,m.splice(v++,0,y)}return w(m)}function _(e){var t,r,s,n,o,a,i,h,u,p,d,b,v,w,j,_=[];for(b=(e=y(e)).length,t=128,r=0,o=72,a=0;a<b;++a)(d=e[a])<128&&_.push(m(d));for(s=n=_.length,n&&_.push("-");s<b;){for(i=c,a=0;a<b;++a)(d=e[a])>=t&&d<i&&(i=d);for(i-t>f((c-r)/(v=s+1))&&g("overflow"),r+=(i-t)*v,t=i,a=0;a<b;++a)if((d=e[a])<t&&++r>c&&g("overflow"),d==t){for(h=r,u=l;!(h<(p=u<=o?1:u>=o+26?26:u-o));u+=l)j=h-p,w=l-p,_.push(m(S(p+j%w,0))),h=f(j/w);_.push(m(S(h,0))),o=U(r,v,s==n),r=0,++s}++r,++t}return _.join("")}i={version:"1.4.1",ucs2:{decode:y,encode:w},decode:j,encode:_,toASCII:function(e){return v(e,(function(e){return u.test(e)?"xn--"+_(e):e}))},toUnicode:function(e){return v(e,(function(e){return h.test(e)?j(e.slice(4).toLowerCase()):e}))}},void 0===(n=function(){return i}.call(t,r,t,e))||(e.exports=n)}()}).call(this,r(26)(e),r(27))},function(e,t,r){e.exports=r(7)(434)},function(e,t,r){e.exports=r(7)(158)},function(e,t,r){"use strict";e.exports={isString:function(e){return"string"==typeof e},isObject:function(e){return"object"==typeof e&&null!==e},isNull:function(e){return null===e},isNullOrUndefined:function(e){return null==e}}},function(e,t,r){"use strict";t.decode=t.parse=r(30),t.encode=t.stringify=r(31)},function(e,t,r){"use strict";function s(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.exports=function(e,t,r,o){t=t||"&",r=r||"=";var a={};if("string"!=typeof e||0===e.length)return a;var i=/\+/g;e=e.split(t);var c=1e3;o&&"number"==typeof o.maxKeys&&(c=o.maxKeys);var l=e.length;c>0&&l>c&&(l=c);for(var h=0;h<l;++h){var u,p,d,f,m=e[h].replace(i,"%20"),g=m.indexOf(r);g>=0?(u=m.substr(0,g),p=m.substr(g+1)):(u=m,p=""),d=decodeURIComponent(u),f=decodeURIComponent(p),s(a,d)?n(a[d])?a[d].push(f):a[d]=[a[d],f]:a[d]=f}return a};var n=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},function(e,t,r){"use strict";var s=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};e.exports=function(e,t,r,i){return t=t||"&",r=r||"=",null===e&&(e=void 0),"object"==typeof e?o(a(e),(function(a){var i=encodeURIComponent(s(a))+r;return n(e[a])?o(e[a],(function(e){return i+encodeURIComponent(s(e))})).join(t):i+encodeURIComponent(s(e[a]))})).join(t):i?encodeURIComponent(s(i))+r+encodeURIComponent(s(e)):""};var n=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};function o(e,t){if(e.map)return e.map(t);for(var r=[],s=0;s<e.length;s++)r.push(t(e[s],s));return r}var a=Object.keys||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.push(r);return t}},function(e,t,r){e.exports=r(7)(1460)},function(e,t){(function(t){e.exports=t}).call(this,{})},function(e,t,r){"use strict";const s=r(35),n=r(36);class AggregateError extends Error{constructor(e){if(!Array.isArray(e))throw new TypeError("Expected input to be an Array, got "+typeof e);let t=(e=[...e].map((e=>e instanceof Error?e:null!==e&&"object"==typeof e?Object.assign(new Error(e.message),e):new Error(e)))).map((e=>"string"==typeof e.stack?n(e.stack).replace(/\s+at .*aggregate-error\/index.js:\d+:\d+\)?/g,""):String(e))).join("\n");t="\n"+s(t,4),super(t),this.name="AggregateError",Object.defineProperty(this,"_errors",{value:e})}*[Symbol.iterator](){for(const e of this._errors)yield e}}e.exports=AggregateError},function(e,t,r){"use strict";e.exports=(e,t=1,r)=>{if(r={indent:" ",includeEmptyLines:!1,...r},"string"!=typeof e)throw new TypeError(`Expected \`input\` to be a \`string\`, got \`${typeof e}\``);if("number"!=typeof t)throw new TypeError(`Expected \`count\` to be a \`number\`, got \`${typeof t}\``);if("string"!=typeof r.indent)throw new TypeError(`Expected \`options.indent\` to be a \`string\`, got \`${typeof r.indent}\``);if(0===t)return e;const s=r.includeEmptyLines?/^/gm:/^(?!\s*$)/gm;return e.replace(s,r.indent.repeat(t))}},function(e,t,r){"use strict";const s=r(37),n=/\s+at.*(?:\(|\s)(.*)\)?/,o=/^(?:(?:(?:node|(?:internal\/[\w/]*|.*node_modules\/(?:babel-polyfill|pirates)\/.*)?\w+)\.js:\d+:\d+)|native)/,a=void 0===s.homedir?"":s.homedir();e.exports=(e,t)=>(t=Object.assign({pretty:!1},t),e.replace(/\\/g,"/").split("\n").filter((e=>{const t=e.match(n);if(null===t||!t[1])return!0;const r=t[1];return!r.includes(".app/Contents/Resources/electron.asar")&&!r.includes(".app/Contents/Resources/default_app.asar")&&!o.test(r)})).filter((e=>""!==e.trim())).map((e=>t.pretty?e.replace(n,((e,t)=>e.replace(t,t.replace(a,"~")))):e)).join("\n"))},function(e,t){},function(e,t,r){"use strict";r.r(t),r.d(t,"CSV_QUOTE_VALUES_SETTING",(function(){return n})),r.d(t,"CSV_SEPARATOR_SETTING",(function(){return s})),r.d(t,"UrlGeneratorsService",(function(){return url_generator_service_UrlGeneratorsService})),r.d(t,"useLocatorUrl",(function(){return p})),r.d(t,"downloadMultipleAs",(function(){return A})),r.d(t,"downloadFileAs",(function(){return M})),r.d(t,"plugin",(function(){return R}));const s="csv:separator",n="csv:quoteValues";var o=r(0),a=r.n(o),i=r(3);class url_generator_internal_UrlGeneratorInternal{constructor(e,t){if(this.spec=e,this.getGenerator=t,e.isDeprecated&&!e.migrate)throw new Error(i.i18n.translate("share.urlGenerators.error.noMigrationFnProvided",{defaultMessage:"If the access link generator is marked as deprecated, you must provide a migration function."}));if(!e.isDeprecated&&e.migrate)throw new Error(i.i18n.translate("share.urlGenerators.error.migrationFnGivenNotDeprecated",{defaultMessage:"If you provide a migration function, you must mark this generator as deprecated"}));if(!e.createUrl&&!e.isDeprecated)throw new Error(i.i18n.translate("share.urlGenerators.error.noCreateUrlFnProvided",{defaultMessage:"This generator is not marked as deprecated. Please provide a createUrl fn."}));if(e.createUrl&&e.isDeprecated)throw new Error(i.i18n.translate("share.urlGenerators.error.createUrlFnProvided",{defaultMessage:"This generator is marked as deprecated. Do not supply a createUrl fn."}))}getPublicContract(){return{id:this.spec.id,createUrl:async e=>{if(this.spec.migrate&&!this.spec.createUrl){const{id:t,state:r}=await this.spec.migrate(e);return console.warn("URL generator is deprecated and may not work in future versions. Please migrate your data."),this.getGenerator(t).createUrl(r)}return this.spec.createUrl(e)},isDeprecated:!!this.spec.isDeprecated}}}class url_generator_service_UrlGeneratorsService{constructor(){a()(this,"urlGenerators",new Map),a()(this,"getUrlGenerator",(e=>{const t=this.urlGenerators.get(e);if(!t)throw new Error(i.i18n.translate("share.urlGenerators.errors.noGeneratorWithId",{defaultMessage:"No generator found with id {id}",values:{id:e}}));return t.getPublicContract()}))}setup(e){return{registerUrlGenerator:e=>{const t=new url_generator_internal_UrlGeneratorInternal(e,this.getUrlGenerator);return this.urlGenerators.set(e.id,t),t.getPublicContract()}}}start(e){return{getUrlGenerator:this.getUrlGenerator}}stop(){}}var c=r(5),l=r.n(c),h=r(13),u=r.n(h);const p=(e,t,r,s=[])=>{const[n,o]=Object(c.useState)(""),a=u()();return Object(c.useEffect)((()=>{e?e.getUrl(t,r).then((e=>{a()&&o(e)})).catch((e=>{a()&&(console.error("useLocatorUrl",e),o(""))})):o("")}),[e,...s]),n};r(20);class share_menu_registry_ShareMenuRegistry{constructor(){a()(this,"shareMenuProviders",new Map)}setup(){return{register:e=>{if(this.shareMenuProviders.has(e.id))throw new Error(`Share menu provider with id [${e.id}] has already been registered. Use a unique id.`);this.shareMenuProviders.set(e.id,e)}}}start(){return{getShareMenuItems:e=>Array.from(this.shareMenuProviders.values()).flatMap((t=>t.getShareMenuItems(e)))}}}var d=r(9),f=r.n(d),m=r(4),g=r(2),b=r(12),v=r(6),y=r(1);let w;!function(e){e.EXPORT_URL_AS_SAVED_OBJECT="savedObject",e.EXPORT_URL_AS_SNAPSHOT="snapshot"}(w||(w={}));class url_panel_content_UrlPanelContent extends c.Component{constructor(e){super(e),a()(this,"mounted",void 0),a()(this,"shortUrlCache",void 0),a()(this,"isNotSaved",(()=>void 0===this.props.objectId||""===this.props.objectId)),a()(this,"resetUrl",(()=>{this.mounted&&(this.shortUrlCache=void 0,this.setState({useShortUrl:!1},this.setUrl))})),a()(this,"updateUrlParams",(e=>(e=this.props.isEmbedded?this.makeUrlEmbeddable(e):e,e=this.state.urlParams?this.getUrlParamExtensions(e):e))),a()(this,"getSavedObjectUrl",(()=>{if(this.isNotSaved())return;const e=this.getSnapshotUrl(),t=Object(v.parse)(e);if(!t||!t.hash)return;const r=Object(v.parse)(t.hash.slice(1),!0),s=Object(v.format)({protocol:t.protocol,auth:t.auth,host:t.host,pathname:t.pathname,hash:Object(v.format)({pathname:r.pathname,query:{_g:r.query._g}})});return this.updateUrlParams(s)})),a()(this,"getSnapshotUrl",(()=>{const e=this.props.shareableUrl||window.location.href;return this.updateUrlParams(e)})),a()(this,"makeUrlEmbeddable",(e=>-1!==e.indexOf("?")?e.replace("?","?embed=true&"):`${e}?embed=true`)),a()(this,"addUrlAnonymousAccessParameters",(e=>{if(!this.state.anonymousAccessParameters||!this.state.usePublicUrl)return e;const t=new URL(e);for(const[e,r]of Object.entries(this.state.anonymousAccessParameters))t.searchParams.set(e,r);return t.toString()})),a()(this,"getUrlParamExtensions",(e=>{const{urlParams:t}=this.state;return t?Object.keys(t).reduce(((e,r)=>{const s=t[r];return s?Object.keys(s).reduce(((e,t)=>s[t]?e+`&${t}=true`:e),e):e}),e):e})),a()(this,"makeIframeTag",(e=>{if(e)return`<iframe src="${e}" height="600" width="800"></iframe>`})),a()(this,"setUrl",(()=>{let e;e=this.state.exportUrlAs===w.EXPORT_URL_AS_SAVED_OBJECT?this.getSavedObjectUrl():this.state.useShortUrl?this.shortUrlCache:this.getSnapshotUrl(),e&&(e=this.addUrlAnonymousAccessParameters(e)),this.props.isEmbedded&&(e=this.makeIframeTag(e)),this.setState({url:e})})),a()(this,"handleExportUrlAs",(e=>{this.setState({exportUrlAs:e},this.setUrl)})),a()(this,"handleShortUrlChange",(async e=>{const t=e.target.checked;t&&void 0===this.shortUrlCache?this.createShortUrl():this.setState({useShortUrl:t},this.setUrl)})),a()(this,"handlePublicUrlChange",(()=>{this.setState((({usePublicUrl:e})=>({usePublicUrl:!e})),this.setUrl)})),a()(this,"createShortUrl",(async()=>{this.setState({isCreatingShortUrl:!0,shortUrlErrorMsg:void 0});try{const e=this.getSnapshotUrl(),t=await this.props.urlService.shortUrls.get(null).createFromLongUrl(e);if(!this.mounted)return;this.shortUrlCache=t.url,this.setState({isCreatingShortUrl:!1,useShortUrl:!0},this.setUrl)}catch(e){if(!this.mounted)return;this.shortUrlCache=void 0,this.setState({useShortUrl:!1,isCreatingShortUrl:!1,shortUrlErrorMsg:i.i18n.translate("share.urlPanel.unableCreateShortUrlErrorMessage",{defaultMessage:"Unable to create short URL. Error: {errorMessage}",values:{errorMessage:e.message}})},this.setUrl)}})),a()(this,"renderExportUrlAsOptions",(()=>[{id:w.EXPORT_URL_AS_SNAPSHOT,label:this.renderWithIconTip(Object(y.jsx)(m.FormattedMessage,{id:"share.urlPanel.snapshotLabel",defaultMessage:"Snapshot"}),Object(y.jsx)(m.FormattedMessage,{id:"share.urlPanel.snapshotDescription",defaultMessage:"Snapshot URLs encode the current state of the {objectType} in the URL itself. Edits to the saved {objectType} won't be visible via this URL.",values:{objectType:this.props.objectType}})),"data-test-subj":"exportAsSnapshot"},{id:w.EXPORT_URL_AS_SAVED_OBJECT,disabled:this.isNotSaved(),label:this.renderWithIconTip(Object(y.jsx)(m.FormattedMessage,{id:"share.urlPanel.savedObjectLabel",defaultMessage:"Saved object"}),Object(y.jsx)(m.FormattedMessage,{id:"share.urlPanel.savedObjectDescription",defaultMessage:"You can share this URL with people to let them load the most recent saved version of this {objectType}.",values:{objectType:this.props.objectType}})),"data-test-subj":"exportAsSavedObject"}])),a()(this,"renderWithIconTip",((e,t)=>Object(y.jsx)(g.EuiFlexGroup,{gutterSize:"none",responsive:!1},Object(y.jsx)(g.EuiFlexItem,{grow:!1},e),Object(y.jsx)(g.EuiFlexItem,{grow:!1},Object(y.jsx)(g.EuiIconTip,{content:t,position:"bottom"}))))),a()(this,"renderExportAsRadioGroup",(()=>{const e=this.isNotSaved()?Object(y.jsx)(m.FormattedMessage,{id:"share.urlPanel.canNotShareAsSavedObjectHelpText",defaultMessage:"Can't share as saved object until the {objectType} has been saved.",values:{objectType:this.props.objectType}}):void 0;return Object(y.jsx)(g.EuiFormRow,{helpText:e},Object(y.jsx)(g.EuiRadioGroup,{options:this.renderExportUrlAsOptions(),idSelected:this.state.exportUrlAs,onChange:this.handleExportUrlAs,legend:{children:Object(y.jsx)(m.FormattedMessage,{id:"share.urlPanel.generateLinkAsLabel",defaultMessage:"Generate the link as"})}}))})),a()(this,"renderShortUrlSwitch",(()=>{if(this.state.exportUrlAs===w.EXPORT_URL_AS_SAVED_OBJECT||!this.props.allowShortUrl)return null;const e=Object(y.jsx)(m.FormattedMessage,{id:"share.urlPanel.shortUrlLabel",defaultMessage:"Short URL"}),t=this.state.isCreatingShortUrl?Object(y.jsx)("span",null,Object(y.jsx)(g.EuiLoadingSpinner,{size:"s"})," ",e):e,r=Object(y.jsx)(g.EuiSwitch,{label:t,checked:this.state.useShortUrl,onChange:this.handleShortUrlChange,"data-test-subj":"useShortUrl"}),s=Object(y.jsx)(m.FormattedMessage,{id:"share.urlPanel.shortUrlHelpText",defaultMessage:"We recommend sharing shortened snapshot URLs for maximum compatibility. Internet Explorer has URL length restrictions, and some wiki and markup parsers don't do well with the full-length version of the snapshot URL, but the short URL should work great."});return Object(y.jsx)(g.EuiFormRow,{helpText:this.state.shortUrlErrorMsg,"data-test-subj":"createShortUrl"},this.renderWithIconTip(r,s))})),a()(this,"renderPublicUrlSwitch",(()=>{if(!this.state.anonymousAccessParameters||!this.state.showPublicUrlSwitch)return null;const e=Object(y.jsx)(m.FormattedMessage,{id:"share.urlPanel.publicUrlLabel",defaultMessage:"Public URL"}),t=Object(y.jsx)(g.EuiSwitch,{label:e,checked:this.state.usePublicUrl,onChange:this.handlePublicUrlChange,"data-test-subj":"usePublicUrl"}),r=Object(y.jsx)(m.FormattedMessage,{id:"share.urlPanel.publicUrlHelpText",defaultMessage:"Use public URL to share with anyone. It enables one-step anonymous access by removing the login prompt."});return Object(y.jsx)(g.EuiFormRow,{"data-test-subj":"createPublicUrl"},this.renderWithIconTip(t,r))})),a()(this,"renderUrlParamExtensions",(()=>{if(!this.props.urlParamExtensions)return;const e=e=>(t={})=>{const r={urlParams:{...this.state.urlParams,[e]:{...t}}};this.setState(r,this.state.useShortUrl?this.createShortUrl:this.setUrl)};return Object(y.jsx)(l.a.Fragment,null,this.props.urlParamExtensions.map((({paramName:t,component:r})=>Object(y.jsx)(g.EuiFormRow,{key:t},Object(y.jsx)(r,{setParamValue:e(t)})))))})),this.shortUrlCache=void 0,this.state={exportUrlAs:w.EXPORT_URL_AS_SNAPSHOT,useShortUrl:!1,usePublicUrl:!1,isCreatingShortUrl:!1,url:"",anonymousAccessParameters:null,showPublicUrlSwitch:!1}}componentWillUnmount(){window.removeEventListener("hashchange",this.resetUrl),this.mounted=!1}componentDidMount(){this.mounted=!0,this.setUrl(),window.addEventListener("hashchange",this.resetUrl,!1),this.props.anonymousAccess&&(async()=>{const{accessURLParameters:e}=await this.props.anonymousAccess.getState();if(!this.mounted)return;if(!e)return;let t=!1;if(this.props.showPublicUrlSwitch){const e=await this.props.anonymousAccess.getCapabilities();if(!this.mounted)return;try{t=this.props.showPublicUrlSwitch(e)}catch{t=!1}}this.setState({anonymousAccessParameters:e,showPublicUrlSwitch:t})})()}render(){const e=this.renderShortUrlSwitch(),t=this.renderPublicUrlSwitch(),r=(!!e||!!t)&&Object(y.jsx)(g.EuiFormRow,{label:Object(y.jsx)(m.FormattedMessage,{id:"share.urlPanel.urlGroupTitle",defaultMessage:"URL"})},Object(y.jsx)(l.a.Fragment,null,Object(y.jsx)(g.EuiSpacer,{size:"s"}),e,t));return Object(y.jsx)(m.I18nProvider,null,Object(y.jsx)(g.EuiForm,{className:"kbnShareContextMenu__finalPanel","data-test-subj":"shareUrlForm"},this.renderExportAsRadioGroup(),this.renderUrlParamExtensions(),r,Object(y.jsx)(g.EuiSpacer,{size:"m"}),Object(y.jsx)(g.EuiCopy,{textToCopy:this.state.url||"",anchorClassName:"eui-displayBlock"},(e=>Object(y.jsx)(g.EuiButton,{fill:!0,fullWidth:!0,onClick:e,disabled:this.state.isCreatingShortUrl||""===this.state.url,"data-share-url":this.state.url,"data-test-subj":"copyShareUrlButton",size:"s"},this.props.isEmbedded?Object(y.jsx)(m.FormattedMessage,{id:"share.urlPanel.copyIframeCodeButtonLabel",defaultMessage:"Copy iFrame code"}):Object(y.jsx)(m.FormattedMessage,{id:"share.urlPanel.copyLinkButtonLabel",defaultMessage:"Copy link"}))))))}}class share_context_menu_ShareContextMenu extends c.Component{constructor(...e){super(...e),a()(this,"getPanels",(()=>{const e=[],t=[],r={id:e.length+1,title:i.i18n.translate("share.contextMenu.permalinkPanelTitle",{defaultMessage:"Permalink"}),content:Object(y.jsx)(url_panel_content_UrlPanelContent,{allowShortUrl:this.props.allowShortUrl,objectId:this.props.objectId,objectType:this.props.objectType,shareableUrl:this.props.shareableUrl,anonymousAccess:this.props.anonymousAccess,showPublicUrlSwitch:this.props.showPublicUrlSwitch,urlService:this.props.urlService})};if(t.push({name:i.i18n.translate("share.contextMenu.permalinksLabel",{defaultMessage:"Permalinks"}),icon:"link",panel:r.id,sortOrder:0}),e.push(r),this.props.allowEmbed){const r={id:e.length+1,title:i.i18n.translate("share.contextMenu.embedCodePanelTitle",{defaultMessage:"Embed Code"}),content:Object(y.jsx)(url_panel_content_UrlPanelContent,{allowShortUrl:this.props.allowShortUrl,isEmbedded:!0,objectId:this.props.objectId,objectType:this.props.objectType,shareableUrl:this.props.shareableUrl,urlParamExtensions:this.props.embedUrlParamExtensions,anonymousAccess:this.props.anonymousAccess,showPublicUrlSwitch:this.props.showPublicUrlSwitch,urlService:this.props.urlService})};e.push(r),t.push({name:i.i18n.translate("share.contextMenu.embedCodeLabel",{defaultMessage:"Embed code"}),icon:"console",panel:r.id,sortOrder:0})}if(this.props.shareMenuItems.forEach((({shareMenuItem:r,panel:s})=>{const n=e.length+1;e.push({...s,id:n}),t.push({...r,panel:n})})),t.length>1){const r={id:e.length+1,title:i.i18n.translate("share.contextMenuTitle",{defaultMessage:"Share this {objectType}",values:{objectType:this.props.objectType}}),items:t.sort(((e,t)=>{const r=e.sortOrder||0,s=t.sortOrder||0;return r>s?1:r<s?-1:e.name.toLowerCase().localeCompare(t.name.toLowerCase())>0?1:-1})).map((e=>(e["data-test-subj"]=`sharePanel-${e.name.replace(" ","")}`,delete e.sortOrder,e)))};e.push(r)}const s=e.length-1,n=e[s].id;return{panels:e,initialPanelId:n}}))}render(){const{panels:e,initialPanelId:t}=this.getPanels();return Object(y.jsx)(m.I18nProvider,null,Object(y.jsx)(g.EuiContextMenu,{initialPanelId:t,panels:e,"data-test-subj":"shareContextMenu"}))}}class share_menu_manager_ShareMenuManager{constructor(){a()(this,"isOpen",!1),a()(this,"container",document.createElement("div")),a()(this,"onClose",(()=>{f.a.unmountComponentAtNode(this.container),this.isOpen=!1}))}start(e,t,r,s){return{toggleShareContextMenu:n=>{const o=r.getShareMenuItems({...n,onClose:this.onClose}),a=null==s?void 0:s();this.toggleShareContextMenu({...n,menuItems:o,urlService:t,anonymousAccess:a,theme:e.theme})}}}toggleShareContextMenu({anchorElement:e,allowEmbed:t,allowShortUrl:r,objectId:s,objectType:n,sharingData:o,menuItems:a,shareableUrl:i,embedUrlParamExtensions:c,theme:l,showPublicUrlSwitch:h,urlService:u,anonymousAccess:p}){if(this.isOpen)return void this.onClose();this.isOpen=!0,document.body.appendChild(this.container);const d=Object(y.jsx)(m.I18nProvider,null,Object(y.jsx)(b.KibanaThemeProvider,{theme$:l.theme$},Object(y.jsx)(g.EuiWrappingPopover,{id:"sharePopover",button:e,isOpen:!0,closePopover:this.onClose,panelPaddingSize:"none",anchorPosition:"downLeft"},Object(y.jsx)(share_context_menu_ShareContextMenu,{allowEmbed:t,allowShortUrl:r,objectId:s,objectType:n,shareMenuItems:a,sharingData:o,shareableUrl:i,onClose:this.onClose,embedUrlParamExtensions:c,anonymousAccess:p,showPublicUrlSwitch:h,urlService:u}))));f.a.render(d,this.container)}}var S=r(8);class locator_Locator{constructor(e,t){a()(this,"id",void 0),a()(this,"migrations",void 0),a()(this,"telemetry",((e,t)=>this.definition.telemetry?this.definition.telemetry(e,t):t)),a()(this,"inject",((e,t)=>this.definition.inject?this.definition.inject(e,t):e)),a()(this,"extract",(e=>this.definition.extract?this.definition.extract(e):{state:e,references:[]})),a()(this,"useUrl",((e,t,r=[])=>p(this,e,t,r))),this.definition=e,this.deps=t,this.id=e.id,this.migrations=e.migrations||{}}async getLocation(e){return await this.definition.getLocation(e)}async getUrl(e,{absolute:t=!1}={}){const r=await this.getLocation(e);return this.deps.getUrl(r,{absolute:t})}getRedirectUrl(e,t={}){var r;const{baseUrl:s="",version:n="0.0.0"}=this.deps;return s+"/app/r?"+function(e,{lzCompress:t}={}){const r=new URLSearchParams;r.set("l",e.id),r.set("v",e.version);const s=JSON.stringify(e.params);if(t){const e=Object(S.compressToBase64)(s);r.set("lz",e)}else r.set("p",JSON.stringify(e.params));return r}({id:this.definition.id,version:n,params:e},{...t,lzCompress:null===(r=t.lzCompress)||void 0===r||r}).toString()}async navigate(e,{replace:t=!1}={}){const r=await this.getLocation(e);await this.deps.navigate(r,{replace:t})}navigateSync(e,t={}){this.navigate(e,t).catch((r=>{console.log(`Failed to navigate [locator = ${this.id}].`,e,t),console.error(r)}))}}class locator_client_LocatorClient{constructor(e){a()(this,"locators",new Map),a()(this,"getAllMigrations",(()=>{const e=this.migrations(),t={},r=new Set;for(const t of Object.values(e))for(const e of Object.keys(t))r.add(e);for(const s of r.values()){const r=t=>{const r=e[t.id];if(!r)return t;const n=r[s];return n?{...t,version:s,state:n(t.state)}:t};t[s]=r}return t})),this.deps=e}create(e){const t=new locator_Locator(e,this.deps);return this.locators.set(e.id,t),t}get(e){return this.locators.get(e)}getOrThrow(e){const t=this.locators.get(e);if(!t)throw new Error(`Locator [ID = "${e}"] is not registered.`);return t}migrations(){const e={};for(const t of this.locators.values())e[t.id]="function"==typeof t.migrations?t.migrations():t.migrations;return e}telemetry(e,t){for(const r of this.locators.values())t=r.telemetry(e.state,t);return t}inject(e,t){const r=this.getOrThrow(e.id),s=t.filter((e=>e.name.startsWith("params:"))).map((e=>({...e,name:e.name.substr("params:".length)})));return{...e,state:r.inject(e.state,s)}}extract(e){const t=this.getOrThrow(e.id).extract(e.state);return{state:{...e,state:t.state},references:t.references.map((e=>({...e,name:"params:"+e.name})))}}}class url_service_UrlService{constructor(e){a()(this,"locators",void 0),a()(this,"shortUrls",void 0),this.deps=e,this.locators=new locator_client_LocatorClient(e),this.shortUrls=e.shortUrls({locators:this.locators})}}var U=r(14),j=r(15);const _=/^\/app\/[^/]+.+$/;const x="LEGACY_SHORT_URL_LOCATOR";class legacy_short_url_locator_LegacyShortUrlLocatorDefinition{constructor(){a()(this,"id",x)}async getLocation(e){const{url:t}=e;!function(e){if(!_.test(e)||e.includes("/../"))throw new Error(`Invalid short URL: ${e}`)}(t);const r=t.match(/^.*\/app\/([^\/#]+)(.+)$/);if(!r)throw new Error("Unexpected URL path.");const[,s,n]=r;if(!s||!n)throw new Error("Could not parse URL path.");return{app:s,path:n,state:{}}}}class redirect_manager_RedirectManager{constructor(e){a()(this,"error$",new U.BehaviorSubject(null)),this.deps=e}registerLocatorRedirectApp(e){e.application.register({id:"r",title:"Redirect endpoint",chromeless:!0,mount:async t=>{const{render:s}=await r.e(1).then(r.bind(null,43)),n=s(t.element,{manager:this,theme:e.theme});return this.onMount(t.history.location),()=>{n()}}})}registerLegacyShortUrlRedirectApp(e){e.application.register({id:"short_url_redirect",appRoute:"/goto",title:"Short URL Redirect",chromeless:!0,mount:async()=>{var t;const s=null===(t=location.pathname.match(new RegExp("/goto/(.*)$")))||void 0===t?void 0:t[1];if(!s)throw new Error("Url id not present in path");const n=this.deps.url,o=n.shortUrls.get(null),a=await o.get(s),i=a.data.locator.id,c=n.locators.get(i);if(!c)throw new Error(`Locator [id = ${i}] not found.`);const l=a.data.locator.state;if(a.data.locator.id!==x)return await c.navigate(l,{replace:!0}),()=>{};let h=l.url;if(e.uiSettings.get("state:storeInSessionStorage")){const{hashUrl:e}=await Promise.resolve().then(r.t.bind(null,40,7));h=e(h)}const u=e.http.basePath.prepend(h);return location.href=u,()=>{}}})}onMount(e){const t=e.pathname;if(t.startsWith("/s/"))return void this.navigateToShortUrlBySlug(t.substring("/s/".length));const r=e.search,s=this.parseSearchParams(r);this.navigate(s)}navigateToShortUrlBySlug(e){(async()=>{const t=this.deps.url,r=t.shortUrls.get(null),s=await r.resolve(e),n=s.data.locator.id,o=t.locators.get(n);if(!o)throw new Error(`Locator "${n}" not found.`);const a=s.data.locator.state;await o.navigate(a,{replace:!0})})().catch((e=>{this.error$.next(e),console.error(e)}))}navigate(e){const t=this.deps.url.locators.get(e.id);if(!t){const t=i.i18n.translate("share.urlService.redirect.RedirectManager.locatorNotFound",{defaultMessage:"Locator [ID = {id}] does not exist.",values:{id:e.id},description:"Error displayed to user in redirect endpoint when redirection cannot be performed successfully, because locator does not exist."}),r=new Error(t);throw this.error$.next(r),r}const r="function"==typeof t.migrations?t.migrations():t.migrations,s=Object(j.migrateToLatest)(r,{state:e.params,version:e.version});t.navigate(s,{replace:!0}).then().catch((e=>{console.log("Redirect endpoint failed to execute locator redirect."),console.error(e)}))}parseSearchParams(e){try{return function(e){const t=new URLSearchParams(e),r=t.get("l"),s=t.get("v"),n=t.get("lz"),o=n?Object(S.decompressFromBase64)(n):t.get("p");if(!r){const e=i.i18n.translate("share.urlService.redirect.RedirectManager.missingParamLocator",{defaultMessage:'Locator ID not specified. Specify "l" search parameter in the URL, which should be an existing locator ID.',description:"Error displayed to user in redirect endpoint when redirection cannot be performed successfully, because of missing locator ID."});throw new Error(e)}if(!s){const e=i.i18n.translate("share.urlService.redirect.RedirectManager.missingParamVersion",{defaultMessage:'Locator params version not specified. Specify "v" search parameter in the URL, which should be the release version of Kibana when locator params were generated.',description:"Error displayed to user in redirect endpoint when redirection cannot be performed successfully, because of missing version parameter."});throw new Error(e)}if(!o){const e=i.i18n.translate("share.urlService.redirect.RedirectManager.missingParamParams",{defaultMessage:'Locator params not specified. Specify "p" search parameter in the URL, which should be JSON serialized object of locator params.',description:"Error displayed to user in redirect endpoint when redirection cannot be performed successfully, because of missing params parameter."});throw new Error(e)}let a;try{a=JSON.parse(o)}catch{const e=i.i18n.translate("share.urlService.redirect.RedirectManager.invalidParamParams",{defaultMessage:'Could not parse locator params. Locator params must be serialized as JSON and set at "p" URL search parameter.',description:"Error displayed to user in redirect endpoint when redirection cannot be performed successfully, because locator parameters could not be parsed as JSON."});throw new Error(e)}return{id:r,version:s,params:a}}(e)}catch(e){throw this.error$.next(e),e}}}const O="SHORT_URL_REDIRECT_LOCATOR";class short_url_redirect_locator_ShortUrlRedirectLocatorDefinition{constructor(){a()(this,"id",O)}async getLocation(e){const{slug:t}=e;return{app:"r",path:"s/"+t,state:{}}}}class short_url_client_BrowserShortUrlClient{constructor(e){this.dependencies=e}async create({locator:e,params:t,slug:r,humanReadableSlug:s=!1}){const{http:n}=this.dependencies;return{data:await n.fetch("/api/short_url",{method:"POST",body:JSON.stringify({locatorId:e.id,slug:r,humanReadableSlug:s,params:t})})}}async createWithLocator(e){const t=await this.create(e),r=this.dependencies.locators.get(O),s={slug:t.data.slug};return{...t,locator:r,params:s}}async createFromLongUrl(e){const t=Object(v.parse)(e);if(!t||!t.path)throw new Error(`Invalid URL: ${e}`);const r=t.path.replace(this.dependencies.http.basePath.get(),"")+(t.hash?t.hash:""),s=this.dependencies.locators.get(x);if(!s)throw new Error('Locator "LEGACY_SHORT_URL_LOCATOR" not found');const n=await this.createWithLocator({locator:s,humanReadableSlug:!0,params:{url:r}}),o=await n.locator.getUrl(n.params,{absolute:!0});return{...n,url:o}}async get(e){const{http:t}=this.dependencies;return{data:await t.fetch("/api/short_url/"+e,{method:"GET"})}}async resolve(e){const{http:t}=this.dependencies;return{data:await t.fetch("/api/short_url/_slug/"+e,{method:"GET"})}}async delete(e){const{http:t}=this.dependencies;await t.fetch("/api/short_url/"+e,{method:"DELETE"})}}class short_url_client_factory_BrowserShortUrlClientFactory{constructor(e){this.dependencies=e}get(e){return new short_url_client_BrowserShortUrlClient(this.dependencies)}}class plugin_SharePlugin{constructor(e){a()(this,"shareMenuRegistry",new share_menu_registry_ShareMenuRegistry),a()(this,"shareContextMenu",new share_menu_manager_ShareMenuManager),a()(this,"urlGeneratorsService",new url_generator_service_UrlGeneratorsService),a()(this,"redirectManager",void 0),a()(this,"url",void 0),a()(this,"anonymousAccessServiceProvider",void 0),this.initializerContext=e}setup(e){const{http:t}=e,{basePath:r}=t;return this.url=new url_service_UrlService({baseUrl:r.get(),version:this.initializerContext.env.packageInfo.version,navigate:async({app:t,path:r,state:s},{replace:n=!1}={})=>{const[o]=await e.getStartServices();await o.application.navigateToApp(t,{path:r,state:s,replace:n})},getUrl:async({app:t,path:r},{absolute:s})=>(await e.getStartServices())[0].application.getUrlForApp(t,{path:r,absolute:s}),shortUrls:({locators:e})=>new short_url_client_factory_BrowserShortUrlClientFactory({http:t,locators:e})}),this.url.locators.create(new legacy_short_url_locator_LegacyShortUrlLocatorDefinition),this.url.locators.create(new short_url_redirect_locator_ShortUrlRedirectLocatorDefinition),this.redirectManager=new redirect_manager_RedirectManager({url:this.url}),this.redirectManager.registerLocatorRedirectApp(e),this.redirectManager.registerLegacyShortUrlRedirectApp(e),{...this.shareMenuRegistry.setup(),urlGenerators:this.urlGeneratorsService.setup(e),url:this.url,navigate:e=>this.redirectManager.navigate(e),setAnonymousAccessServiceProvider:e=>{if(this.anonymousAccessServiceProvider)throw new Error("Anonymous Access service provider is already set.");this.anonymousAccessServiceProvider=e}}}start(e){return{...this.shareContextMenu.start(e,this.url,this.shareMenuRegistry.start(),this.anonymousAccessServiceProvider),urlGenerators:this.urlGeneratorsService.start(e),url:this.url,navigate:e=>this.redirectManager.navigate(e)}}}var E=r(16),P=r(17),C=r.n(P);function M(e,t){return A({[e]:t})}async function A(e){const t=Object.keys(e).map(((t,r)=>{const s=e[t],n=s instanceof Blob?s:new Blob([s.content],{type:s.type});return()=>Promise.resolve().then((()=>Object(E.saveAs)(n,t)))}));await C()(t,(e=>{return Promise.all([e(),(t=50,new Promise((e=>setTimeout(e,t))))]);var t}),{concurrency:1})}function R(e){return new plugin_SharePlugin(e)}},function(e,t){e.exports=__kbnSharedDeps__.TsLib},function(e,t,r){r.r(t);var s=__kbnBundles__.get("plugin/kibanaUtils/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(s))}]);