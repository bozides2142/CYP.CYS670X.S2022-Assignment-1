(window.visTypeTimeseries_bundle_jsonpfunction=window.visTypeTimeseries_bundle_jsonpfunction||[]).push([[10],{191:function(e,t,i){"use strict";i.r(t),i.d(t,"default",(function(){return O}));var s=i(4),r=i(76),a=i(53),n=i(48),l=i(54),o=i(9),c=i.n(o),d=i(15),b=i(64),u=i.n(b),m=i(44),h=i(65),p=i(1);class metric_Metric extends s.Component{constructor(e){super(e),this.state={scale:1,left:0,top:0,translateX:1,translateY:1},this.handleResize=this.handleResize.bind(this),this.checkResizeThrottled=c.a.throttle((()=>{const e=Object(h.a)(this.inner,this.resize,this.state);e&&this.state&&!c.a.isEqual(e,this.state)&&this.handleResize()}),200)}componentWillUnmount(){clearTimeout(this.timeout)}componentDidMount(){this.handleResize()}handleResize(){const e=Object(h.a)(this.inner,this.resize,this.state);this.setState(e)}render(){const{metric:e,secondary:t}=this.props,{scale:i,translateX:s,translateY:r}=this.state,a=(e&&(e.tickFormatter||e.formatter)||(e=>e))(Object(m.b)(null==e?void 0:e.data)),n=u()({default:{container:{},inner:{top:this.state.top||0,left:this.state.left||0,transform:`matrix(${i}, 0, 0, ${i}, ${s}, ${r})`},primary_value:{},secondary_value:{}},reversed:{primary_value:{},secondary_value:{}}},this.props);let l,o,c;if(this.props.backgroundColor&&(n.container.backgroundColor=this.props.backgroundColor),e&&e.color&&(n.primary_value.color=e.color),e&&e.label&&(l=Object(p.jsx)("div",{className:"tvbVisMetric__label--primary"},e.label)),t){const e=(t.formatter||(e=>e))(Object(m.b)(t.data));let i;t.color&&(n.secondary_value.color=t.color),t.label&&(i=Object(p.jsx)("div",{className:"tvbVisMetric__label--secondary"},t.label)),o=Object(p.jsx)("div",{className:"tvbVisMetric__secondary"},i,Object(p.jsx)("div",{style:n.secondary_value,className:"tvbVisMetric__value--secondary"},Object(p.jsx)("span",{dangerouslySetInnerHTML:{__html:e}})))}this.props.additionalLabel&&(c=Object(p.jsx)("div",{className:"tvbVisMetric__label--additional"},this.props.additionalLabel));let b="tvbVisMetric";return n.container.backgroundColor||(b+=" tvbVisMetric--noBackground"),this.props.reversed&&(b+=" tvbVisMetric--reversed"),Object(p.jsx)(d.EuiResizeObserver,{onResize:this.checkResizeThrottled},(e=>Object(p.jsx)("div",{className:b,ref:e,style:n.container},Object(p.jsx)("div",{ref:e=>this.resize=e,className:"tvbVisMetric__resize"},Object(p.jsx)("div",{ref:e=>this.inner=e,className:"tvbVisMetric__inner",style:n.inner},Object(p.jsx)("div",{className:"tvbVisMetric__primary"},l,Object(p.jsx)("div",{style:n.primary_value,"data-test-subj":"tsvbMetricValue",className:"tvbVisMetric__value--primary"},Object(p.jsx)("span",{dangerouslySetInnerHTML:{__html:a}}))),o,c)))))}}var j=i(2),v=i(63),f=i(60);const O=Object(r.a)((function(e){const{backgroundColor:t,model:i,visData:s,fieldFormatMap:r,getConfig:c}=e,d=function(e){const{model:t,visData:i}=e,s=Object(o.get)(i,`${t.id}.series`,[]).filter((e=>!Object(o.isUndefined)(e)));let r,a;return t.background_color_rules&&t.background_color_rules.forEach((e=>{if(e.operator){var t;const i=Object(m.b)(null===(t=s[0])||void 0===t?void 0:t.data);Object(f.c)(e,i)&&Object(f.b)(e.operator)(i,e.value)&&(a=e.background_color,r=e.color)}})),{color:r,background:a}}(e),b=Object(o.get)(s,`${i.id}.series`,[]).filter((e=>e)).map(((e,t)=>{const s=i.series.find((t=>Object(o.includes)(e.id,t.id))),b={};return s&&(b.formatter=s.formatter===j.b.DEFAULT?Object(l.a)(Object(a.a)(s.metrics),r,"html",d.color):Object(n.a)(s.formatter,s.value_template,c)),0===t&&d.color&&(b.color=d.color),Object(o.assign)({},Object(o.pick)(e,["label","data"]),b)})),u=d.background||t,h={backgroundColor:u},O={metric:b[0],additionalLabel:e.additionalLabel,reversed:Object(v.b)(u)};return b[1]&&(O.secondary=b[1]),Object(p.jsx)("div",{className:"tvbVis",style:h},Object(p.jsx)(metric_Metric,O))}))},49:function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));const s=["#68BC00","#009CE0","#B0BC00","#16A5A5","#D33115","#E27300","#FCC400","#7B64FF","#FA28FF","#333333","#808080","#194D33","#0062B1","#808900","#0C797D","#9F0500","#C45100","#FB9E00","#653294","#AB149E","#0F1419","#666666"]},50:function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));var s=i(51),r=i.n(s);const a=e=>{let t=new r.a(e);const i=t.hsl().object();return i.l-=100*t.luminosity(),t=r.a.hsl(i),t.rgb().toString()}},62:function(e,t,i){"use strict";i.d(t,"a",(function(){return l}));var s=i(2),r=i(50),a=i(49),n=i(41);const l=({seriesById:e,seriesName:t,seriesId:i,baseColor:l,seriesPalette:o,palettesRegistry:c,syncColors:d})=>{if(!o)return null;const b=o.name===s.d.RAINBOW||o.name===s.d.GRADIENT?"custom":o.name,u=o.name===s.d.GRADIENT?{...o.params,colors:[l,Object(r.a)(l)],gradient:!0}:o.name===s.d.RAINBOW?{...o.params,colors:a.a}:o.params;return null==c?void 0:c.get(b||"default").getCategoricalColor([{name:Object(n.b)(t),rankAtDepth:e.findIndex((({id:e})=>e===i)),totalSeriesAtDepth:e.length}],{maxDepth:1,totalSeries:e.length,behindText:!1,syncColors:d},u)}},65:function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));var s=i(5);function r(e,t){return[Math.floor(e.clientWidth*t),Math.floor(e.clientHeight*t)]}function a(e,t,i){const a=Object(s.findDOMNode)(e),n=Object(s.findDOMNode)(t);let l=i.scale;l=n.clientWidth-n.clientHeight<0?n.clientWidth/a.clientWidth:n.clientHeight/a.clientHeight;let[o,c]=r(a,l);o>n.clientWidth&&(l=n.clientWidth/a.clientWidth),c>n.clientHeight&&(l=n.clientHeight/a.clientHeight),[o,c]=r(a,l);const d=(o-a.clientWidth)/2,b=(c-a.clientHeight)/2;return{scale:l,top:Math.floor((n.clientHeight-c)/2),left:Math.floor((n.clientWidth-o)/2),translateY:b,translateX:d}}},76:function(e,t,i){"use strict";i.d(t,"a",(function(){return u}));var s=i(4),r=i(31),a=i.n(r);var n=i(56),l=i(9),o=i(41),c=i(62),d=i(8),b=i(1);function u(e){function t(t){const{model:i,visData:r,syncColors:u,palettesService:m,fieldFormatMap:h}=t,p=Object(s.useCallback)(((e,t,s)=>{const a={...i.series[0].palette,name:"kibana"===i.series[0].split_color_mode?"kibana_palette":i.series[0].split_color_mode||i.series[0].palette.name},n={seriesById:r[i.id].series,seriesName:e,seriesId:t,baseColor:s,seriesPalette:a,palettesRegistry:m,syncColors:u,fieldFormatMap:h};return Object(c.a)(n)||null}),[h,i.id,i.series,m,u,r]);if(!i||!r||!r[i.id])return Object(b.jsx)(e,t);if(r[i.id].series.every((e=>1===e.id.split(d.c).length)))return Object(b.jsx)(e,t);const j=r[i.id].series.reduce(((e,t)=>{const[s,r]=t.id.split(d.c),a=i.series.find((e=>e.id===s));if(!a)return e;const n=t.splitByLabel;e[r]||(e[r]={series:[],label:t.label.toString(),labelFormatted:t.labelFormatted});const l=/{{\s*key\s*}}/.test(a.label),o=t.color||a.color,c="terms"===i.series[0].split_mode?p(n,t.id,o):o;return e[r].series.push({...t,id:s,color:c,label:a.label&&!l?a.label:n}),e}),{}),v=Object(l.first)(r[i.id].series.filter((e=>{const t=i.series.find((t=>t.id===e.id));return!!t&&["everything","filter"].includes(t.split_mode)}))),f=v?Object(l.findIndex)(i.series,(e=>e.id===v.id)):null,O=Object.keys(j).map((s=>{const r=j[s],{series:a,label:l,labelFormatted:c}=r;let d=l;c&&(d=Object(n.a)(c));const u=null!=f&&f>0?[...a,v]:[v,...a],m={[i.id]:{id:i.id,series:u||a}};return Object(b.jsx)("div",{key:s,className:"tvbSplitVis__split"},Object(b.jsx)(e,{model:i,visData:m,onBrush:t.onBrush,onFilterClick:t.onFilterClick,additionalLabel:Object(o.b)(d),backgroundColor:t.backgroundColor,getConfig:t.getConfig,fieldFormatMap:t.fieldFormatMap}))})),_=1===r[i.id].series.length;return Object(b.jsx)("div",{className:a()("tvbSplitVis",{"tvbSplitVis--one":_})},O)}var i;return t.displayName=`SplitVisComponent(${i=e,i.displayName||i.name||"Component"})`,t}}}]);