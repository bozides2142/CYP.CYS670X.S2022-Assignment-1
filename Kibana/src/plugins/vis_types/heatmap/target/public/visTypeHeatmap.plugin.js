!function(e){function t(t){for(var r,a,i=t[0],s=t[1],o=0,p=[];o<i.length;o++)a=i[o],Object.prototype.hasOwnProperty.call(n,a)&&n[a]&&p.push(n[a][0]),n[a]=0;for(r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r]);for(l&&l(t);p.length;)p.shift()()}var r={},n={0:0};function a(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.e=function(e){var t=[],r=n[e];if(0!==r)if(r)t.push(r[2]);else{var i=new Promise((function(t,a){r=n[e]=[t,a]}));t.push(r[2]=i);var s,o=document.createElement("script");o.charset="utf-8",o.timeout=120,a.nc&&o.setAttribute("nonce",a.nc),o.src=function(e){return a.p+"visTypeHeatmap.chunk."+e+".js"}(e);var l=new Error;s=function(t){o.onerror=o.onload=null,clearTimeout(p);var r=n[e];if(0!==r){if(r){var a=t&&("load"===t.type?"missing":t.type),i=t&&t.target&&t.target.src;l.message="Loading chunk "+e+" failed.\n("+a+": "+i+")",l.name="ChunkLoadError",l.type=a,l.request=i,r[1](l)}n[e]=void 0}};var p=setTimeout((function(){s({type:"timeout",target:o})}),12e4);o.onerror=o.onload=s,document.head.appendChild(o)}return Promise.all(t)},a.m=e,a.c=r,a.d=function(e,t,r){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(a.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)a.d(r,n,function(t){return e[t]}.bind(null,n));return r},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="",a.oe=function(e){throw console.error(e),e};var i=window.visTypeHeatmap_bundle_jsonpfunction=window.visTypeHeatmap_bundle_jsonpfunction||[],s=i.push.bind(i);i.push=t,i=i.slice();for(var o=0;o<i.length;o++)t(i[o]);var l=s;a(a.s=13)}([function(e,t,r){r.r(t);var n=__kbnBundles__.get("plugin/expressions/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(n))},function(e,t){e.exports=__kbnSharedDeps__.KbnI18n},function(e,t){e.exports=__kbnSharedDeps__.EmotionReact},function(e,t,r){r.r(t);var n=__kbnBundles__.get("plugin/data/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(n))},function(e,t){e.exports=__kbnSharedDeps__.React},function(e,t,r){r.r(t);var n=__kbnBundles__.get("plugin/visualizations/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(n))},function(e,t,r){"use strict";r.r(t),r.d(t,"LEGACY_HEATMAP_CHARTS_LIBRARY",(function(){return n}));const n="visualization:visualize:legacyHeatmapChartsLibrary"},function(e,t,r){"use strict";let n,a,i;r.d(t,"b",(function(){return n})),r.d(t,"a",(function(){return a})),function(e){e.Linear="linear",e.Log="log",e.SquareRoot="square root"}(n||(n={})),function(e){e.Category="category",e.Value="value"}(a||(a={})),function(e){e.Normal="normal",e.Percentage="percentage",e.Wiggle="wiggle",e.Silhouette="silhouette"}(i||(i={}))},function(e,t){e.exports=__kbnSharedDeps__.KbnI18nReact},function(e,t){e.exports=__kbnSharedDeps__.ElasticCharts},function(e,t,r){r.r(t);var n=__kbnBundles__.get("plugin/charts/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(n))},function(e,t,r){e.exports=r(15)(3)},function(e,t,r){r.r(t);var n=__kbnBundles__.get("plugin/charts/common");Object.defineProperties(t,Object.getOwnPropertyDescriptors(n))},function(e,t,r){r(14),__kbnBundles__.define("plugin/visTypeHeatmap/public",r,16),__kbnBundles__.define("plugin/visTypeHeatmap/common/index",r,6)},function(e,t,r){r.p=window.__kbnPublicPath__.visTypeHeatmap},function(e,t){e.exports=__kbnSharedDeps_npm__},function(e,t,r){"use strict";r.r(t),r.d(t,"heatmapVisType",(function(){return E})),r.d(t,"plugin",(function(){return w}));var n=r(6),a=r(4),i=r(1),s=r(9),o=r(3),l=r(10),p=r(5),c=r(7),u=r(0),g=r(12);const d=(e,t,r,n=!1)=>{const a=n?1-e/t:e/t;return Object(g.getHeatmapColors)(a,r)};function m(e){return Object(u.buildExpressionFunction)("esaggs",{index:Object(u.buildExpression)([Object(u.buildExpressionFunction)("indexPatternLoad",{id:e.data.indexPattern.id})]),metricsAtAllLevels:e.isHierarchical(),partialRows:!1,aggs:e.data.aggs.aggs.map((e=>Object(u.buildExpression)(e.toExpressionAst())))})}const f=e=>{var t,r;const n=Object(u.buildExpressionFunction)("heatmap_legend",{isVisible:e.addLegend,position:e.legendPosition,shouldTruncate:null===(t=e.truncateLegend)||void 0===t||t,maxLines:null!==(r=e.maxLegendLines)&&void 0!==r?r:1});return Object(u.buildExpression)([n])},_=e=>{const t=Object(u.buildExpressionFunction)("visdimension",{accessor:e.accessor});return e.format&&(t.addArgument("format",e.format.id),t.addArgument("formatParams",JSON.stringify(e.format.params))),Object(u.buildExpression)([t])},b=e=>{var t,r;const n=Object(u.buildExpressionFunction)("heatmap_grid",{isCellLabelVisible:null!==(t=null===(r=e.valueAxes)||void 0===r?void 0:r[0].labels.show)&&void 0!==t&&t,isXAxisLabelVisible:!0,isYAxisTitleVisible:!0,isXAxisTitleVisible:!0});return Object(u.buildExpression)([n])},h=async(e,t)=>{var r;const n=Object(p.getVisSchemas)(e,t);!0===e.params.percentageMode&&n.metric.forEach((t=>{var r;t.format={id:"percent",params:{pattern:null!==(r=e.params.percentageFormatPattern)&&void 0!==r?r:`0,0.[${"0".repeat(2)}]%`}}}));const a={showTooltip:e.params.addTooltip,highlightInHover:e.params.enableHover,lastRangeIsRightOpen:null!==(r=e.params.lastRangeIsRightOpen)&&void 0!==r&&r,percentageMode:e.params.percentageMode,legend:f(e.params),gridConfig:b(e.params)},i=Object(u.buildExpressionFunction)("heatmap",a);let s;if(n.metric.length&&i.addArgument("valueAccessor",_(n.metric[0])),n.segment&&n.segment.length&&i.addArgument("xAccessor",_(n.segment[0])),n.group&&n.group.length&&i.addArgument("yAccessor",_(n.group[0])),n.split_row&&n.split_row.length&&i.addArgument("splitRowAccessor",_(n.split_row[0])),n.split_column&&n.split_column.length&&i.addArgument("splitColumnAccessor",_(n.split_column[0])),e.params.setColorRange&&e.params.colorsRange&&e.params.colorsRange.length){var o;const t=((e,t,r=!1)=>e.reduce(((e,n,a,i)=>(a&&n.from!==i[a-1].to&&(e.color.push("rgba(0, 0, 0, 0)"),e.stop.push(n.from)),e.color.push(d(a,i.length,t,r)),e.stop.push(n.to),e)),{color:[],stop:[]}))(e.params.colorsRange,e.params.colorSchema,e.params.invertColors);s=Object(u.buildExpressionFunction)("palette",{...t,range:"number",continuity:"none",rangeMin:e.params.setColorRange&&e.params.colorsRange&&e.params.colorsRange.length?e.params.colorsRange[0].from:void 0,rangeMax:e.params.setColorRange&&e.params.colorsRange&&e.params.colorsRange.length?e.params.colorsRange[(null===(o=e.params)||void 0===o?void 0:o.colorsRange.length)-1].to:void 0})}else{const t=((e,t,r=!1)=>{const n=[],a=[];if(!e)return{color:[]};const i=100/e;for(let s=0;s<e;s++)n.push(d(s,e,t,r)),a.push(i+s*i);return{color:null!=n?n:[],stop:null!=a?a:[]}})(e.params.colorsNumber,e.params.colorSchema,e.params.invertColors);s=Object(u.buildExpressionFunction)("palette",{...t,range:"percent",continuity:"none",rangeMin:0,rangeMax:100})}i.addArgument("palette",Object(u.buildExpression)([s]));return Object(u.buildExpression)([m(e),i]).toAst()};var v=r(11),y=r.n(v),x=r(2);const O=Object(a.lazy)((()=>r.e(1).then(r.bind(null,19)))),j=({showElasticChartsOptions:e,palettes:t,trackUiMetric:r})=>n=>Object(x.jsx)(O,y()({},n,{palettes:t,showElasticChartsOptions:e,trackUiMetric:r}));var T=r(8);function A(){return Object(x.jsx)(T.FormattedMessage,{id:"visTypeHeatmap.splitTitle.tooltip",defaultMessage:"Split chart aggregation is not yet supported with the new charts library. Please enable the heatmap legacy charts library advanced setting to use split chart aggregation."})}const E=e=>(({showElasticChartsOptions:e=!1,palettes:t,trackUiMetric:r})=>({name:"heatmap",title:i.i18n.translate("visTypeHeatmap.heatmap.heatmapTitle",{defaultMessage:"Heat map"}),icon:"heatmap",description:i.i18n.translate("visTypeHeatmap.heatmap.heatmapDescription",{defaultMessage:"Shade data in cells in a matrix."}),toExpressionAst:h,getSupportedTriggers:()=>[p.VIS_EVENT_TO_TRIGGER.filter],visConfig:{defaults:{type:"heatmap",addTooltip:!0,addLegend:!0,enableHover:!1,legendPosition:s.Position.Right,colorsNumber:4,colorSchema:l.ColorSchemas.GreenToRed,setColorRange:!1,colorsRange:[],invertColors:!1,percentageMode:!1,valueAxes:[{show:!1,id:"ValueAxis-1",type:c.a.Value,scale:{type:c.b.Linear,defaultYExtents:!1},labels:{show:!1,rotate:0,overwriteColor:!1,color:"black"}}]}},editorConfig:{optionsTemplate:j({showElasticChartsOptions:e,palettes:t,trackUiMetric:r}),schemas:[{group:o.AggGroupNames.Metrics,name:"metric",title:i.i18n.translate("visTypeHeatmap.heatmap.metricTitle",{defaultMessage:"Value"}),min:1,max:1,aggFilter:["count","avg","median","sum","min","max","cardinality","std_dev","top_hits","!filtered_metric","!single_percentile"],defaults:[{schema:"metric",type:"count"}]},{group:o.AggGroupNames.Buckets,name:"segment",title:i.i18n.translate("visTypeHeatmap.heatmap.segmentTitle",{defaultMessage:"X-axis"}),min:0,max:1,aggFilter:["!geohash_grid","!geotile_grid","!filter","!sampler","!diversified_sampler","!rare_terms","!multi_terms","!significant_text"]},{group:o.AggGroupNames.Buckets,name:"group",title:i.i18n.translate("visTypeHeatmap.heatmap.groupTitle",{defaultMessage:"Y-axis"}),min:0,max:1,aggFilter:["!geohash_grid","!geotile_grid","!filter","!sampler","!diversified_sampler","!rare_terms","!multi_terms","!significant_text"]},{group:o.AggGroupNames.Buckets,name:"split",...e&&{disabled:!0,tooltip:Object(x.jsx)(A,null)},title:i.i18n.translate("visTypeHeatmap.heatmap.splitTitle",{defaultMessage:"Split chart"}),min:0,max:1,aggFilter:["!geohash_grid","!geotile_grid","!filter","!sampler","!diversified_sampler","!rare_terms","!multi_terms","!significant_text"]}]},requiresSearch:!0}))(e);class plugin_VisTypeHeatmapPlugin{setup(e,{visualizations:t,charts:r,usageCollection:a}){if(!e.uiSettings.get(n.LEGACY_HEATMAP_CHARTS_LIBRARY)){const e=null==a?void 0:a.reportUiCounter.bind(a,"vis_type_heatmap");t.createBaseVisualization(E({showElasticChartsOptions:!0,palettes:r.palettes,trackUiMetric:e}))}return{}}start(){}}const w=()=>new plugin_VisTypeHeatmapPlugin},function(e,t){e.exports=__kbnSharedDeps__.ElasticEui},function(e,t,r){r.r(t);var n=__kbnBundles__.get("plugin/visDefaultEditor/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(n))}]);