(window.visTypeVega_bundle_jsonpfunction=window.visTypeVega_bundle_jsonpfunction||[]).push([[1],{234:function(e,t,n){"use strict";n.r(t),n.d(t,"createVegaRequestHandler",(function(){return l})),n.d(t,"VegaVisComponent",(function(){return m}));var r=n(86),i=n(18),a=n(7),o=n(4);class search_api_SearchAPI{constructor(e,t,n,r,i){this.dependencies=e,this.abortSignal=t,this.inspectorAdapters=n,this.searchSessionId=r,this.executionContext=i}search(e){const{search:t,indexPatterns:n}=this.dependencies,r={};return Object(a.combineLatest)(e.map((e=>{const s=e.name,u=Object(i.getSearchParamsFromRequest)(e,{getConfig:this.dependencies.uiSettings.get.bind(this.dependencies.uiSettings)});return Object(a.from)((async(e,t,n)=>{if(n){var r;let i=null===(r=t.body)||void 0===r?void 0:r.runtime_mappings;if(!i){const t=(await e.find(n)).find((e=>e.title===n));i=null==t?void 0:t.getComputedFields().runtimeFields}return{...t,body:{...t.body,runtime_mappings:i}}}return t})(n,u,e.index)).pipe(Object(o.tap)((t=>{this.inspectorAdapters&&(r[s]=this.inspectorAdapters.requests.start(s,{...e,searchSessionId:this.searchSessionId}),r[s].json(t.body))})),Object(o.switchMap)((e=>t.search({params:e},{abortSignal:this.abortSignal,sessionId:this.searchSessionId,executionContext:this.executionContext}).pipe(Object(o.tap)((e=>this.inspectSearchResult(e,r[s])),(e=>this.inspectSearchResult({rawResponse:null==e?void 0:e.err},r[s]))),Object(o.map)((e=>({name:s,rawResponse:e.rawResponse})))))))})))}resetSearchStats(){this.inspectorAdapters&&this.inspectorAdapters.requests.reset()}inspectSearchResult(e,t){t&&t.stats(i.search.getResponseInspectorStats(e.rawResponse)).ok({json:e.rawResponse})}}var s=n(9),u=n.n(s);class time_cache_TimeCache{constructor(e,t){u()(this,"_timefilter",void 0),u()(this,"_maxAge",void 0),u()(this,"_cachedBounds",void 0),u()(this,"_cacheTS",void 0),u()(this,"_timeRange",void 0),this._timefilter=e,this._maxAge=t,this._cacheTS=0}_now(){return Date.now()}getTimeBounds(){const e=this._now();let t=null;if(this._cachedBounds){const n=e-this._cacheTS;if(n<40)return this._cachedBounds;if(n<this._maxAge&&(t=this._getBounds(),Math.abs(t.min-this._cachedBounds.min)<this._maxAge&&Math.abs(t.max-this._cachedBounds.max)<this._maxAge))return this._cachedBounds}return this._cacheTS=e,this._cachedBounds=t||this._getBounds(),this._cachedBounds}setTimeRange(e){this._timeRange=e}_getBounds(){const e=this._timefilter.calculateBounds(this._timeRange);return{min:e.min.valueOf(),max:e.max.valueOf()}}}var c=n(2);function l({plugins:{data:e},core:{uiSettings:t},getServiceSettings:a},o={}){let s;const{timefilter:u}=e.query.timefilter,l=new time_cache_TimeCache(u,3e3);return async function({timeRange:e,filters:u,query:d,visParams:f,searchSessionId:p,executionContext:g}){var v;const{dataViews:h,search:m}=Object(c.a)();let b;s||(s=new search_api_SearchAPI({uiSettings:t,search:m,indexPatterns:h,injectedMetadata:Object(c.d)()},o.abortSignal,o.inspectorAdapters,p,g)),l.setTimeRange(e);const y=null===(v=u[0])||void 0===v?void 0:v.meta.index;y&&(b=await h.get(y).catch((()=>{})));const _=Object(i.getEsQueryConfig)(t),x=Object(r.a)(b,d,u,_),{VegaParser:w}=await Promise.all([n.e(0),n.e(7)]).then(n.bind(null,236)),j=new w(f.spec,s,l,x,a);return await j.parseAsync()}}var d=n(1),f=n(5),p=n(8),g=n(3);const v=({core:e,getServiceSettings:t},r)=>class VegaVisualization{constructor(e,t){u()(this,"dataPlugin",Object(c.a)()),u()(this,"vegaView",null),u()(this,"vegaStateRestorer",(({omitSignals:e=["width","height","padding","autosize","background"],isActive:t=(()=>!0)}={})=>{let n;return{save:r=>{r&&t()&&(n={signals:Object(p.omit)(r.signals,e||[]),data:r.data})},restore:(e=!1)=>t()&&n?Object(p.omit)(n,e?void 0:"data"):null,clear:()=>{n=null}}})({isActive:()=>{var e,t;return Boolean(null===(e=this.vegaView)||void 0===e||null===(t=e._parser)||void 0===t?void 0:t.restoreSignalValuesOnRefresh)}})),this.el=e,this.fireEvent=t}async render(e){const{toasts:t}=Object(c.f)();if(e||this.vegaView)try{await this._render(e)}catch(e){this.vegaView?this.vegaView.onError(e):t.addError(e,{title:g.i18n.translate("visTypeVega.visualization.renderErrorTitle",{defaultMessage:"Vega error"})})}else t.addWarning(g.i18n.translate("visTypeVega.visualization.unableToRenderWithoutDataWarningMessage",{defaultMessage:"Unable to render without data"}))}async _render(i){if(i){var a,o;null===(a=i.searchAPI.inspectorAdapters)||void 0===a||a.vega.clearError(),this.vegaView&&(await this.vegaView.destroy(),this.vegaView=null);const s=await t(),{filterManager:u}=this.dataPlugin.query,{timefilter:c}=this.dataPlugin.query.timefilter,l={externalUrl:e.http.externalUrl,parentEl:this.el,fireEvent:this.fireEvent,vegaStateRestorer:this.vegaStateRestorer,vegaParser:i,serviceSettings:s,filterManager:u,timefilter:c,renderMode:r};if(i.useMap){const{VegaMapView:e}=await Promise.all([n.e(0),n.e(4)]).then(n.bind(null,233));this.vegaView=new e(l)}else{const{VegaView:e}=await Promise.all([n.e(0),n.e(8)]).then(n.bind(null,232));this.vegaView=new e(l)}await(null===(o=this.vegaView)||void 0===o?void 0:o.init())}}async resize(e){var t;return null===(t=this.vegaView)||void 0===t?void 0:t.resize(e)}destroy(){var e;this.vegaStateRestorer.clear(),null===(e=this.vegaView)||void 0===e||e.destroy()}};n(93);var h=n(0);const m=({visData:e,fireEvent:t,renderComplete:n,deps:r,renderMode:i})=>{const a=Object(d.useRef)(null),o=Object(d.useRef)(!1),s=Object(d.useRef)(null);Object(d.useEffect)((()=>{if(a.current){const e=v(r,i);s.current=new e(a.current,t)}return()=>{var e;null===(e=s.current)||void 0===e||e.destroy(),s.current=null}}),[r,t,i]),Object(d.useEffect)((()=>{s.current&&(async t=>{await t.render(e),o.current=!0,n()})(s.current)}),[n,e]);const u=Object(d.useMemo)((()=>Object(p.throttle)((e=>{var t;null===(t=s.current)||void 0===t||t.resize(e)}),300,{leading:!1,trailing:!0})),[]),c=Object(d.useCallback)((e=>{o.current&&u(e)}),[u]);return Object(h.jsx)(f.EuiResizeObserver,{onResize:c},(e=>Object(h.jsx)("div",{className:"vgaVis__wrapper",ref:e},Object(h.jsx)("div",{ref:a}))))}},41:function(e,t,n){e.exports=n(22)(2455)},42:function(e,t,n){"use strict";var r,i=function(){return void 0===r&&(r=Boolean(window&&document&&document.all&&!window.atob)),r},a=function(){var e={};return function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}e[t]=n}return e[t]}}(),o=[];function s(e){for(var t=-1,n=0;n<o.length;n++)if(o[n].identifier===e){t=n;break}return t}function u(e,t){for(var n={},r=[],i=0;i<e.length;i++){var a=e[i],u=t.base?a[0]+t.base:a[0],c=n[u]||0,l="".concat(u," ").concat(c);n[u]=c+1;var d=s(l),f={css:a[1],media:a[2],sourceMap:a[3]};-1!==d?(o[d].references++,o[d].updater(f)):o.push({identifier:l,updater:h(f,t),references:1}),r.push(l)}return r}function c(e){var t=document.createElement("style"),r=e.attributes||{};if(void 0===r.nonce){var i=n.nc;i&&(r.nonce=i)}if(Object.keys(r).forEach((function(e){t.setAttribute(e,r[e])})),"function"==typeof e.insert)e.insert(t);else{var o=a(e.insert||"head");if(!o)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");o.appendChild(t)}return t}var l,d=(l=[],function(e,t){return l[e]=t,l.filter(Boolean).join("\n")});function f(e,t,n,r){var i=n?"":r.media?"@media ".concat(r.media," {").concat(r.css,"}"):r.css;if(e.styleSheet)e.styleSheet.cssText=d(t,i);else{var a=document.createTextNode(i),o=e.childNodes;o[t]&&e.removeChild(o[t]),o.length?e.insertBefore(a,o[t]):e.appendChild(a)}}function p(e,t,n){var r=n.css,i=n.media,a=n.sourceMap;if(i?e.setAttribute("media",i):e.removeAttribute("media"),a&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(a))))," */")),e.styleSheet)e.styleSheet.cssText=r;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(r))}}var g=null,v=0;function h(e,t){var n,r,i;if(t.singleton){var a=v++;n=g||(g=c(t)),r=f.bind(null,n,a,!1),i=f.bind(null,n,a,!0)}else n=c(t),r=p.bind(null,n,t),i=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(n)};return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else i()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=i());var n=u(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var r=0;r<n.length;r++){var i=s(n[r]);o[i].references--}for(var a=u(e,t),c=0;c<n.length;c++){var l=s(n[c]);0===o[l].references&&(o[l].updater(),o.splice(l,1))}n=a}}}},43:function(e,t,n){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=function(e,t){var n=e[1]||"",r=e[3];if(!r)return n;if(t&&"function"==typeof btoa){var i=(o=r,s=btoa(unescape(encodeURIComponent(JSON.stringify(o)))),u="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(s),"/*# ".concat(u," */")),a=r.sources.map((function(e){return"/*# sourceURL=".concat(r.sourceRoot||"").concat(e," */")}));return[n].concat(a).concat([i]).join("\n")}var o,s,u;return[n].join("\n")}(t,e);return t[2]?"@media ".concat(t[2]," {").concat(n,"}"):n})).join("")},t.i=function(e,n,r){"string"==typeof e&&(e=[[null,e,""]]);var i={};if(r)for(var a=0;a<this.length;a++){var o=this[a][0];null!=o&&(i[o]=!0)}for(var s=0;s<e.length;s++){var u=[].concat(e[s]);r&&i[u[0]]||(n&&(u[2]?u[2]="".concat(n," and ").concat(u[2]):u[2]=n),t.push(u))}},t}},46:function(e,t,n){e.exports=n(22)(8)},53:function(e,t,n){e.exports=n(22)(21)},65:function(e,t,n){e.exports=n(22)(43)},66:function(e,t,n){"use strict";function r(e,t,n,i){var a=Error.call(this,e);return Object.setPrototypeOf&&Object.setPrototypeOf(a,r.prototype),a.expected=t,a.found=n,a.location=i,a.name="SyntaxError",a}function i(e,t,n){return n=n||" ",e.length>t?e:(t-=e.length,e+(n+=n.repeat(t)).slice(0,t))}!function(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n}(r,Error),r.prototype.format=function(e){var t="Error: "+this.message;if(this.location){var n,r=null;for(n=0;n<e.length;n++)if(e[n].source===this.location.source){r=e[n].text.split(/\r\n|\n|\r/g);break}var a=this.location.start,o=this.location.source+":"+a.line+":"+a.column;if(r){var s=this.location.end,u=i("",a.line.toString().length),c=r[a.line-1],l=a.line===s.line?s.column:c.length+1;t+="\n --\x3e "+o+"\n"+u+" |\n"+a.line+" | "+c+"\n"+u+" | "+i("",a.column-1)+i("",l-a.column,"^")}else t+="\n at "+o}return t},r.buildMessage=function(e,t){var n={literal:function(e){return'"'+i(e.text)+'"'},class:function(e){var t=e.parts.map((function(e){return Array.isArray(e)?a(e[0])+"-"+a(e[1]):a(e)}));return"["+(e.inverted?"^":"")+t+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(e){return e.description}};function r(e){return e.charCodeAt(0).toString(16).toUpperCase()}function i(e){return e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(e){return"\\x0"+r(e)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(e){return"\\x"+r(e)}))}function a(e){return e.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(e){return"\\x0"+r(e)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(e){return"\\x"+r(e)}))}function o(e){return n[e.type](e)}return"Expected "+function(e){var t,n,r=e.map(o);if(r.sort(),r.length>0){for(t=1,n=1;t<r.length;t++)r[t-1]!==r[t]&&(r[n]=r[t],n++);r.length=n}switch(r.length){case 1:return r[0];case 2:return r[0]+" or "+r[1];default:return r.slice(0,-1).join(", ")+", or "+r[r.length-1]}}(e)+" but "+function(e){return e?'"'+i(e)+'"':"end of input"}(t)+" found."},e.exports={SyntaxError:r,parse:function(e,t){var n,i={},a=(t=void 0!==t?t:{}).grammarSource,o={start:ye,Literal:ke},s=ye,u=":",c="or",l="and",d="not",f='"',p="\\",g="<=",v=">=",h="@kuery-cursor@",m=/^[\\"]/,b=/^[^"]/,y=/^[\\():<>"*{}]/,_=/^[0-9a-f]/i,x=/^[ \t\r\n\xA0]/,w=fe("(",!1),j=fe(")",!1),V=fe(":",!1),A=fe("{",!1),O=fe("}",!1),S=ge("fieldName"),q=ge("value"),C=ge("OR"),E=fe("or",!0),T=ge("AND"),k=fe("and",!0),R=ge("NOT"),N=fe("not",!0),M=ge("literal"),I=fe('"',!1),L=fe("\\",!1),P=pe(["\\",'"'],!1,!1),B=pe(['"'],!0,!1),F={type:"any"},Q=fe("*",!1),z=fe("\\t",!1),U=fe("\\r",!1),$=fe("\\n",!1),W=pe(["\\","(",")",":","<",">",'"',"*","{","}"],!1,!1),D=fe("u",!1),H=pe([["0","9"],["a","f"]],!1,!0),Z=fe("<=",!1),G=fe(">=",!1),K=fe("<",!1),J=fe(">",!1),X=ge("whitespace"),Y=pe([" ","\t","\r","\n","Â "],!1,!1),ee=fe("@kuery-cursor@",!1),te=function(e,t){return t},ne=function(e,t){return t},re=function(e){if("cursor"===e.type)return e;!De&&"wildcard"===e.type&&He.wildcard.hasLeadingWildcard(e)&&function(e,t){throw t=void 0!==t?t:he(se,oe),function(e,t){return new r(e,null,null,t)}(e,t)}("Leading wildcards are disabled. See query:allowLeadingWildcards in Advanced Settings.");const t=Ge(!1);return n=>Ze("is",[n,e,t])},ie=function(){return $e},ae=function(t,n,r){const{start:i,end:a}=he(se,oe);return{type:"cursor",start:i.offset,end:a.offset-n.length,prefix:t.join(""),suffix:r.join(""),text:e.substring(se,oe).replace(n,"")}},oe=0,se=0,ue=[{line:1,column:1}],ce=0,le=[],de=0;if("startRule"in t){if(!(t.startRule in o))throw new Error("Can't start parsing from rule \""+t.startRule+'".');s=o[t.startRule]}function fe(e,t){return{type:"literal",text:e,ignoreCase:t}}function pe(e,t,n){return{type:"class",parts:e,inverted:t,ignoreCase:n}}function ge(e){return{type:"other",description:e}}function ve(t){var n,r=ue[t];if(r)return r;for(n=t-1;!ue[n];)n--;for(r={line:(r=ue[n]).line,column:r.column};n<t;)10===e.charCodeAt(n)?(r.line++,r.column=1):r.column++,n++;return ue[t]=r,r}function he(e,t){var n=ve(e),r=ve(t);return{source:a,start:{offset:e,line:n.line,column:n.column},end:{offset:t,line:r.line,column:r.column}}}function me(e){oe<ce||(oe>ce&&(ce=oe,le=[]),le.push(e))}function be(e,t,n){return new r(r.buildMessage(e,t),e,t,n)}function ye(){var e,t,n,r,a,o;for(e=oe,t=[],n=ze();n!==i;)t.push(n),n=ze();return(n=_e())===i&&(n=null),(r=Le())!==i?(se=e,a=n,e="cursor"===(o=r).type?{...o,suggestionTypes:["conjunction"]}:null!==a?a:He.function.buildNode("is","*","*")):(oe=e,e=i),e}function _e(){var e,t,n,r,a;if(e=oe,(t=xe())!==i){if(n=[],r=oe,Ce()!==i&&(a=xe())!==i?(se=r,r=te(0,a)):(oe=r,r=i),r!==i)for(;r!==i;)n.push(r),r=oe,Ce()!==i&&(a=xe())!==i?(se=r,r=te(0,a)):(oe=r,r=i);else n=i;n!==i?(se=e,e=function(e,t){const n=[e,...t];return $e&&n.find((e=>"cursor"===e.type))||Ze("or",n)}(t,n)):(oe=e,e=i)}else oe=e,e=i;return e===i&&(e=xe()),e}function xe(){var e,t,n,r,a;if(e=oe,(t=we())!==i){if(n=[],r=oe,Ee()!==i&&(a=we())!==i?(se=r,r=te(0,a)):(oe=r,r=i),r!==i)for(;r!==i;)n.push(r),r=oe,Ee()!==i&&(a=we())!==i?(se=r,r=te(0,a)):(oe=r,r=i);else n=i;n!==i?(se=e,e=function(e,t){const n=[e,...t];return $e&&n.find((e=>"cursor"===e.type))||Ze("and",n)}(t,n)):(oe=e,e=i)}else oe=e,e=i;return e===i&&(e=we()),e}function we(){var e,t,n;return e=oe,Te()!==i&&(t=je())!==i?(se=e,e="cursor"===(n=t).type?n:Ze("not",[n])):(oe=e,e=i),e===i&&(e=je()),e}function je(){var t,n,r,a,o,s,c,l;if(t=oe,40===e.charCodeAt(oe)?(n="(",oe++):(n=i,0===de&&me(w)),n!==i){for(r=[],a=ze();a!==i;)r.push(a),a=ze();(a=_e())!==i&&(o=Le())!==i?(41===e.charCodeAt(oe)?(s=")",oe++):(s=i,0===de&&me(j)),s!==i?(se=t,c=a,t="cursor"===(l=o).type?{...l,suggestionTypes:["conjunction"]}:c):(oe=t,t=i)):(oe=t,t=i)}else oe=t,t=i;return t===i&&(t=function(){var t,n,r,a,o,s,c,l,d,f;if(t=oe,(n=Ve())!==i){for(r=[],a=ze();a!==i;)r.push(a),a=ze();if(58===e.charCodeAt(oe)?(a=":",oe++):(a=i,0===de&&me(V)),a!==i){for(o=[],s=ze();s!==i;)o.push(s),s=ze();if(123===e.charCodeAt(oe)?(s="{",oe++):(s=i,0===de&&me(A)),s!==i){for(c=[],l=ze();l!==i;)c.push(l),l=ze();(l=_e())!==i&&(d=Le())!==i?(125===e.charCodeAt(oe)?(f="}",oe++):(f=i,0===de&&me(O)),f!==i?(se=t,t=function(e,t,n){return"cursor"===t.type?{...t,nestedPath:t.nestedPath?`${e.value}.${t.nestedPath}`:e.value}:"cursor"===n.type?{...n,suggestionTypes:["conjunction"]}:Ze("nested",[e,t])}(n,l,d)):(oe=t,t=i)):(oe=t,t=i)}else oe=t,t=i}else oe=t,t=i}else oe=t,t=i;t===i&&(t=function(){var t;(t=function(){var t,n,r,a,o,s;if(t=oe,(n=Ve())!==i){for(r=[],a=ze();a!==i;)r.push(a),a=ze();if((a=function(){var t,n;t=oe,e.substr(oe,2)===g?(n=g,oe+=2):(n=i,0===de&&me(Z));n!==i&&(se=t,n="lte");(t=n)===i&&(t=oe,e.substr(oe,2)===v?(n=v,oe+=2):(n=i,0===de&&me(G)),n!==i&&(se=t,n="gte"),(t=n)===i&&(t=oe,60===e.charCodeAt(oe)?(n="<",oe++):(n=i,0===de&&me(K)),n!==i&&(se=t,n="lt"),(t=n)===i&&(t=oe,62===e.charCodeAt(oe)?(n=">",oe++):(n=i,0===de&&me(J)),n!==i&&(se=t,n="gt"),t=n)));return t}())!==i){for(o=[],s=ze();s!==i;)o.push(s),s=ze();(s=ke())!==i?(se=t,u=n,c=a,t="cursor"===(l=s).type?{...l,suggestionTypes:["conjunction"]}:Ze("range",[u,c,l])):(oe=t,t=i)}else oe=t,t=i}else oe=t,t=i;var u,c,l;return t}())===i&&(t=function(){var t,n,r,a,o,s;if(t=oe,(n=Ve())!==i){for(r=[],a=ze();a!==i;)r.push(a),a=ze();if(58===e.charCodeAt(oe)?(a=u,oe++):(a=i,0===de&&me(V)),a!==i){for(o=[],s=ze();s!==i;)o.push(s),s=ze();(s=Ae())!==i?(se=t,c=n,t="cursor"===(l=s).type?{...l,fieldName:c.value,suggestionTypes:["value","conjunction"]}:l(c)):(oe=t,t=i)}else oe=t,t=i}else oe=t,t=i;var c,l;return t}())===i&&(t=function(){var e,t;e=oe,(t=qe())!==i&&(se=e,t=function(e){if("cursor"===e.type){const t=`${e.prefix}${e.suffix}`.trim();return{...e,fieldName:t,suggestionTypes:["field","operator","conjunction"]}}return e(Ge(null))}(t));return e=t}());return t}());return t}()),t}function Ve(){var e;return de++,e=ke(),de--,e===i&&(i,0===de&&me(S)),e}function Ae(){var t,n,r,a,o,s,u,c;if(t=oe,40===e.charCodeAt(oe)?(n="(",oe++):(n=i,0===de&&me(w)),n!==i){for(r=[],a=ze();a!==i;)r.push(a),a=ze();(a=function(){var e,t,n,r,a;if(e=oe,(t=Oe())!==i){if(n=[],r=oe,Ce()!==i&&(a=Oe())!==i?(se=r,r=ne(0,a)):(oe=r,r=i),r!==i)for(;r!==i;)n.push(r),r=oe,Ce()!==i&&(a=Oe())!==i?(se=r,r=ne(0,a)):(oe=r,r=i);else n=i;n!==i?(se=e,e=function(e,t){const n=[e,...t],r=$e&&n.find((e=>"cursor"===e.type));return r?{...r,suggestionTypes:["value"]}:e=>Ze("or",n.map((t=>t(e))))}(t,n)):(oe=e,e=i)}else oe=e,e=i;e===i&&(e=Oe());return e}())!==i&&(o=Le())!==i?(41===e.charCodeAt(oe)?(s=")",oe++):(s=i,0===de&&me(j)),s!==i?(se=t,u=a,t="cursor"===(c=o).type?{...c,suggestionTypes:["conjunction"]}:u):(oe=t,t=i)):(oe=t,t=i)}else oe=t,t=i;return t===i&&(t=qe()),t}function Oe(){var e,t,n,r,a;if(e=oe,(t=Se())!==i){if(n=[],r=oe,Ee()!==i&&(a=Se())!==i?(se=r,r=ne(0,a)):(oe=r,r=i),r!==i)for(;r!==i;)n.push(r),r=oe,Ee()!==i&&(a=Se())!==i?(se=r,r=ne(0,a)):(oe=r,r=i);else n=i;n!==i?(se=e,e=function(e,t){const n=[e,...t],r=$e&&n.find((e=>"cursor"===e.type));return r?{...r,suggestionTypes:["value"]}:e=>Ze("and",n.map((t=>t(e))))}(t,n)):(oe=e,e=i)}else oe=e,e=i;return e===i&&(e=Se()),e}function Se(){var e,t,n;return e=oe,Te()!==i&&(t=Ae())!==i?(se=e,e="cursor"===(n=t).type?{...list,suggestionTypes:["value"]}:e=>Ze("not",[n(e)])):(oe=e,e=i),e===i&&(e=Ae()),e}function qe(){var e,t;return de++,e=oe,(t=Re())!==i&&(se=e,t=function(e){if("cursor"===e.type)return e;const t=Ge(!0);return n=>Ze("is",[n,e,t])}(t)),(e=t)===i&&(e=oe,(t=Me())!==i&&(se=e,t=re(t)),e=t),de--,e===i&&(t=i,0===de&&me(q)),e}function Ce(){var t,n,r,a,o;if(de++,t=oe,n=[],(r=ze())!==i)for(;r!==i;)n.push(r),r=ze();else n=i;if(n!==i)if("or"===e.substr(oe,2).toLowerCase()?(r=e.substr(oe,2),oe+=2):(r=i,0===de&&me(E)),r!==i){if(a=[],(o=ze())!==i)for(;o!==i;)a.push(o),o=ze();else a=i;a!==i?t=n=[n,r,a]:(oe=t,t=i)}else oe=t,t=i;else oe=t,t=i;return de--,t===i&&(n=i,0===de&&me(C)),t}function Ee(){var t,n,r,a,o;if(de++,t=oe,n=[],(r=ze())!==i)for(;r!==i;)n.push(r),r=ze();else n=i;if(n!==i)if("and"===e.substr(oe,3).toLowerCase()?(r=e.substr(oe,3),oe+=3):(r=i,0===de&&me(k)),r!==i){if(a=[],(o=ze())!==i)for(;o!==i;)a.push(o),o=ze();else a=i;a!==i?t=n=[n,r,a]:(oe=t,t=i)}else oe=t,t=i;else oe=t,t=i;return de--,t===i&&(n=i,0===de&&me(T)),t}function Te(){var t,n,r,a;if(de++,t=oe,"not"===e.substr(oe,3).toLowerCase()?(n=e.substr(oe,3),oe+=3):(n=i,0===de&&me(N)),n!==i){if(r=[],(a=ze())!==i)for(;a!==i;)r.push(a),a=ze();else r=i;r!==i?t=n=[n,r]:(oe=t,t=i)}else oe=t,t=i;return de--,t===i&&(n=i,0===de&&me(R)),t}function ke(){var e;return de++,(e=Re())===i&&(e=Me()),de--,e===i&&(i,0===de&&me(M)),e}function Re(){var t,n,r,a,o,s,u;if(t=oe,se=oe,(n=(n=ie())?void 0:i)!==i)if(34===e.charCodeAt(oe)?(r=f,oe++):(r=i,0===de&&me(I)),r!==i){for(a=[],o=Ne();o!==i;)a.push(o),o=Ne();if((o=Ue())!==i){for(s=[],u=Ne();u!==i;)s.push(u),u=Ne();34===e.charCodeAt(oe)?(u=f,oe++):(u=i,0===de&&me(I)),u!==i?(se=t,t=ae(a,o,s)):(oe=t,t=i)}else oe=t,t=i}else oe=t,t=i;else oe=t,t=i;if(t===i)if(t=oe,34===e.charCodeAt(oe)?(n=f,oe++):(n=i,0===de&&me(I)),n!==i){for(r=[],a=Ne();a!==i;)r.push(a),a=Ne();34===e.charCodeAt(oe)?(a=f,oe++):(a=i,0===de&&me(I)),a!==i?(se=t,t=Ge(r.join(""))):(oe=t,t=i)}else oe=t,t=i;return t}function Ne(){var t,n,r;return(t=Pe())===i&&(t=Fe())===i&&(t=oe,92===e.charCodeAt(oe)?(n=p,oe++):(n=i,0===de&&me(L)),n!==i?(m.test(e.charAt(oe))?(r=e.charAt(oe),oe++):(r=i,0===de&&me(P)),r!==i?(se=t,t=r):(oe=t,t=i)):(oe=t,t=i),t===i&&(t=oe,n=oe,de++,r=Ue(),de--,r===i?n=void 0:(oe=n,n=i),n!==i?(b.test(e.charAt(oe))?(r=e.charAt(oe),oe++):(r=i,0===de&&me(B)),r!==i?(se=t,t=r):(oe=t,t=i)):(oe=t,t=i))),t}function Me(){var e,t,n,r,a,o;if(e=oe,se=oe,(t=(t=ie())?void 0:i)!==i){for(n=[],r=Ie();r!==i;)n.push(r),r=Ie();if((r=Ue())!==i){for(a=[],o=Ie();o!==i;)a.push(o),o=Ie();se=e,e=ae(n,r,a)}else oe=e,e=i}else oe=e,e=i;if(e===i){if(e=oe,t=[],(n=Ie())!==i)for(;n!==i;)t.push(n),n=Ie();else t=i;t!==i&&(se=e,t=function(e){const t=e.join("").trim();return"null"===t?Ge(null):"true"===t?Ge(!0):"false"===t?Ge(!1):e.includes(Je)?Ke(t):Ge(t)}(t)),e=t}return e}function Ie(){var t,n,r,a,o;return(t=Pe())===i&&(t=function(){var t,n,r;t=oe,92===e.charCodeAt(oe)?(n=p,oe++):(n=i,0===de&&me(L));n!==i&&(r=Be())!==i?(se=t,t=r):(oe=t,t=i);return t}())===i&&(t=Fe())===i&&(t=function(){var t,n,r;t=oe,92===e.charCodeAt(oe)?(n=p,oe++):(n=i,0===de&&me(L));n!==i?(e.substr(oe,2).toLowerCase()===c?(r=e.substr(oe,2),oe+=2):(r=i,0===de&&me(E)),r===i&&(e.substr(oe,3).toLowerCase()===l?(r=e.substr(oe,3),oe+=3):(r=i,0===de&&me(k)),r===i&&(e.substr(oe,3).toLowerCase()===d?(r=e.substr(oe,3),oe+=3):(r=i,0===de&&me(N)))),r!==i?(se=t,t=r):(oe=t,t=i)):(oe=t,t=i);return t}())===i&&(t=function(){var t,n;t=oe,42===e.charCodeAt(oe)?(n="*",oe++):(n=i,0===de&&me(Q));n!==i&&(se=t,n=Je);return t=n}())===i&&(t=oe,n=oe,de++,r=Be(),de--,r===i?n=void 0:(oe=n,n=i),n!==i?(r=oe,de++,a=function(){var e;(e=Ce())===i&&(e=Ee())===i&&(e=Te());return e}(),de--,a===i?r=void 0:(oe=r,r=i),r!==i?(a=oe,de++,o=Ue(),de--,o===i?a=void 0:(oe=a,a=i),a!==i?(e.length>oe?(o=e.charAt(oe),oe++):(o=i,0===de&&me(F)),o!==i?(se=t,t=o):(oe=t,t=i)):(oe=t,t=i)):(oe=t,t=i)):(oe=t,t=i)),t}function Le(){var e,t,n,r,a,o;if(e=oe,se=oe,(t=(t=ie())?void 0:i)!==i){for(n=[],r=ze();r!==i;)n.push(r),r=ze();if((r=Ue())!==i){for(a=[],o=ze();o!==i;)a.push(o),o=ze();se=e,e=ae(n,r,a)}else oe=e,e=i}else oe=e,e=i;if(e===i)for(e=[],t=ze();t!==i;)e.push(t),t=ze();return e}function Pe(){var t,n;return t=oe,"\\t"===e.substr(oe,2)?(n="\\t",oe+=2):(n=i,0===de&&me(z)),n!==i&&(se=t,n="\t"),(t=n)===i&&(t=oe,"\\r"===e.substr(oe,2)?(n="\\r",oe+=2):(n=i,0===de&&me(U)),n!==i&&(se=t,n="\r"),(t=n)===i&&(t=oe,"\\n"===e.substr(oe,2)?(n="\\n",oe+=2):(n=i,0===de&&me($)),n!==i&&(se=t,n="\n"),t=n)),t}function Be(){var t;return y.test(e.charAt(oe))?(t=e.charAt(oe),oe++):(t=i,0===de&&me(W)),t}function Fe(){var t,n,r;return t=oe,92===e.charCodeAt(oe)?(n=p,oe++):(n=i,0===de&&me(L)),n!==i&&(r=function(){var t,n,r,a,o,s,u,c;t=oe,117===e.charCodeAt(oe)?(n="u",oe++):(n=i,0===de&&me(D));n!==i?(r=oe,a=oe,(o=Qe())!==i&&(s=Qe())!==i&&(u=Qe())!==i&&(c=Qe())!==i?a=o=[o,s,u,c]:(oe=a,a=i),(r=a!==i?e.substring(r,oe):a)!==i?(se=t,l=r,t=String.fromCharCode(parseInt(l,16))):(oe=t,t=i)):(oe=t,t=i);var l;return t}())!==i?(se=t,t=r):(oe=t,t=i),t}function Qe(){var t;return _.test(e.charAt(oe))?(t=e.charAt(oe),oe++):(t=i,0===de&&me(H)),t}function ze(){var t;return de++,x.test(e.charAt(oe))?(t=e.charAt(oe),oe++):(t=i,0===de&&me(Y)),de--,t===i&&(i,0===de&&me(X)),t}function Ue(){var t,n;return t=oe,se=oe,(ie()?void 0:i)!==i?(e.substr(oe,14)===h?(n=h,oe+=14):(n=i,0===de&&me(ee)),n!==i?(se=t,t=We):(oe=t,t=i)):(oe=t,t=i),t}const{parseCursor:$e,cursorSymbol:We,allowLeadingWildcards:De=!0,helpers:{nodeTypes:He}}=t,Ze=He.function.buildNodeWithArgumentNodes,Ge=He.literal.buildNode,Ke=He.wildcard.buildNode,{wildcardSymbol:Je}=He.wildcard;if((n=s())!==i&&oe===e.length)return n;throw n!==i&&oe<e.length&&me({type:"end"}),be(le,ce<e.length?e.charAt(ce):null,ce<e.length?he(ce,ce+1):he(ce,ce))}}},86:function(e,t,n){"use strict";n.d(t,"a",(function(){return nt})),n.d(t,"c",(function(){return j})),n.d(t,"b",(function(){return M}));var r={};n.r(r),n.d(r,"buildNode",(function(){return U})),n.d(r,"toElasticsearchQuery",(function(){return $}));var i={};n.r(i),n.d(i,"wildcardSymbol",(function(){return W})),n.d(i,"buildNode",(function(){return Z})),n.d(i,"test",(function(){return G})),n.d(i,"toElasticsearchQuery",(function(){return K})),n.d(i,"toQueryStringQuery",(function(){return J})),n.d(i,"hasLeadingWildcard",(function(){return X}));var a={};n.r(a),n.d(a,"buildNodeParams",(function(){return ae})),n.d(a,"toElasticsearchQuery",(function(){return oe}));var o={};n.r(o),n.d(o,"buildNodeParams",(function(){return se})),n.d(o,"toElasticsearchQuery",(function(){return ue}));var s={};n.r(s),n.d(s,"buildNodeParams",(function(){return ce})),n.d(s,"toElasticsearchQuery",(function(){return le}));var u={};n.r(u),n.d(u,"buildNodeParams",(function(){return de})),n.d(u,"toElasticsearchQuery",(function(){return fe}));var c={};n.r(c),n.d(c,"buildNodeParams",(function(){return pe})),n.d(c,"toElasticsearchQuery",(function(){return ge}));var l={};n.r(l),n.d(l,"buildNodeParams",(function(){return ve})),n.d(l,"toElasticsearchQuery",(function(){return he}));var d={};n.r(d),n.d(d,"buildNodeParams",(function(){return me})),n.d(d,"toElasticsearchQuery",(function(){return be}));var f={};n.r(f),n.d(f,"buildNode",(function(){return _e})),n.d(f,"buildNodeWithArgumentNodes",(function(){return xe})),n.d(f,"toElasticsearchQuery",(function(){return we}));var p,g,v=n(9),h=n.n(v),m=n(41),b=n.n(m),y=n(8),_=n.n(y),x=function(e,t,n){var r,i,a=Object(y.omit)(e,n);return t.index&&(a.index=null===(r=e.meta)||void 0===r?void 0:r.index),t.negate&&(a.negate=e.meta&&Boolean(e.meta.negate)),t.disabled&&(a.disabled=e.meta&&Boolean(e.meta.disabled)),t.alias&&(a.alias=null===(i=e.meta)||void 0===i?void 0:i.alias),a},w=function(e,t,n){return Object(y.map)(e,(function(e){return x(e,t,n)}))},j=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!e||!t)return!1;var r={},i=["$$hashKey","meta"];return(r=Object(y.defaults)(n||{},{index:!1,state:!1,negate:!1,disabled:!1,alias:!1})).state||i.push("$state"),Array.isArray(e)&&Array.isArray(t)?Object(y.isEqual)(w(e,r,i),w(t,r,i)):!Array.isArray(e)&&!Array.isArray(t)&&Object(y.isEqual)(x(e,r,i),x(t,r,i))},V=n(65),A=n.n(V),O=function(e,t){if("boolean"!=typeof t&&"boolean"===e.type){if([1,"true"].includes(t))return!0;if([0,"false"].includes(t))return!1;throw new Error("".concat(t," is not a valid boolean value for boolean field ").concat(e.name))}return"number"!=typeof t&&"number"===e.type?Number(t):t},S=function(e){var t=Object(y.has)(e,"query.match_phrase"),n=Object(y.get)(e,"query.match",[]),r=void 0!==Object.values(n).find((function(e){return"phrase"===e.type}));return t||r},q=function(e,t){var n=O(e,t);return{script:{source:C(e),lang:e.lang,params:{value:n}}}},C=function(e){return"painless"===e.lang?"boolean compare(Supplier s, def v) {return s.get() == v;}"+"compare(() -> { ".concat(e.script," }, params.value);"):"(".concat(e.script,") == value")};!function(e){e.CUSTOM="custom",e.PHRASES="phrases",e.PHRASE="phrase",e.EXISTS="exists",e.MATCH_ALL="match_all",e.QUERY_STRING="query_string",e.RANGE="range",e.RANGE_FROM_VALUE="range_from_value",e.SPATIAL_FILTER="spatial_filter"}(p||(p={})),function(e){e.APP_STATE="appState",e.GLOBAL_STATE="globalState"}(g||(g={}));var E={gt:">",gte:">=",lte:"<=",lt:"<"},T={gt:"boolean gt(Supplier s, def v) {return s.get() > v}",gte:"boolean gte(Supplier s, def v) {return s.get() >= v}",lte:"boolean lte(Supplier s, def v) {return s.get() <= v}",lt:"boolean lt(Supplier s, def v) {return s.get() < v}"},k={gt:"boolean gt(Supplier s, def v) {return s.get().toInstant().isAfter(Instant.parse(v))}",gte:"boolean gte(Supplier s, def v) {return !s.get().toInstant().isBefore(Instant.parse(v))}",lte:"boolean lte(Supplier s, def v) {return !s.get().toInstant().isAfter(Instant.parse(v))}",lt:"boolean lt(Supplier s, def v) {return s.get().toInstant().isBefore(Instant.parse(v))}"},R=function(e,t){var n=Object(y.mapValues)(Object(y.pickBy)(t,(function(e,t){return t in E})),(function(t){return"number"===e.type&&"string"==typeof t?parseFloat(t):t})),r=Object(y.map)(n,(function(t,n){return"("+e.script+")"+Object(y.get)(E,n)+n})).join(" && ");if("painless"===e.lang){var i="date"===e.type?k:T,a=Object(y.reduce)(n,(function(e,t,n){return e.concat(Object(y.get)(i,n))}),[]).join(" "),o=Object(y.map)(n,(function(t,n){return"".concat(n,"(() -> { ").concat(e.script," }, params.").concat(n,")")})).join(" && ");r="".concat(a).concat(o)}return{script:{source:r,params:n,lang:e.lang}}};var N=function(e){return function(e){return Object(y.has)(e,"query.exists")}(e)?function(e){return e.query.exists&&e.query.exists.field}(e):S(e)?function(e){var t,n,r=null!==(t=null!==(n=e.query.match_phrase)&&void 0!==n?n:e.query.match)&&void 0!==t?t:{};return Object.keys(r)[0]}(e):function(e){var t;return(null==e||null===(t=e.meta)||void 0===t?void 0:t.type)===p.PHRASES}(e)?function(e){return e.meta.key}(e):function(e){return Object(y.has)(e,"query.range")}(e)?function(e){return e.query.range&&Object.keys(e.query.range)[0]}(e):void 0};var M=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return{query:e,meta:b()({index:t,alias:n},r)}},I=function(e){return Object(y.get)(e,"meta.disabled",!1)},L=function(e){return Object(y.omit)(e,["meta","$state"])};function P(e,t){if(function(e){var t,n,r=Object.keys(null!==(t=e.match||(null===(n=e.query)||void 0===n?void 0:n.match))&&void 0!==t?t:{})[0];return Boolean(r&&("phrase"===Object(y.get)(e,["query","match",r,"type"])||"phrase"===Object(y.get)(e,["match",r,"type"])))}(e)){var n=e.match||e.query.match,r=Object.keys(n)[0],i=Object(y.get)(n,[r]),a=i.query;if(t){var o=t.fields.find((function(e){return e.name===r}));o&&(a=O(o,i.query))}return{meta:e.meta,$state:e.$state,query:{match_phrase:h()({},r,Object(y.omit)(b()(b()({},i),{},{query:a}),"type"))}}}return e.query||(e.query={}),e.exists&&(e.query.exists=e.exists,delete e.exists),e.range&&(e.query.range=e.range,delete e.range),e.match_all&&(e.query.match_all=e.match_all,delete e.match_all),Object.keys(e).forEach((function(t){"meta"!==t&&"query"!==t&&"$state"!==t&&(e.query[t]=e[t],delete e[t])})),e}var B=n(53),F=n.n(B),Q=n(46),z=n.n(Q);function U(e){return{type:"literal",value:e}}function $(e){return e.value}var W="@kuery-wildcard@";function D(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function H(e){return e.replace(/[+-=&|><!(){}[\]^"~*?:\\/]/g,"\\$&")}function Z(e){return e.includes(W)?{type:"wildcard",value:e}:ze(e)}function G(e,t){var n=e.value.split(W).map(D).join("[\\s\\S]*");return new RegExp("^".concat(n,"$")).test(t)}function K(e){return e.value.split(W).join("*")}function J(e){return e.value.split(W).map(H).join("*")}function X(e){var t=e.value;return t.startsWith(W)&&t.replace(W,"").length>0}function Y(e,t){if(!t)return[];if("literal"===e.type){var n=$(e),r=t.fields.find((function(e){return e.name===n}));return r?[r]:[]}return"wildcard"===e.type?t.fields.filter((function(t){return G(e,t.name)})):void 0}var ee=n(34),te=n.n(ee);function ne(e){var t=te.a.tz.guess();return"Browser"===e?t:e}function re(e){return function(e){var t,n=null==e?void 0:e.subType;return!(null==n||null===(t=n.nested)||void 0===t||!t.path)}(e)?e.subType:void 0}function ie(e,t,n){var r=b()(b()({},e),{},{value:n?"".concat(n,".").concat(e.value):e.value});if(!t||"wildcard"===r.type&&!n)return r;var i=Y(r,t).reduce((function(e,t){var r=re(t),i=null==r?void 0:r.nested.path;return n&&!i?[].concat(F()(e),["".concat(t.name,' is not a nested field but is in nested group "').concat(n,'" in the KQL expression.')]):i&&!n?[].concat(F()(e),["".concat(t.name," is a nested field, but is not in a nested group in the KQL expression.")]):i!==n?[].concat(F()(e),["Nested field ".concat(t.name," is being queried with the incorrect nested path. The correct path is ").concat(null==r?void 0:r.nested.path,".")]):e}),[]);if(i.length>0)throw new Error(i.join("\n"));return r}function ae(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(Object(y.isUndefined)(e))throw new Error("fieldName is a required argument");if(Object(y.isUndefined)(t))throw new Error("value is a required argument");var r="string"==typeof e?ze(e):U(e),i="string"==typeof t?ze(t):U(t),a=U(n);return{arguments:[r,i,a]}}function oe(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=z()(e.arguments,3),a=i[0],o=i[1],s=i[2],u="wildcard"===o.type&&o.value===W,c="wildcard"===a.type&&a.value===W,l=u&&c;if(l)return{match_all:{}};var d=ie(a,t,null!=r&&r.nested?r.nested.path:void 0),f=Object(y.isUndefined)(o)?o:$e(o),p=s.value?"phrase":"best_fields";if(null===d.value)return"wildcard"===o.type?{query_string:{query:J(o)}}:{multi_match:{type:p,query:f,lenient:!0}};var g=t?Y(d,t):[];if(g&&0===g.length&&g.push({name:$e(d),scripted:!1,type:""}),u&&(null==g||!g.length||(null==g?void 0:g.length)===(null==t?void 0:t.fields.length)))return{match_all:{}};var v=g.reduce((function(e,t){var i=function(e){var n=re(t);return"wildcard"!==d.type||null==n||!n.nested||null!=r&&r.nested?e:{nested:{path:n.nested.path,query:e,score_mode:"none"}}};if(!t.scripted){if(u)return[].concat(F()(e),[i({exists:{field:t.name}})]);if("wildcard"===o.type)return[].concat(F()(e),[i({query_string:{fields:[t.name],query:J(o)}})]);if("date"===t.type){var a=n.dateFormatTZ?{time_zone:ne(n.dateFormatTZ)}:{};return[].concat(F()(e),[i({range:h()({},t.name,b()({gte:f,lte:f},a))})])}var s="phrase"===p?"match_phrase":"match";return[].concat(F()(e),[i(h()({},s,h()({},t.name,f)))])}if(!u)return[].concat(F()(e),[{script:b()({},q(t,f))}])}),[]);return{bool:{should:v||[],minimum_should_match:1}}}function se(e){return{arguments:e}}function ue(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=n.filtersInMustClause,a=e.arguments||[],o=i?"must":"filter";return{bool:h()({},o,a.map((function(e){return $e(e,t,n,r)})))}}function ce(e){return{arguments:e}}function le(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=e.arguments||[];return{bool:{should:i.map((function(e){return $e(e,t,n,r)})),minimum_should_match:1}}}function de(e){return{arguments:[e]}}function fe(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=z()(e.arguments,1),a=i[0];return{bool:{must_not:$e(a,t,n,r)}}}function pe(e,t,n){return{arguments:[ze(e),t,je.literal.buildNode(n)]}}function ge(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=z()(e.arguments,3),a=i[0],o=i[1],s=i[2],u=ie(a,t,null!=r&&r.nested?r.nested.path:void 0),c=t?Y(u,t):[];c&&0===c.length&&c.push({name:$e(u),scripted:!1,type:""});var l=c.map((function(e){var t=function(t){var n=re(e);return"wildcard"!==u.type||null==n||!n.nested||r.nested?t:{nested:{path:n.nested.path,query:t,score_mode:"none"}}},i=h()({},o,$e(s));if(e.scripted)return{script:R(e,i)};if("date"===e.type){var a=n.dateFormatTZ?{time_zone:ne(n.dateFormatTZ)}:{};return t({range:h()({},e.name,b()(b()({},i),a))})}return t({range:h()({},e.name,i)})}));return{bool:{should:l,minimum_should_match:1}}}function ve(e){return{arguments:[U(e)]}}function he(e,t){var n,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=z()(e.arguments,1),a=i[0],o=b()(b()({},a),{},{value:null!=r&&r.nested?"".concat(r.nested.path,".").concat(a.value):a.value}),s=$(o),u=null==t||null===(n=t.fields)||void 0===n?void 0:n.find((function(e){return e.name===s}));if(null!=u&&u.scripted)throw new Error("Exists query does not support scripted fields");return{exists:{field:s}}}function me(e,t){return{arguments:["string"==typeof e?ze(e):U(e),t]}}function be(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=z()(e.arguments,2),o=a[0],s=a[1],u=$e(o),c=null!=i&&null!==(n=i.nested)&&void 0!==n&&n.path?"".concat(i.nested.path,".").concat(u):u;return{nested:{path:c,query:$e(s,t,r,b()(b()({},i),{},{nested:{path:c}})),score_mode:"none"}}}var ye={is:a,and:o,or:s,not:u,range:c,exists:l,nested:d};function _e(e){var t=ye[e];if(_.a.isUndefined(t))throw new Error('Unknown function "'.concat(e,'"'));for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return b()({type:"function",function:e},t.buildNodeParams.apply(t,r))}function xe(e,t){if(_.a.isUndefined(ye[e]))throw new Error('Unknown function "'.concat(e,'"'));return{type:"function",function:e,arguments:t}}function we(e,t,n,r){return ye[e.function].toElasticsearchQuery(e,t,n,r)}var je={function:f,literal:r,wildcard:i},Ve=n(87),Ae=n.n(Ve),Oe=n(88),Se=n.n(Oe),qe=n(89),Ce=n.n(qe),Ee=n(90),Te=n.n(Ee),ke=n(91),Re=n.n(ke),Ne=n(92),Me=n.n(Ne),Ie=n(3),Le=Ie.i18n.translate("esQuery.kql.errors.endOfInputText",{defaultMessage:"end of input"}),Pe={fieldName:Ie.i18n.translate("esQuery.kql.errors.fieldNameText",{defaultMessage:"field name"}),value:Ie.i18n.translate("esQuery.kql.errors.valueText",{defaultMessage:"value"}),literal:Ie.i18n.translate("esQuery.kql.errors.literalText",{defaultMessage:"literal"}),whitespace:Ie.i18n.translate("esQuery.kql.errors.whitespaceText",{defaultMessage:"whitespace"})},Be=function(e){Te()(n,e);var t=Re()(n);function n(e,r){var i;Se()(this,n);var a=e.message;if(e.expected){var o=e.expected.map((function(e){var t,n="other"===(t=e).type?t.description:"literal"===t.type?'"'.concat(t.text,'"'):"end"===t.type?"end of input":t.text||t.description||"";return Pe[n]||n})),s=Object(y.uniq)(o).filter((function(e){return void 0!==e})).sort().join(", ");a=Ie.i18n.translate("esQuery.kql.errors.syntaxError",{defaultMessage:"Expected {expectedList} but {foundInput} found.",values:{expectedList:s,foundInput:e.found?'"'.concat(e.found,'"'):Le}})}var u=[a,r,Object(y.repeat)("-",e.location.start.offset)+"^"].join("\n");return i=t.call(this,u),h()(Ce()(i),"shortMessage",void 0),i.name="KQLSyntaxError",i.shortMessage=a,i}return Ae()(n)}(Me()(Error)),Fe=n(66),Qe=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Fe.parse;if(void 0===e)throw new Error("expression must be a string, got undefined instead");return n(e,b()(b()({},t),{},{helpers:{nodeTypes:je}}))},ze=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Qe(e,b()(b()({},t),{},{startRule:"Literal"}),Fe.parse)},Ue=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{return Qe(e,t,Fe.parse)}catch(t){throw"SyntaxError"===t.name?new Be(t,e):t}},$e=function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3?arguments[3]:void 0;if(!t||!t.type||!je[t.type])return e(je.function.buildNode("and",[]),n);var a=je[t.type];return a.toElasticsearchQuery(t,n,r,i)},We=function(){return $e.apply(void 0,arguments)};function De(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3?arguments[3]:void 0,i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=t.map((function(e){return Ue(e.query,{allowLeadingWildcards:n})}));return He(e,a,{dateFormatTZ:r,filtersInMustClause:i})}function He(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=je.function.buildNode("and",t),i=We(r,e,n);return Object.assign({must:[],filter:[],should:[],must_not:[]},i.bool)}function Ze(e,t){var n,r;return null===(n=e.meta)||void 0===n||!n.key||!t||("custom"===(null===(r=e.meta)||void 0===r?void 0:r.type)?e.meta.index===t.id:t.fields.some((function(t){return t.name===e.meta.key})))}var Ge=function(e,t){if(!t)return e;var n=N(e);if(!n)return e;var r=t.fields.find((function(e){return e.name===n})),i=r&&re(r);if(!i)return e;var a=L(e);return{meta:e.meta,query:{nested:{path:i.nested.path,query:a.query||a}}}},Ke=function(e){return function(t){return Object(y.isUndefined)(t.meta)||Object(y.isUndefined)(t.meta.negate)?!e:t.meta&&t.meta.negate===e}},Je=function(e){return e.query||e},Xe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];e=e.filter((function(e){return e&&!I(e)}));var r=function(r){return e.filter((function(e){return!!e})).filter(Ke(r)).filter((function(e){return!n||Ze(e,t)})).map((function(e){return P(e,t)})).map((function(e){return Ge(e,t)})).map(L).map(Je)};return{must:[],filter:r(!1),should:[],must_not:r(!0)}};function Ye(e,t,n){return function(e){return Object(y.has)(e,"query_string.query")}(e)&&("string"==typeof t&&(t=JSON.parse(t)),Object(y.extend)(e.query_string,t),n&&Object(y.defaults)(e.query_string,{time_zone:ne(n)})),e}function et(e,t,n){return{must:(e||[]).map((function(e){return Ye(function(e){return Object(y.isString)(e)?""===e.trim()?{match_all:{}}:{query_string:{query:e}}:e}(e.query),t,n)})),filter:[],should:[],must_not:[]}}function tt(e){return e.filter((function(e){return!e||"object"!==A()(e)||!Object(y.isEqual)(e,{match_all:{}})}))}function nt(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{allowLeadingWildcards:!1,queryStringOptions:{},ignoreFilterIfFieldNotInIndex:!1};t=Array.isArray(t)?t:[t],n=Array.isArray(n)?n:[n];var i=t.filter((function(e){return Object(y.has)(e,"query")})),a=Object(y.groupBy)(i,"language"),o=De(e,a.kuery,r.allowLeadingWildcards,r.dateFormatTZ,r.filtersInMustClause),s=et(a.lucene,r.queryStringOptions,r.dateFormatTZ),u=Xe(n,e,r.ignoreFilterIfFieldNotInIndex);return{bool:{must:tt([].concat(F()(o.must),F()(s.must),F()(u.must))),filter:tt([].concat(F()(o.filter),F()(s.filter),F()(u.filter))),should:tt([].concat(F()(o.should),F()(s.should),F()(u.should))),must_not:[].concat(F()(o.must_not),F()(s.must_not),F()(u.must_not))}}}},87:function(e,t,n){e.exports=n(22)(14)},88:function(e,t,n){e.exports=n(22)(13)},89:function(e,t,n){e.exports=n(22)(4)},90:function(e,t,n){e.exports=n(22)(19)},91:function(e,t,n){e.exports=n(22)(2453)},92:function(e,t,n){e.exports=n(22)(2460)},93:function(e,t,n){switch(window.__kbnThemeTag__){case"v8dark":return n(94);case"v8light":return n(96)}},94:function(e,t,n){var r=n(42),i=n(95);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var a={insert:"head",singleton:!1};r(i,a);e.exports=i.locals||{}},95:function(e,t,n){(t=n(43)(!1)).push([e.i,".vgaVis__wrapper{scrollbar-color:rgba(152,162,179,0.5) rgba(0,0,0,0);scrollbar-width:thin;display:flex;flex:1 1 0;overflow:auto}.vgaVis__wrapper::-webkit-scrollbar{width:16px;height:16px}.vgaVis__wrapper::-webkit-scrollbar-thumb{background-color:rgba(152,162,179,0.5);background-clip:content-box;border-radius:16px;border:6px solid rgba(0,0,0,0)}.vgaVis__wrapper::-webkit-scrollbar-corner,.vgaVis__wrapper::-webkit-scrollbar-track{background-color:rgba(0,0,0,0)}.vgaVis{display:flex;flex:1 1 100%;position:relative}.vgaVis__view{z-index:0;flex:1 1 100%;display:block;max-width:100%;max-height:100%;width:100%;height:100%}.vgaVis__view .vega-bindings{display:none !important}.vgaVis__controls{font-size:14px;font-size:1rem;line-height:1.71429rem;display:flex}.vgaVis__controls:not(:empty){padding:8px 0}.vgaVis__controls.vgaVis__controls--column{flex-direction:column}.vgaVis__controls.vgaVis__controls--row{flex-direction:row}.vgaVis__controls.vgaVis__controls--row>.vega-bind{flex-grow:1}.vgaVis__controls>.vega-bind .vega-bind-name{display:inline-block;width:104px}.vgaVis__controls>.vega-bind input[type='range']{width:120px;display:inline-block;vertical-align:middle}.vgaVis__controls>.vega-bind label{margin:0 0 0 8px}.vgaVis__controls>.vega-bind select{max-width:160px}.vgaVis__controls>.vega-bind .vega-bind-radio label{margin:0 8px 0 4px}.vgaVis__messages{position:absolute;top:0;width:100%;margin:auto;opacity:.8;z-index:1;list-style:none}.vgaVis__message{margin:8px}.vgaVis__message .vgaVis__messageCode{white-space:pre-wrap;padding:8px}.vgaVis__message--warn .vgaVis__messageCode{background-color:#493f22;color:#F3D371}.vgaVis__message--err .vgaVis__messageCode{background-color:#4a201e;color:#F86B63}.vgaVis__tooltip{max-width:100%;position:fixed}.vgaVis__tooltip h2{margin-bottom:8px}.vgaVis__tooltip--textTruncate td{max-width:100%;overflow:hidden !important;text-overflow:ellipsis !important;white-space:nowrap !important;word-wrap:normal !important}.vgaVis__tooltip td{padding-top:4px;padding-bottom:4px}.vgaVis__tooltip td.key{max-width:160px;color:#535966;text-align:right;padding-right:4px}.vgaVis__tooltip td.value{max-width:240px;text-align:left}@media only screen and (max-width: 768px){.vgaVis__tooltip td.key{max-width:96px}.vgaVis__tooltip td.value{max-width:160px}}\n",""]),e.exports=t},96:function(e,t,n){var r=n(42),i=n(97);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var a={insert:"head",singleton:!1};r(i,a);e.exports=i.locals||{}},97:function(e,t,n){(t=n(43)(!1)).push([e.i,".vgaVis__wrapper{scrollbar-color:rgba(105,112,125,0.5) rgba(0,0,0,0);scrollbar-width:thin;display:flex;flex:1 1 0;overflow:auto}.vgaVis__wrapper::-webkit-scrollbar{width:16px;height:16px}.vgaVis__wrapper::-webkit-scrollbar-thumb{background-color:rgba(105,112,125,0.5);background-clip:content-box;border-radius:16px;border:6px solid rgba(0,0,0,0)}.vgaVis__wrapper::-webkit-scrollbar-corner,.vgaVis__wrapper::-webkit-scrollbar-track{background-color:rgba(0,0,0,0)}.vgaVis{display:flex;flex:1 1 100%;position:relative}.vgaVis__view{z-index:0;flex:1 1 100%;display:block;max-width:100%;max-height:100%;width:100%;height:100%}.vgaVis__view .vega-bindings{display:none !important}.vgaVis__controls{font-size:14px;font-size:1rem;line-height:1.71429rem;display:flex}.vgaVis__controls:not(:empty){padding:8px 0}.vgaVis__controls.vgaVis__controls--column{flex-direction:column}.vgaVis__controls.vgaVis__controls--row{flex-direction:row}.vgaVis__controls.vgaVis__controls--row>.vega-bind{flex-grow:1}.vgaVis__controls>.vega-bind .vega-bind-name{display:inline-block;width:104px}.vgaVis__controls>.vega-bind input[type='range']{width:120px;display:inline-block;vertical-align:middle}.vgaVis__controls>.vega-bind label{margin:0 0 0 8px}.vgaVis__controls>.vega-bind select{max-width:160px}.vgaVis__controls>.vega-bind .vega-bind-radio label{margin:0 8px 0 4px}.vgaVis__messages{position:absolute;top:0;width:100%;margin:auto;opacity:.8;z-index:1;list-style:none}.vgaVis__message{margin:8px}.vgaVis__message .vgaVis__messageCode{white-space:pre-wrap;padding:8px}.vgaVis__message--warn .vgaVis__messageCode{background-color:#fff9e8;color:#8a6a0a}.vgaVis__message--err .vgaVis__messageCode{background-color:#f8e9e9;color:#BD271E}.vgaVis__tooltip{max-width:100%;position:fixed}.vgaVis__tooltip h2{margin-bottom:8px}.vgaVis__tooltip--textTruncate td{max-width:100%;overflow:hidden !important;text-overflow:ellipsis !important;white-space:nowrap !important;word-wrap:normal !important}.vgaVis__tooltip td{padding-top:4px;padding-bottom:4px}.vgaVis__tooltip td.key{max-width:160px;color:#98A2B3;text-align:right;padding-right:4px}.vgaVis__tooltip td.value{max-width:240px;text-align:left}@media only screen and (max-width: 768px){.vgaVis__tooltip td.key{max-width:96px}.vgaVis__tooltip td.value{max-width:160px}}\n",""]),e.exports=t}}]);