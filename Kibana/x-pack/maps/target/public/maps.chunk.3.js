/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements. 
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.maps_bundle_jsonpfunction=window.maps_bundle_jsonpfunction||[]).push([[3],{123:function(e,t,a){"use strict";a.d(t,"a",(function(){return MapComponent}));var i=a(4),s=a.n(i),r=a(7),n=a.n(r),o=a(25),p=a.n(o),d=a(21),m=a(8),l=a(6);class MapComponent extends r.Component{constructor(...e){super(...e),s()(this,"_isMounted",!1),s()(this,"_mapEmbeddable",void 0),s()(this,"_embeddableRef",n.a.createRef()),s()(this,"state",{isLoaded:!1})}componentDidMount(){this._isMounted=!0,this._load()}componentWillUnmount(){this._isMounted=!1,this._mapEmbeddable&&this._mapEmbeddable.destroy()}componentDidUpdate(){this._mapEmbeddable&&this._mapEmbeddable.updateInput({filters:this.props.filters,query:this.props.query,timeRange:this.props.timeRange})}async _load(){const e=await Object(m.a)();this._isMounted&&(this.setState({isLoaded:!0}),this._mapEmbeddable=new e.MapEmbeddable({editable:!1},{id:p()(),attributes:{title:"",layerListJSON:JSON.stringify([e.createBasemapLayerDescriptor(),...this.props.getLayerDescriptors({createRegionMapLayerDescriptor:e.createRegionMapLayerDescriptor,createTileMapLayerDescriptor:e.createTileMapLayerDescriptor})])},mapCenter:this.props.mapCenter}),this._mapEmbeddable.setOnInitialRenderComplete(this.props.onInitialRenderComplete),void 0!==this.props.isSharable&&this._mapEmbeddable.setIsSharable(this.props.isSharable),this._embeddableRef.current&&this._mapEmbeddable.render(this._embeddableRef.current))}render(){return this.state.isLoaded?Object(l.jsx)("div",{className:"mapEmbeddableContainer",ref:this._embeddableRef}):Object(l.jsx)(d.EuiLoadingChart,{mono:!0,size:"l"})}}},346:function(e,t,a){"use strict";a.r(t);a(7);var i=a(123),s=a(6);t.default=function(e){const t={lat:e.visConfig.mapCenter[0],lon:e.visConfig.mapCenter[1],zoom:e.visConfig.mapZoom};return Object(s.jsx)(i.a,{filters:e.filters,query:e.query,timeRange:e.timeRange,mapCenter:t,getLayerDescriptors:function({createTileMapLayerDescriptor:t}){const a=t(e.visConfig.layerDescriptorParams);return a?[a]:[]},onInitialRenderComplete:e.onInitialRenderComplete,isSharable:!1})}}}]);