/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements. 
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.cloud_bundle_jsonpfunction=window.cloud_bundle_jsonpfunction||[]).push([[2],{20:function(e,t,n){e.exports=n(9)(3)},22:function(e,t,n){"use strict";n.r(t),n.d(t,"Chat",(function(){return h}));var i=n(20),a=n.n(i),s=n(0),o=n(1),c=n(2),r=n(6),d=n(15),u=n(5);const l=({onReady:e=(()=>{}),onResize:t=(()=>{})})=>{const n=Object(s.useRef)(null),i=Object(u.b)(),[a,o]=Object(s.useState)({}),[c,r]=Object(s.useState)(!1);return Object(s.useEffect)((()=>{const s=s=>{const{current:d}=n;if(!i.enabled||null==d||!d.contentWindow||s.source!==(null==d?void 0:d.contentWindow))return;const u=(()=>{const{location:e,navigator:t,innerHeight:n,innerWidth:i}=window,{hash:a,host:s,hostname:o,href:c,origin:r,pathname:d,port:u,protocol:l,search:h}=e,{language:b,userAgent:f}=t,{title:m,referrer:j}=document;return{window:{location:{hash:a,host:s,hostname:o,href:c,origin:r,pathname:d,port:u,protocol:l,search:h},navigator:{language:b,userAgent:f},innerHeight:n,innerWidth:i},document:{title:m,referrer:j}}})(),{data:l}=s,{user:h}=i,{id:b,email:f,jwt:m}=h;switch(l.type){case"driftIframeReady":{const e={id:b,attributes:{email:f},jwt:m};d.contentWindow.postMessage({type:"driftSetContext",data:{context:u,user:e}},"*");break}case"driftIframeResize":{const n=l.data.styles||{};o({...a,...n}),c||(r(!0),e()),t();break}}};return window.addEventListener("message",s),()=>window.removeEventListener("message",s)}),[i,a,e,t,c]),i.enabled?{enabled:!0,src:i.chatURL,ref:n,style:a,isReady:c}:{enabled:!1}},h=({onHide:e=(()=>{}),onReady:t,onResize:n})=>{const i=l({onReady:t,onResize:n}),u=Object(s.useRef)(null),[h,b]=Object(s.useState)(!1);if(!i.enabled||h)return null;const{isReady:f,style:m}=i,{bottom:j,height:g,right:w}=m,p=Object(o.css)("bottom:calc(",j," + ",g,");position:fixed;right:calc(",w," + ",d.euiThemeVars.euiSizeXS,");visibility:hidden;",""),y=Object(o.jsx)(r.EuiButtonEmpty,{css:p,"data-test-subj":"cloud-chat-hide",name:"cloudChatHide",onClick:()=>{b(!0),e()},size:"xs"},c.i18n.translate("xpack.cloud.chat.hideChatButtonLabel",{defaultMessage:"Hide chat"})),v=Object(o.css)("bottom:",d.euiThemeVars.euiSizeXL,";position:fixed;right:",d.euiThemeVars.euiSizeXL,";visibility:",f?"visible":"hidden",";z-index:",d.euiThemeVars.euiZMaskBelowHeader-1,";&:focus [name='cloudChatHide'],&:hover [name='cloudChatHide']{visibility:visible;}","");return Object(o.jsx)("div",{css:v,ref:u,"data-test-subj":"cloud-chat"},y,Object(o.jsx)("iframe",a()({"data-test-subj":"cloud-chat-frame",title:c.i18n.translate("xpack.cloud.chat.chatFrameTitle",{defaultMessage:"Chat"})},i)))}}}]);