/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements. 
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.observability_bundle_jsonpfunction=window.observability_bundle_jsonpfunction||[]).push([[0,4,5,9,10],{100:function(e,t,a){"use strict";a.d(t,"b",(function(){return u})),a.d(t,"a",(function(){return c}));var r=a(26),n=a(4),i=a(9),l=a(32);const o="summary.up",s="summary.down",u=e=>!!e&&[i.f,i.e,i.b,i.c,i.g,i.d].includes(e);function c({indexPattern:e}){return{reportType:r.m.KPI,defaultSeriesType:"bar_stacked",seriesTypes:[],xAxisColumn:{sourceField:"@timestamp"},yAxisColumns:[{sourceField:r.l,operationType:"median"}],hasOperationType:!1,filterFields:["observer.geo.name","monitor.type","tags"],breakdownFields:["observer.geo.name","monitor.type","monitor.name",i.h,r.h],baseFilters:[],palette:{type:"palette",name:"status"},definitionFields:[{field:"monitor.name",nested:i.h,singleSelection:!0},{field:"url.full",filters:Object(l.a)("summary.up",e)}],metricOptions:[{label:n.E,field:i.a,id:i.a,columnType:r.g},{field:o,id:o,label:n.eb,columnType:r.g},{field:s,id:s,label:n.q,columnType:r.g},{label:n.X,field:i.g,id:i.g,columnType:r.g,columnFilters:[p]},{label:n.A,field:i.f,id:i.f,columnType:r.g,columnFilters:d(i.f)},{label:n.s,field:i.e,id:i.e,columnType:r.g,columnFilters:d(i.e)},{label:n.k,field:i.c,id:i.c,columnType:r.g,columnFilters:d(i.c)},{label:n.O,field:i.d,id:i.d,columnType:r.g,columnFilters:d(i.d)},{label:n.g,field:i.b,id:i.b,columnType:r.g,columnFilters:d(i.b)}],labels:{...r.d,[o]:n.eb,[s]:n.q}}}const d=e=>[{language:"kuery",query:`synthetics.type: step/metrics and ${e}: *`}],p={language:"kuery",query:"synthetics.type: step/end"}},102:function(e,t,a){"use strict";a.d(t,"a",(function(){return f})),a.d(t,"b",(function(){return b})),a.d(t,"c",(function(){return m}));var r=a(1),n=a(2),i=a(109),l=a(86),o=a(120),s=a(88),u=a(48),c=a(34),d=a(26),p=a(43);const f=e=>Object.entries(null!=e?e:{}).map((([e,t])=>({field:e,values:t}))).filter((({values:e})=>!e.includes(u.a)));function b(e,t,a,r,i){const l=[];return e.forEach(((e,s)=>{const u=null==r?void 0:r[null==e?void 0:e.dataType];if(u&&!Object(n.isEmpty)(e.reportDefinitions)&&!e.hidden&&e.selectedMetricField){var c,p,b;const r=Object(o.a)({reportType:t,indexPattern:u,dataType:e.dataType,reportConfigMap:i}),n=(null!==(c=e.filters)&&void 0!==c?c:[]).concat(f(e.reportDefinitions)),m=`euiColorVis${s}`;l.push({filters:n,indexPattern:u,seriesConfig:r,time:e.time,name:e.name,breakdown:e.breakdown===d.e?void 0:e.breakdown,seriesType:e.seriesType,operationType:e.operationType,reportDefinitions:null!==(p=e.reportDefinitions)&&void 0!==p?p:{},selectedMetricField:e.selectedMetricField,color:null!==(b=e.color)&&void 0!==b?b:a.eui[m]})}})),l}const m=()=>{const{storage:e,allSeries:t,lastRefresh:a,reportType:o}=Object(l.f)(),{indexPatterns:u}=Object(s.b)(),{reportConfigMap:d}=Object(p.b)(),f=Object(c.a)();return Object(r.useMemo)((()=>{var t;const a=Object(l.d)(null!==(t=e.get(l.c))&&void 0!==t?t:[]),r=e.get(l.e);if(Object(n.isEmpty)(u)||Object(n.isEmpty)(a)||!r)return null;const o=b(a,r,f,u,d);if(o.length<1)return null;return new i.a(o).getJSON()}),[u,o,e,f,a,t])}},103:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a(77),n=a(1),i=r.__importDefault(a(104));t.default=function(e,t,a){void 0===t&&(t=0),void 0===a&&(a=[]);var r=i.default(e,t),l=r[0],o=r[1],s=r[2];return n.useEffect(s,a),[l,o]}},104:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a(1);t.default=function(e,t){void 0===t&&(t=0);var a=r.useRef(!1),n=r.useRef(),i=r.useRef(e),l=r.useCallback((function(){return a.current}),[]),o=r.useCallback((function(){a.current=!1,n.current&&clearTimeout(n.current),n.current=setTimeout((function(){a.current=!0,i.current()}),t)}),[t]),s=r.useCallback((function(){a.current=null,n.current&&clearTimeout(n.current)}),[]);return r.useEffect((function(){i.current=e}),[e]),r.useEffect((function(){return o(),s}),[t]),[l,s,o]}},105:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a(1),n=a(106).isClient?window:null,i=function(e){return!!e.addEventListener},l=function(e){return!!e.on};t.default=function(e,t,a,o){void 0===a&&(a=n),r.useEffect((function(){if(t&&a)return i(a)?a.addEventListener(e,t,o):l(a)&&a.on(e,t,o),function(){i(a)?a.removeEventListener(e,t,o):l(a)&&a.off(e,t,o)}}),[e,t,a,JSON.stringify(o)])}},106:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isDeepEqual=t.off=t.on=t.isClient=void 0;var r=a(77).__importDefault(a(107));t.isClient="object"==typeof window,t.on=function(e){for(var t=[],a=1;a<arguments.length;a++)t[a-1]=arguments[a];return e.addEventListener.apply(e,t)},t.off=function(e){for(var t=[],a=1;a<arguments.length;a++)t[a-1]=arguments[a];return e.removeEventListener.apply(e,t)},t.isDeepEqual=r.default},107:function(e,t,a){"use strict";e.exports=function e(t,a){if(t===a)return!0;if(t&&a&&"object"==typeof t&&"object"==typeof a){if(t.constructor!==a.constructor)return!1;var r,n,i;if(Array.isArray(t)){if((r=t.length)!=a.length)return!1;for(n=r;0!=n--;)if(!e(t[n],a[n]))return!1;return!0}if(t.constructor===RegExp)return t.source===a.source&&t.flags===a.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===a.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===a.toString();if((r=(i=Object.keys(t)).length)!==Object.keys(a).length)return!1;for(n=r;0!=n--;)if(!Object.prototype.hasOwnProperty.call(a,i[n]))return!1;for(n=r;0!=n--;){var l=i[n];if(("_owner"!==l||!t.$$typeof)&&!e(t[l],a[l]))return!1}return!0}return t!=t&&a!=a}},109:function(e,t,a){"use strict";a.d(t,"b",(function(){return b})),a.d(t,"a",(function(){return lens_attributes_LensAttributes}));var r=a(5),n=a.n(r),i=a(0),l=a(2),o=a(23);const s=e=>1===e.length?`${e.join(" or ")}`:`(${e.join(" or ")})`;function u(e){return(e+"").replace(/[\\"']/g,"\\$&").replace(/\u0000/g,"\\0")}var c=a(26),d=a(96);function p({label:e,layerId:t,columnFilter:a}){const r=`y-axis-column-${t}`;let n="count() / overall_sum(count())";a&&(n=`count(kql='${a}') / overall_sum(count(kql='${a}'))`);const i={label:e||"Percentage of records",dataType:"number",operationType:"formula",isBucketed:!1,scale:"ratio",params:{formula:n,isFormulaBroken:!1,format:{id:"percent",params:{decimals:0}}},references:[`${r}X4`]},l={label:"Part of count() / overall_sum(count())",dataType:"number",operationType:"count",isBucketed:!1,scale:"ratio",sourceField:c.j,customLabel:!0,filter:{query:null!=a?a:"",language:"kuery"}};return{main:i,supportingColumns:{[`${r}X0`]:l,[`${r}X1`]:l,[`${r}X2`]:{label:"Part of count() / overall_sum(count())",dataType:"number",operationType:"math",isBucketed:!1,scale:"ratio",params:{tinymathAst:`${r}X1`},references:[`${r}X1`],customLabel:!0},[`${r}X3`]:{label:"Part of count() / overall_sum(count())",dataType:"number",operationType:"overall_sum",isBucketed:!1,scale:"ratio",references:[`${r}X2`],customLabel:!0},[`${r}X4`]:{label:"Part of count() / overall_sum(count())",dataType:"number",operationType:"math",isBucketed:!1,scale:"ratio",params:{tinymathAst:{type:"function",name:"divide",args:[`${r}X0`,`${r}X3`],location:{min:0,max:30},text:n}},references:[`${r}X0`,`${r}X3`],customLabel:!0}}}}function f(e){return{sourceField:e,dataType:"number",isBucketed:!1,scale:"ratio"}}const b=(e,t)=>{var a;let r,n,i,l;const o=null!==(a=e.metricOptions)&&void 0!==a?a:[];if(t&&o){const e=o.find((({field:e,id:a})=>e===t||a===t));r=null==e?void 0:e.columnType,n=null==e?void 0:e.columnFilters,i=null==e?void 0:e.timeScale,l=null==e?void 0:e.label}return{fieldName:t,columnType:r,columnFilters:n,timeScale:i,columnLabel:l}};class lens_attributes_LensAttributes{constructor(e){n()(this,"layers",void 0),n()(this,"visualization",void 0),n()(this,"layerConfigs",void 0),n()(this,"isMultiSeries",void 0),n()(this,"globalFilter",void 0),this.layers={},e.forEach((({seriesConfig:e,operationType:t})=>{t&&e.yAxisColumns.forEach((e=>{void 0!==typeof e.operationType&&(e.operationType=t)}))})),this.layerConfigs=e,this.isMultiSeries=e.length>1,this.globalFilter=this.getGlobalFilter(this.isMultiSeries),this.layers=this.getLayers(),this.visualization=this.getXyState()}getGlobalFilter(e){if(e)return;const t=this.layerConfigs[0].seriesConfig.query?` and ${this.layerConfigs[0].seriesConfig.query.query}`:"";return{query:`${this.getLayerFilters(this.layerConfigs[0],this.layerConfigs.length)}${t}`,language:"kuery"}}getBreakdownColumn({sourceField:e,layerId:t,labels:a,indexPattern:r}){const n=r.getFieldByName(e);return{sourceField:e,label:`Top values of ${a[e]}`,dataType:null==n?void 0:n.type,operationType:"terms",scale:"ordinal",isBucketed:!0,params:{orderBy:{type:"column",columnId:`y-axis-column-${t}`},size:10,orderDirection:"desc",otherBucket:!0,missingBucket:!1}}}getNumberRangeColumn(e,t,a){var r;return{sourceField:e,label:null!==(r=t.labels[e])&&void 0!==r?r:a,dataType:"number",operationType:"range",isBucketed:!0,scale:"interval",params:{type:"histogram",ranges:[{from:0,to:1e3,label:""}],maxBars:"auto"}}}getCardinalityColumn({sourceField:e,label:t,seriesConfig:a}){return this.getNumberOperationColumn({sourceField:e,operationType:"unique_count",label:t,seriesConfig:a})}getNumberColumn({seriesConfig:e,label:t,sourceField:a,columnType:r,columnFilter:n,operationType:i}){if("operation"===r||i){if("median"===i||"average"===i||"sum"===i||"unique_count"===i)return this.getNumberOperationColumn({sourceField:a,operationType:i,label:t,seriesConfig:e,columnFilter:n});if("last_value"===i)return this.getLastValueOperationColumn({sourceField:a,operationType:i,label:t,seriesConfig:e,columnFilter:n});if(null!=i&&i.includes("th"))return this.getPercentileNumberColumn(a,i,e)}return this.getNumberRangeColumn(a,e,t)}getLastValueOperationColumn({sourceField:e,label:t,seriesConfig:a,operationType:r,columnFilter:n}){return{...f(e),operationType:r,label:i.i18n.translate("xpack.observability.expView.columns.operation.label",{defaultMessage:"{operationType} of {sourceField}",values:{sourceField:t||a.labels[e],operationType:Object(l.capitalize)(r)}}),filter:n,params:{sortField:"@timestamp"}}}getNumberOperationColumn({sourceField:e,label:t,seriesConfig:a,operationType:r,columnFilter:n}){return{...f(e),label:i.i18n.translate("xpack.observability.expView.columns.operation.label",{defaultMessage:"{operationType} of {sourceField}",values:{sourceField:t||a.labels[e],operationType:Object(l.capitalize)(r)}}),filter:n,operationType:r}}getPercentileBreakdowns(e,t){const a=e.seriesConfig.yAxisColumns,{sourceField:r,label:n}=a[0],i={};for(let a=1;a<c.i.length;a++)i[`y-axis-column-${a}`]={...this.getColumnBasedOnType({sourceField:r,operationType:c.i[a],label:n,layerConfig:e,colIndex:a}),filter:{query:t||"",language:"kuery"}};return i}getPercentileNumberColumn(e,t,a){var r;return{...f(e),label:i.i18n.translate("xpack.observability.expView.columns.label",{defaultMessage:"{percentileValue} percentile of {sourceField}",values:{sourceField:null===(r=a.labels[e])||void 0===r?void 0:r.toLowerCase(),percentileValue:t}}),operationType:"percentile",params:{percentile:Number(t.split("th")[0])}}}getDateHistogramColumn(e){return{sourceField:e,dataType:"date",isBucketed:!0,label:"@timestamp",operationType:"date_histogram",params:{interval:"auto"},scale:"interval"}}getTermsColumn(e,t){return{operationType:"terms",sourceField:e,label:"Top values of "+t||!1,dataType:"string",isBucketed:!0,scale:"ordinal",params:{size:10,orderBy:{type:"alphabetical",fallback:!1},orderDirection:"desc"}}}getXAxis(e,t){const{xAxisColumn:a}=e.seriesConfig;return(null==a?void 0:a.sourceField)===c.o?this.getBreakdownColumn({layerId:t,indexPattern:e.indexPattern,sourceField:e.breakdown||e.seriesConfig.breakdownFields[0],labels:e.seriesConfig.labels}):this.getColumnBasedOnType({layerConfig:e,label:a.label,sourceField:a.sourceField})}getColumnBasedOnType({sourceField:e,label:t,layerConfig:a,operationType:r,colIndex:n}){const{breakdown:i,seriesConfig:l}=a,{fieldMeta:o,columnType:s,fieldName:u,columnLabel:d,timeScale:p,columnFilters:f}=this.getFieldMeta(e,a),{type:b}=null!=o?o:{};return s===c.n?this.getTermsColumn(u,d||t):u===c.j||s===c.c?this.getRecordsColumn(t||d,void 0!==n?null==f?void 0:f[n]:void 0,p):"date"===b?this.getDateHistogramColumn(u):"number"===b&&i===c.h?{...this.getPercentileNumberColumn(u,r||c.i[0],l),filter:void 0!==n?null==f?void 0:f[n]:void 0}:"number"===b?this.getNumberColumn({sourceField:u,columnType:s,columnFilter:null==f?void 0:f[0],operationType:r,label:d||t,seriesConfig:a.seriesConfig}):"unique_count"===r?this.getCardinalityColumn({sourceField:u,label:d||t,seriesConfig:a.seriesConfig}):this.getDateHistogramColumn(u)}getCustomFieldName({sourceField:e,layerConfig:t}){return b(t.seriesConfig,e)}getFieldMeta(e,t){if(e===c.l){const{fieldName:e,columnType:a,columnLabel:r,columnFilters:n,timeScale:i}=b(t.seriesConfig,t.selectedMetricField);return{fieldMeta:t.indexPattern.getFieldByName(e),fieldName:e,columnType:a,columnLabel:r,columnFilters:n,timeScale:i}}return{fieldMeta:t.indexPattern.getFieldByName(e),fieldName:e}}getMainYAxis(e,t,a){const{breakdown:r}=e,{sourceField:n,operationType:i,label:l}=e.seriesConfig.yAxisColumns[0];return n===c.k?p({label:l,layerId:t,columnFilter:a}).main:n!==c.j&&n?this.getColumnBasedOnType({sourceField:n,label:l,layerConfig:e,colIndex:0,operationType:r===c.h?c.i[0]:i}):this.getRecordsColumn(l)}getChildYAxises(e,t,a){const{breakdown:r}=e,n={},i=e.seriesConfig.yAxisColumns,{sourceField:l,label:o}=i[0];if(l===c.k&&t)return p({label:o,layerId:t,columnFilter:a}).supportingColumns;if(1===i.length&&r===c.h)return this.getPercentileBreakdowns(e,a);if(1===i.length)return n;for(let t=1;t<i.length;t++){const{sourceField:a,operationType:r,label:l}=i[t];n[`y-axis-column-${t}`]=this.getColumnBasedOnType({sourceField:a,operationType:r,label:l,layerConfig:e,colIndex:t})}return n}getRecordsColumn(e,t,a){return{dataType:"number",isBucketed:!1,label:e||"Count of records",operationType:"count",scale:"ratio",sourceField:c.j,filter:t,...a?{timeScale:a}:{}}}getLayerFilters(e,t){const{filters:a,time:r,seriesConfig:{baseFilters:n,reportType:i}}=e;let l="";i!==c.m.KPI&&t>1&&r&&(l+=`@timestamp >= ${r.from} and @timestamp <= ${r.to}`),null==n||n.forEach((e=>{var t,a,r;const n=e;if(null!==(t=n.query)&&void 0!==t&&t.match_phrase){const e=Object.keys(n.query.match_phrase)[0],t=`${e}: ${n.query.match_phrase[e]}`;l.length>0?l+=` and ${t}`:l+=t}if(null!==(a=n.query)&&void 0!==a&&null!==(r=a.bool)&&void 0!==r&&r.should){var i;const e=[];let t="";null===(i=n.query)||void 0===i||i.bool.should.forEach((a=>{a.match_phrase&&(t=Object.keys(a.match_phrase)[0],e.push(a.match_phrase[t]))}));const a=`${t}: (${e.join(" or ")})`;l.length>0?l+=` and ${a}`:l+=a}const s=e;if(Object(o.e)(s)){var u;const e=`${null===(u=s.query.exists)||void 0===u?void 0:u.field} : *`;l.length>0?l+=` and ${e}`:l+=e}}));const d=(e=>{let t="";return e.forEach((({field:e,values:a,notValues:r,wildcards:n,notWildcards:i})=>{const l=null==a?void 0:a.map((e=>`"${u(e)}"`)),o=null==r?void 0:r.map((e=>`"${u(e)}"`)),c=null==n?void 0:n.map((e=>`*${e}*`)),d=null==i?void 0:i.map((e=>`*${e}*`));l&&(null==l?void 0:l.length)>0&&(t.length>0&&(t+=" and "),t+=`${e}: ${s(l)}`),o&&(null==o?void 0:o.length)>0&&(t.length>0&&(t+=" and "),t+=`not (${e}: ${s(o)})`),c&&(null==c?void 0:c.length)>0&&(t.length>0&&(t+=" and "),t+=`(${e}: ${s(c)})`),d&&(null==d?void 0:d.length)>0&&(t.length>0&&(t+=" and "),t+=`(${e}: ${s(d)})`)})),t})(null!=a?a:[]);return l?d?`${d} and ${l}`:l:d}getTimeShift(e,t,a){if(0===a||e.seriesConfig.reportType!==c.m.KPI||!t.time)return null;const{time:{from:r}}=e,{time:{from:n}}=t,i=Object(d.b)(r),l=Object(d.b)(n),o=i&&l?Math.abs(i.diff(l,"days")):0;if(o>1)return o+"d";const s=i&&l?Math.abs(null==i?void 0:i.diff(l,"hours")):0;return 0===s?null:s+"h"}getLayers(){const e={},t=this.layerConfigs;return t.forEach(((a,r)=>{var n,i,l;const{breakdown:o,seriesConfig:s}=a,u=`layer${r}`,d=this.getLayerFilters(a,t.length),p=this.getTimeShift(this.layerConfigs[0],a,r),f=this.getMainYAxis(a,u,d),{sourceField:b}=s.xAxisColumn,m=p?`${f.label}(${p})`:f.label;let g=d||(null===(n=f.filter)||void 0===n?void 0:n.query);d&&null!==(i=f.filter)&&void 0!==i&&i.query&&(g=`${d} and ${f.filter.query}`),e[u]={columnOrder:[...o&&b!==c.o&&o!==c.h?[`breakdown-column-${u}`]:[],`x-axis-column-${u}`,`y-axis-column-${u}`,...Object.keys(this.getChildYAxises(a,u,d))],columns:{[`x-axis-column-${u}`]:this.getXAxis(a,u),[`y-axis-column-${u}`]:{...f,label:m,filter:{query:null!==(l=g)&&void 0!==l?l:"",language:"kuery"},...p?{timeShift:p}:{}},...o&&b!==c.o&&o!==c.h?{[`breakdown-column-${u}`]:this.getBreakdownColumn({layerId:u,sourceField:o,indexPattern:a.indexPattern,labels:a.seriesConfig.labels})}:{},...this.getChildYAxises(a,u,d)},incompleteColumns:{}}})),e}getXyState(){return{legend:{isVisible:!0,showSingleSeries:!0,position:"right"},valueLabels:"hide",fittingFunction:"Linear",curveType:"CURVE_MONOTONE_X",axisTitlesVisibilitySettings:{x:!0,yLeft:!this.isMultiSeries,yRight:!this.isMultiSeries},tickLabelsVisibilitySettings:{x:!0,yLeft:!0,yRight:!0},gridlinesVisibilitySettings:{x:!0,yLeft:!0,yRight:!0},preferredSeriesType:"line",layers:this.layerConfigs.map(((e,t)=>{var a,r;return{accessors:[`y-axis-column-layer${t}`,...Object.keys(this.getChildYAxises(e))],layerId:`layer${t}`,layerType:"data",seriesType:e.seriesType||e.seriesConfig.defaultSeriesType,palette:e.seriesConfig.palette,yConfig:e.seriesConfig.yConfig||[{forAccessor:`y-axis-column-layer${t}`,color:e.color,axisMode:(null===(a=e.indexPattern.fieldFormatMap[e.selectedMetricField])||void 0===a?void 0:a.id)===(null===(r=this.layerConfigs[0].indexPattern.fieldFormatMap[this.layerConfigs[0].selectedMetricField])||void 0===r?void 0:r.id)?"left":"right"}],xAccessor:`x-axis-column-layer${t}`,...e.breakdown&&e.breakdown!==c.h&&e.seriesConfig.xAxisColumn.sourceField!==c.o?{splitAccessor:`breakdown-column-layer${t}`}:{}}})),...this.layerConfigs[0].seriesConfig.yTitle?{yTitle:this.layerConfigs[0].seriesConfig.yTitle}:{}}}getJSON(){const e=Array.from(new Set([...this.layerConfigs.map((({indexPattern:e})=>e.id))])),t=this.globalFilter||this.layerConfigs[0].seriesConfig.query;return{title:"Prefilled from exploratory view app",description:"",visualizationType:"lnsXY",references:[...e.map((e=>({id:e,name:"indexpattern-datasource-current-indexpattern",type:"index-pattern"}))),...this.layerConfigs.map((({indexPattern:e},t)=>{return{id:e.id,name:(a=`layer${t}`,`indexpattern-datasource-layer-${a}`),type:"index-pattern"};var a}))],state:{datasourceStates:{indexpattern:{layers:this.layers}},visualization:this.visualization,query:t||{query:"",language:"kuery"},filters:[]}}}}},110:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return d}));var r,n=a(1),i=a.n(n),l=a(79),o=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),s=function(e){function t(t){var a=e.call(this,t)||this;return a.addPropsChannel=function(){Object.assign(a.props.node,{setPortalProps:function(e){a.setState({nodeProps:e})}})},a.state={nodeProps:a.props.node.getInitialPortalProps()},a}return o(t,e),t.prototype.componentDidMount=function(){this.addPropsChannel()},t.prototype.componentDidUpdate=function(){this.addPropsChannel()},t.prototype.render=function(){var e=this,t=this.props,a=t.children,r=t.node;return l.createPortal(n.Children.map(a,(function(t){return n.isValidElement(t)?n.cloneElement(t,e.state.nodeProps):t})),r)},t}(n.PureComponent),u=function(e){function t(t){var a=e.call(this,t)||this;return a.placeholderNode=n.createRef(),a.passPropsThroughPortal(),a}return o(t,e),t.prototype.passPropsThroughPortal=function(){var e=Object.assign({},this.props,{node:void 0});this.props.node.setPortalProps(e)},t.prototype.componentDidMount=function(){var e=this.props.node,t=this.placeholderNode.current,a=t.parentNode;e.mount(a,t),this.passPropsThroughPortal()},t.prototype.componentDidUpdate=function(){var e=this.props.node,t=this.placeholderNode.current,a=t.parentNode;e.mount(a,t),this.passPropsThroughPortal()},t.prototype.componentWillUnmount=function(){this.props.node.unmount(this.placeholderNode.current)},t.prototype.render=function(){return n.createElement("div",{ref:this.placeholderNode})},t}(n.PureComponent),c=a(15);function d({children:e,setHeaderActionMenu:t,theme$:a}){const r=Object(n.useMemo)((()=>function(){var e,t,a={},r=Object.assign(document.createElement("div"),{setPortalProps:function(e){a=e},getInitialPortalProps:function(){return a},mount:function(a,n){n!==t&&(r.unmount(),a.replaceChild(r,n),e=a,t=n)},unmount:function(a){a&&a!==t||e&&t&&(e.replaceChild(t,r),e=void 0,t=void 0)}});return r}()),[]);return Object(n.useEffect)((()=>(t((e=>Object(c.toMountPoint)(i.a.createElement(u,{node:r}),{theme$:a})(e))),()=>{r.unmount(),t(void 0)})),[r,t,a]),i.a.createElement(s,{node:r},e)}},111:function(e,t,a){"use strict";a.r(t),a.d(t,"FieldValueSuggestions",(function(){return g}));var r=a(1),n=a.n(r),i=a(99),l=a(7),o=a(0),s=a(20),u=a.n(s),c=a(2);const d=a(45).euiStyled.div`
  border-radius: ${({theme:e})=>e.eui.euiBorderRadius};
  background: ${({theme:e})=>e.eui.euiColorLightShade};
  padding: 0 ${({theme:e})=>e.eui.paddingSizes.xs};
`,p=(e,t,a,r)=>{const i={};return null==e||e.forEach((({label:e,count:t})=>{i[e]=t})),Object.entries(i).map((([e,i])=>({label:e,append:r?n.a.createElement(d,null,n.a.createElement(l.EuiText,{size:"xs"},i)):null,...null!=t&&t.includes(e)?{checked:"on"}:{},...null!=a&&a.includes(e)?{checked:"off"}:{}})))};function f({fullWidth:e,label:t,loading:a,query:i,setQuery:s,button:u,width:d,forceOpen:f,setForceOpen:m,anchorPosition:g,singleSelection:v,asFilterButton:y,showCount:h=!0,values:E=[],selectedValue:x,excludedValue:w,allowExclusions:O=!0,compressed:k=!0,onChange:S}){const[C,T]=Object(r.useState)((()=>p(E,x,w,h))),[F,j]=Object(r.useState)(!1);Object(r.useEffect)((()=>{T(p(E,x,w,h))}),[E,x,h,w]);const I=()=>{j(!F)},M=n.a.createElement(l.EuiButton,{style:d?{width:d}:{},size:"m",color:"text",iconType:"arrowDown",iconSide:"right",onClick:I,"data-test-subj":"fieldValueSelectionBtn",fullWidth:e},t),P=(x||[]).length+(w||[]).length,A=n.a.createElement(l.EuiFilterButton,{"aria-label":o.i18n.translate("xpack.observability.filterButton.label",{defaultMessage:"expands filter group for {label} filter",values:{label:t}}),hasActiveFilters:P>0,iconType:"arrowDown",numActiveFilters:P,numFilters:C.length,onClick:I},t),D=()=>{const e=(null!=C?C:[]).filter((e=>"on"===(null==e?void 0:e.checked))).map((({label:e})=>e)),t=(null!=C?C:[]).filter((e=>"off"===(null==e?void 0:e.checked))).map((({label:e})=>e));return Object(c.isEqual)(null!=x?x:[],e)&&Object(c.isEqual)(null!=w?w:[],t)};return n.a.createElement(b,null,n.a.createElement(l.EuiPopover,{id:"popover",panelPaddingSize:"none",button:u||(y?A:M),isOpen:F||f,closePopover:()=>{j(!1),null==m||m(!1)},anchorPosition:g,style:{width:"100%"}},n.a.createElement(l.EuiSelectable,{searchable:!0,singleSelection:v,searchProps:{placeholder:o.i18n.translate("xpack.observability.fieldValueSelection.placeholder",{defaultMessage:"Filter {label}",values:{label:t}}),compressed:k,onInput:e=>{s(e.target.value)},"data-test-subj":"suggestionInputField"},listProps:{onFocusBadge:!1},options:C,onChange:e=>{T(e)},allowExclusions:O,isLoading:a&&!i&&0===C.length},((e,r)=>n.a.createElement("div",{style:{width:240}},n.a.createElement(l.EuiPopoverTitle,{paddingSize:"s"},r),e,a&&i&&n.a.createElement(l.EuiText,{className:"eui-textCenter",color:"subdued"},o.i18n.translate("xpack.observability.fieldValueSelection.loading",{defaultMessage:"Loading"})," ",n.a.createElement(l.EuiLoadingSpinner,{size:"m"})),n.a.createElement(l.EuiPopoverFooter,{paddingSize:"s"},n.a.createElement(l.EuiButton,{"aria-label":o.i18n.translate("xpack.observability.fieldValueSelection.apply.label",{defaultMessage:"Apply the selected filters for {label}",values:{label:t}}),fill:!0,fullWidth:!0,size:"s",isDisabled:D(),onClick:()=>{const e=C.filter((e=>"on"===(null==e?void 0:e.checked))),t=C.filter((e=>"off"===(null==e?void 0:e.checked)));S(Object(c.map)(e,"label"),Object(c.map)(t,"label")),j(!1),null==m||m(!1)}},o.i18n.translate("xpack.observability.fieldValueSelection.apply",{defaultMessage:"Apply"}))))))))}const b=u.a.div.withConfig({displayName:"Wrapper",componentId:"sc-o6ohvj-0"})(["&&&{div.euiPopover__anchor{width:100%;.euiButton{width:100%;}}}"]);var m=a(48);function g({fullWidth:e,sourceField:t,label:a,indexPatternTitle:l,selectedValue:o,excludedValue:s,filters:u,button:c,time:d,width:p,forceOpen:b,setForceOpen:g,anchorPosition:v,singleSelection:y,compressed:h,asFilterButton:E,usePrependLabel:x,allowAllValuesSelection:w,required:O,allowExclusions:k=!0,cardinalityField:S,inspector:C,asCombobox:T=!0,keepHistory:F=!0,onChange:j}){const[I,M]=Object(r.useState)(""),{values:P,loading:A}=Object(i.a)({indexPatternTitle:l,query:I,sourceField:t,filters:u,time:d,inspector:C,cardinalityField:S,keepHistory:F,label:a}),D=T?m.b:f;return n.a.createElement(D,{fullWidth:e,singleSelection:y,values:P,label:a,onChange:j,query:I,setQuery:M,loading:A,selectedValue:o,excludedValue:s,button:c,forceOpen:b,setForceOpen:g,anchorPosition:v,width:p,compressed:h,asFilterButton:E,usePrependLabel:x,allowExclusions:k,allowAllValuesSelection:!y&&w,required:O})}t.default=g},116:function(e,t,a){"use strict";a.d(t,"a",(function(){return f})),a.d(t,"b",(function(){return m}));var r=a(2),n=a(1),i=a.n(n),l=a(33),o=a(82),s=a(27),u=a(21),c=a(87),d=a(91),p=a(118);const f=Object(n.createContext)({}),b=["apm","synthetics","infra_logs","infra_metrics","ux","alert"];function m({children:e}){const{core:t}=Object(c.a)(),[a,m]=Object(n.useState)(""),{absoluteStart:g,absoluteEnd:v}=Object(d.a)(),[y,h]=Object(n.useState)({}),E=Object(l.useRouteMatch)("/exploratory-view");Object(n.useEffect)((()=>{E||Object(o.asyncForEach)(b,(async e=>{var t,a,r,n,i;try{const l=({hasData:t,indices:a,serviceName:r})=>{h((n=>({...n,[e]:{hasData:t,...r?{serviceName:r}:{},...a?{indices:a}:{},status:u.a.SUCCESS}})))};switch(e){case"ux":const o={absoluteTime:{start:g,end:v}},u=await(null===(t=Object(s.a)(e))||void 0===t?void 0:t.hasData(o));l({hasData:null==u?void 0:u.hasData,indices:null==u?void 0:u.indices,serviceName:null==u?void 0:u.serviceName});break;case"synthetics":const c=await(null===(a=Object(s.a)(e))||void 0===a?void 0:a.hasData());l({hasData:null==c?void 0:c.hasData,indices:null==c?void 0:c.indices});break;case"apm":const d=await(null===(r=Object(s.a)(e))||void 0===r?void 0:r.hasData());l({hasData:null==d?void 0:d.hasData,indices:null==d?void 0:d.indices});break;case"infra_logs":l({hasData:await(null===(n=Object(s.a)(e))||void 0===n?void 0:n.hasData())});break;case"infra_metrics":const p=await(null===(i=Object(s.a)(e))||void 0===i?void 0:i.hasData());l({hasData:null==p?void 0:p.hasData,indices:null==p?void 0:p.indices})}}catch(t){h((t=>({...t,[e]:{hasData:void 0,status:u.a.FAILURE}})))}}))}),[E]),Object(n.useEffect)((()=>{!async function(){try{const e=await Object(p.a)({core:t});h((t=>({...t,alert:{hasData:e.length>0,status:u.a.SUCCESS}})))}catch(e){h((e=>({...e,alert:{hasData:void 0,status:u.a.FAILURE}})))}}()}),[a,t]);const x=b.every((e=>{var t;const a=null===(t=y[e])||void 0===t?void 0:t.status;return void 0!==a&&a!==u.a.LOADING})),w=Object.keys(y).some((e=>{var t;return!0===(null===(t=y[e])||void 0===t?void 0:t.hasData)}));return i.a.createElement(f.Provider,{value:{hasDataMap:y,hasAnyData:Object(r.isEmpty)(y)?void 0:w,isAllRequestsComplete:x,forceUpdate:a,onRefreshTimeRange:()=>{m(Object(r.uniqueId)())}},children:e})}},117:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var r=a(1);const n=Object(r.createContext)({})},118:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));const r=["apm","uptime","logs","infrastructure","alerts"];async function n({core:e}){try{const{data:t=[]}=await e.http.get("/api/alerts/_find",{query:{page:1,per_page:20}})||{};return t.filter((({consumer:e})=>r.includes(e)))}catch(e){throw console.error("Error while fetching alerts",e),e}}},119:function(e,t,a){"use strict";a.d(t,"a",(function(){return n})),a.d(t,"b",(function(){return i}));var r=a(28);const n=(e,t,a)=>{l(e,t,a),s(e,t,a),o(e)},i=(e,t,a)=>{u(e,t,a)},l=(e,t,a)=>{const n=(e=>{const t=new Map;return e.forEach((e=>{const a=t.get(e.dataType),r=(e.filters||[]).map((e=>e.field));a?a.push(...r):t.set(e.dataType,[...r])})),t})(t);[...n.keys()].forEach((t=>{(n.get(t)||[]).forEach((n=>{e({app:"observability-overview",metricType:r.a.COUNT,metric:`exploratory_view__filters__filter_${n}`}),e({app:"observability-overview",metricType:r.a.COUNT,metric:`exploratory_view__filters__report_type_${a}__data_type_${t}__filter_${n}`})}))}))},o=e=>{e({app:"observability-overview",metricType:r.a.COUNT,metric:"exploratory_view_apply_changes"})},s=(e,t,a)=>{t.map((e=>({dataType:e.dataType,metricType:e.selectedMetricField}))).forEach((({dataType:t,metricType:n})=>{a&&t&&n&&e({app:"observability-overview",metricType:r.a.COUNT,metric:`exploratory_view__report_type_${a}__data_type_${t}__metric_type_${n}`})}))},u=(e,t,a)=>{const r=function(e){if(e<0||isNaN(e))return null;if(e>=60)return"60+";if(e>=30)return"30-60";if(e>=20)return"20-30";if(e>=10)return"10-20";if(e>=5)return"5-10";return"0-5"}((a-t)/1e3);r&&c(e,r)};const c=(e,t)=>{e({app:"observability-overview",metricType:r.a.COUNT,metric:`exploratory_view__chart_loading_in_seconds_${t}`})}},120:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));const r=({reportType:e,dataType:t,indexPattern:a,reportConfigMap:r})=>{var n;let i;if(null===(n=r[t])||void 0===n||n.some((t=>{const r=t({indexPattern:a});return r.reportType===e&&(i=r),r.reportType===e})),!i)throw new Error(`No report config provided for dataType: ${t} and reportType: ${e}`);return i}},121:function(e,t,a){"use strict";a.d(t,"b",(function(){return s})),a.d(t,"a",(function(){return u}));var r=a(1),n=a.n(r),i=a(0),l=a(7),o=a(86);function s({seriesId:e,series:t,defaultOperationType:a}){const{setSeries:r}=Object(o.f)(),i=null==t?void 0:t.operationType;return n.a.createElement(u,{onChange:a=>{r(e,{...t,operationType:a})},operationType:i||a})}function u({operationType:e,onChange:t}){const a=[{value:"average",inputDisplay:i.i18n.translate("xpack.observability.expView.operationType.average",{defaultMessage:"Average"})},{value:"median",inputDisplay:i.i18n.translate("xpack.observability.expView.operationType.median",{defaultMessage:"Median"})},{value:"sum",inputDisplay:i.i18n.translate("xpack.observability.expView.operationType.sum",{defaultMessage:"Sum"})},{value:"last_value",inputDisplay:i.i18n.translate("xpack.observability.expView.operationType.lastValue",{defaultMessage:"Last value"})},{value:"75th",inputDisplay:i.i18n.translate("xpack.observability.expView.operationType.75thPercentile",{defaultMessage:"75th Percentile"})},{value:"90th",inputDisplay:i.i18n.translate("xpack.observability.expView.operationType.90thPercentile",{defaultMessage:"90th Percentile"})},{value:"95th",inputDisplay:i.i18n.translate("xpack.observability.expView.operationType.95thPercentile",{defaultMessage:"95th Percentile"})},{value:"99th",inputDisplay:i.i18n.translate("xpack.observability.expView.operationType.99thPercentile",{defaultMessage:"99th Percentile"})}];return n.a.createElement(l.EuiSuperSelect,{fullWidth:!0,"data-test-subj":"operationTypeSelect",valueOfSelected:e,options:a,onChange:t})}},122:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a(17),n=a(56),i=a(152),l=a(57),o=a(154);function s(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var u=s(r),c=s(n),d=s(i),p=s(l),f=s(o);function b(){var e;return(e=arguments.length-1)<0||arguments.length<=e?void 0:arguments[e]}var m={symbols:{"!":{postfix:{symbol:"!",f:function e(t){return t%1||!(+t>=0)?NaN:t>170?1/0:0===t?1:t*e(t-1)},notation:"postfix",precedence:6,rightToLeft:0,argCount:1},symbol:"!",regSymbol:"!"},"^":{infix:{symbol:"^",f:function(e,t){return Math.pow(e,t)},notation:"infix",precedence:5,rightToLeft:1,argCount:2},symbol:"^",regSymbol:"\\^"},"*":{infix:{symbol:"*",f:function(e,t){return e*t},notation:"infix",precedence:4,rightToLeft:0,argCount:2},symbol:"*",regSymbol:"\\*"},"/":{infix:{symbol:"/",f:function(e,t){return e/t},notation:"infix",precedence:4,rightToLeft:0,argCount:2},symbol:"/",regSymbol:"/"},"+":{infix:{symbol:"+",f:function(e,t){return e+t},notation:"infix",precedence:2,rightToLeft:0,argCount:2},prefix:{symbol:"+",f:b,notation:"prefix",precedence:3,rightToLeft:0,argCount:1},symbol:"+",regSymbol:"\\+"},"-":{infix:{symbol:"-",f:function(e,t){return e-t},notation:"infix",precedence:2,rightToLeft:0,argCount:2},prefix:{symbol:"-",f:function(e){return-e},notation:"prefix",precedence:3,rightToLeft:0,argCount:1},symbol:"-",regSymbol:"-"},",":{infix:{symbol:",",f:function(){return Array.of.apply(Array,arguments)},notation:"infix",precedence:1,rightToLeft:0,argCount:2},symbol:",",regSymbol:","},"(":{prefix:{symbol:"(",f:b,notation:"prefix",precedence:0,rightToLeft:0,argCount:1},symbol:"(",regSymbol:"\\("},")":{postfix:{symbol:")",f:void 0,notation:"postfix",precedence:0,rightToLeft:0,argCount:1},symbol:")",regSymbol:"\\)"},min:{func:{symbol:"min",f:function(){return Math.min.apply(Math,arguments)},notation:"func",precedence:0,rightToLeft:0,argCount:1},symbol:"min",regSymbol:"min\\b"},max:{func:{symbol:"max",f:function(){return Math.max.apply(Math,arguments)},notation:"func",precedence:0,rightToLeft:0,argCount:1},symbol:"max",regSymbol:"max\\b"},sqrt:{func:{symbol:"sqrt",f:function(e){return Math.sqrt(e)},notation:"func",precedence:0,rightToLeft:0,argCount:1},symbol:"sqrt",regSymbol:"sqrt\\b"}}};var g=function(e){function t(t){var a;return a=e.call(this,"An error occurred. See https://github.com/styled-components/polished/blob/main/src/internalHelpers/errors.md#"+t+" for more information.")||this,c.default(a)}return d.default(t,e),t}(p.default(Error)),v=/((?!\w)a|na|hc|mc|dg|me[r]?|xe|ni(?![a-zA-Z])|mm|cp|tp|xp|q(?!s)|hv|xamv|nimv|wv|sm|s(?!\D|$)|ged|darg?|nrut)/g;function y(e,t){var a,r=e.pop();return t.push(r.f.apply(r,(a=[]).concat.apply(a,t.splice(-r.argCount)))),r.precedence}function h(e,t){var a,r=function(e){var t={};return t.symbols=e?u.default({},m.symbols,e.symbols):u.default({},m.symbols),t}(t),n=[r.symbols["("].prefix],i=[],l=new RegExp("\\d+(?:\\.\\d+)?|"+Object.keys(r.symbols).map((function(e){return r.symbols[e]})).sort((function(e,t){return t.symbol.length-e.symbol.length})).map((function(e){return e.regSymbol})).join("|")+"|(\\S)","g");l.lastIndex=0;var o=!1;do{var s=(a=l.exec(e))||[")",void 0],c=s[0],d=s[1],p=r.symbols[c],f=p&&!p.prefix&&!p.func,b=!p||!p.postfix&&!p.infix;if(d||(o?b:f))throw new g(37,a?a.index:e.length,e);if(o){var v=p.postfix||p.infix;do{var h=n[n.length-1];if((v.precedence-h.precedence||h.rightToLeft)>0)break}while(y(n,i));o="postfix"===v.notation,")"!==v.symbol&&(n.push(v),o&&y(n,i))}else if(p){if(n.push(p.prefix||p.func),p.func&&(!(a=l.exec(e))||"("!==a[0]))throw new g(38,a?a.index:e.length,e)}else i.push(+c),o=!0}while(a&&n.length);if(n.length)throw new g(39,a?a.index:e.length,e);if(a)throw new g(40,a?a.index:e.length,e);return i.pop()}function E(e){return e.split("").reverse().join("")}var x=/--[\S]*/g;function w(e){return e.charAt(0).toUpperCase()+e.slice(1)}var O=["Top","Right","Bottom","Left"];function k(e,t){if(!e)return t.toLowerCase();var a=e.split("-");if(a.length>1)return a.splice(1,0,t),a.reduce((function(e,t){return""+e+w(t)}));var r=e.replace(/([a-z])([A-Z])/g,"$1"+t+"$2");return e===r?""+e+t:r}function S(e,t){for(var a={},r=0;r<t.length;r+=1)(t[r]||0===t[r])&&(a[k(e,O[r])]=t[r]);return a}function C(e){for(var t=arguments.length,a=new Array(t>1?t-1:0),r=1;r<t;r++)a[r-1]=arguments[r];var n=a[0],i=a[1],l=void 0===i?n:i,o=a[2],s=void 0===o?n:o,u=a[3],c=void 0===u?l:u,d=[n,l,s,c];return S(e,d)}function T(e,t){return e.substr(-t.length)===t}var F=/^([+-]?(?:\d+|\d*\.\d+))([a-z]*|%)$/;function j(e,t){if("string"!=typeof e)return t?[e,void 0]:e;var a=e.match(F);return t?(console.warn("stripUnit's unitReturn functionality has been marked for deprecation in polished 4.0. It's functionality has been been moved to getValueAndUnit."),a?[parseFloat(e),a[2]]:[e,void 0]):a?parseFloat(e):e}var I=function(e){return function(t,a){void 0===a&&(a="16px");var r=t,n=a;if("string"==typeof t){if(!T(t,"px"))throw new g(69,e,t);r=j(t)}if("string"==typeof a){if(!T(a,"px"))throw new g(70,e,a);n=j(a)}if("string"==typeof r)throw new g(71,t,e);if("string"==typeof n)throw new g(72,a,e);return""+r/n+e}},M=I("em"),P=/^([+-]?(?:\d+|\d*\.\d+))([a-z]*|%)$/;function A(e){if("string"!=typeof e)return[e,""];var t=e.match(P);return t?[parseFloat(e),t[2]]:[e,void 0]}var D={minorSecond:1.067,majorSecond:1.125,minorThird:1.2,majorThird:1.25,perfectFourth:1.333,augFourth:1.414,perfectFifth:1.5,minorSixth:1.6,goldenSection:1.618,majorSixth:1.667,minorSeventh:1.778,majorSeventh:1.875,octave:2,majorTenth:2.5,majorEleventh:2.667,majorTwelfth:3,doubleOctave:4};var V=I("rem");function z(e,t,a,r){void 0===a&&(a="320px"),void 0===r&&(r="1200px");var n=A(e),i=n[0],l=n[1],o=A(t),s=o[0],u=o[1],c=A(a),d=c[0],p=c[1],f=A(r),b=f[0],m=f[1];if("number"!=typeof d||"number"!=typeof b||!p||!m||p!==m)throw new g(47);if("number"!=typeof i||"number"!=typeof s||l!==u)throw new g(48);if(l!==p||u!==m)throw new g(75);var v=(i-s)/(d-b);return"calc("+(s-v*b).toFixed(2)+(l||"")+" + "+(100*v).toFixed(2)+"vw)"}function _(e,t){var a="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(a)return(a=a.call(e)).next.bind(a);if(Array.isArray(e)||(a=function(e,t){if(!e)return;if("string"==typeof e)return B(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return B(e,t)}(e))||t&&e&&"number"==typeof e.length){a&&(e=a);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function B(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r}var R,$,L=/^\s*data:([a-z]+\/[a-z-]+(;[a-z-]+=[a-z-]+)?)?(;charset=[a-z0-9-]+)?(;base64)?,[a-z0-9!$&',()*+,;=\-._~:@/?%\s]*\s*$/i,N={woff:"woff",woff2:"woff2",ttf:"truetype",otf:"opentype",eot:"embedded-opentype",svg:"svg",svgz:"svg"};function W(e,t){return t?' format("'+N[e]+'")':""}function q(e,t,a){return function(e){return!!e.replace(/\s+/g," ").match(L)}(e)?'url("'+e+'")'+W(t[0],a):t.map((function(t){return'url("'+e+"."+t+'")'+W(t,a)})).join(", ")}function U(e,t,a,r){var n=[];return t&&n.push(function(e){return e.map((function(e){return'local("'+e+'")'})).join(", ")}(t)),e&&n.push(q(e,a,r)),n.join(", ")}function G(e){return void 0===e&&(e=1.3),"\n    @media only screen and (-webkit-min-device-pixel-ratio: "+e+"),\n    only screen and (min--moz-device-pixel-ratio: "+e+"),\n    only screen and (-o-min-device-pixel-ratio: "+e+"/1),\n    only screen and (min-resolution: "+Math.round(96*e)+"dpi),\n    only screen and (min-resolution: "+e+"dppx)\n  "}function H(e){for(var t="",a=arguments.length,r=new Array(a>1?a-1:0),n=1;n<a;n++)r[n-1]=arguments[n];for(var i=0;i<e.length;i+=1)if(t+=e[i],i===r.length-1&&r[i]){var l=r.filter((function(e){return!!e}));l.length>1?(t=t.slice(0,-1),t+=", "+r[i]):1===l.length&&(t+=""+r[i])}else r[i]&&(t+=r[i]+" ");return t.trim()}var X={easeInBack:"cubic-bezier(0.600, -0.280, 0.735, 0.045)",easeInCirc:"cubic-bezier(0.600,  0.040, 0.980, 0.335)",easeInCubic:"cubic-bezier(0.550,  0.055, 0.675, 0.190)",easeInExpo:"cubic-bezier(0.950,  0.050, 0.795, 0.035)",easeInQuad:"cubic-bezier(0.550,  0.085, 0.680, 0.530)",easeInQuart:"cubic-bezier(0.895,  0.030, 0.685, 0.220)",easeInQuint:"cubic-bezier(0.755,  0.050, 0.855, 0.060)",easeInSine:"cubic-bezier(0.470,  0.000, 0.745, 0.715)",easeOutBack:"cubic-bezier(0.175,  0.885, 0.320, 1.275)",easeOutCubic:"cubic-bezier(0.215,  0.610, 0.355, 1.000)",easeOutCirc:"cubic-bezier(0.075,  0.820, 0.165, 1.000)",easeOutExpo:"cubic-bezier(0.190,  1.000, 0.220, 1.000)",easeOutQuad:"cubic-bezier(0.250,  0.460, 0.450, 0.940)",easeOutQuart:"cubic-bezier(0.165,  0.840, 0.440, 1.000)",easeOutQuint:"cubic-bezier(0.230,  1.000, 0.320, 1.000)",easeOutSine:"cubic-bezier(0.390,  0.575, 0.565, 1.000)",easeInOutBack:"cubic-bezier(0.680, -0.550, 0.265, 1.550)",easeInOutCirc:"cubic-bezier(0.785,  0.135, 0.150, 0.860)",easeInOutCubic:"cubic-bezier(0.645,  0.045, 0.355, 1.000)",easeInOutExpo:"cubic-bezier(1.000,  0.000, 0.000, 1.000)",easeInOutQuad:"cubic-bezier(0.455,  0.030, 0.515, 0.955)",easeInOutQuart:"cubic-bezier(0.770,  0.000, 0.175, 1.000)",easeInOutQuint:"cubic-bezier(0.860,  0.000, 0.070, 1.000)",easeInOutSine:"cubic-bezier(0.445,  0.050, 0.550, 0.950)"};var K=function(e,t,a){var r=""+a[0]+(a[1]||""),n=""+a[0]/2+(a[1]||""),i=""+t[0]+(t[1]||""),l=""+t[0]/2+(t[1]||"");switch(e){case"top":return"0 "+n+" "+i+" "+n;case"topLeft":return r+" "+i+" 0 0";case"left":return l+" "+r+" "+l+" 0";case"bottomLeft":return r+" 0 0 "+i;case"bottom":return i+" "+n+" 0 "+n;case"bottomRight":return"0 0 "+r+" "+i;case"right":return l+" 0 "+l+" "+r;case"topRight":default:return"0 "+r+" "+i+" 0"}};function Q(e){return Math.round(255*e)}function J(e,t,a){return Q(e)+","+Q(t)+","+Q(a)}function Y(e,t,a,r){if(void 0===r&&(r=J),0===t)return r(a,a,a);var n=(e%360+360)%360/60,i=(1-Math.abs(2*a-1))*t,l=i*(1-Math.abs(n%2-1)),o=0,s=0,u=0;n>=0&&n<1?(o=i,s=l):n>=1&&n<2?(o=l,s=i):n>=2&&n<3?(s=i,u=l):n>=3&&n<4?(s=l,u=i):n>=4&&n<5?(o=l,u=i):n>=5&&n<6&&(o=i,u=l);var c=a-i/2;return r(o+c,s+c,u+c)}var Z={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"639",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"};var ee=/^#[a-fA-F0-9]{6}$/,te=/^#[a-fA-F0-9]{8}$/,ae=/^#[a-fA-F0-9]{3}$/,re=/^#[a-fA-F0-9]{4}$/,ne=/^rgb\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*\)$/i,ie=/^rgba\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*([-+]?[0-9]*[.]?[0-9]+)\s*\)$/i,le=/^hsl\(\s*(\d{0,3}[.]?[0-9]+)\s*,\s*(\d{1,3}[.]?[0-9]?)%\s*,\s*(\d{1,3}[.]?[0-9]?)%\s*\)$/i,oe=/^hsla\(\s*(\d{0,3}[.]?[0-9]+)\s*,\s*(\d{1,3}[.]?[0-9]?)%\s*,\s*(\d{1,3}[.]?[0-9]?)%\s*,\s*([-+]?[0-9]*[.]?[0-9]+)\s*\)$/i;function se(e){if("string"!=typeof e)throw new g(3);var t=function(e){if("string"!=typeof e)return e;var t=e.toLowerCase();return Z[t]?"#"+Z[t]:e}(e);if(t.match(ee))return{red:parseInt(""+t[1]+t[2],16),green:parseInt(""+t[3]+t[4],16),blue:parseInt(""+t[5]+t[6],16)};if(t.match(te)){var a=parseFloat((parseInt(""+t[7]+t[8],16)/255).toFixed(2));return{red:parseInt(""+t[1]+t[2],16),green:parseInt(""+t[3]+t[4],16),blue:parseInt(""+t[5]+t[6],16),alpha:a}}if(t.match(ae))return{red:parseInt(""+t[1]+t[1],16),green:parseInt(""+t[2]+t[2],16),blue:parseInt(""+t[3]+t[3],16)};if(t.match(re)){var r=parseFloat((parseInt(""+t[4]+t[4],16)/255).toFixed(2));return{red:parseInt(""+t[1]+t[1],16),green:parseInt(""+t[2]+t[2],16),blue:parseInt(""+t[3]+t[3],16),alpha:r}}var n=ne.exec(t);if(n)return{red:parseInt(""+n[1],10),green:parseInt(""+n[2],10),blue:parseInt(""+n[3],10)};var i=ie.exec(t.substring(0,50));if(i)return{red:parseInt(""+i[1],10),green:parseInt(""+i[2],10),blue:parseInt(""+i[3],10),alpha:parseFloat(""+i[4])};var l=le.exec(t);if(l){var o="rgb("+Y(parseInt(""+l[1],10),parseInt(""+l[2],10)/100,parseInt(""+l[3],10)/100)+")",s=ne.exec(o);if(!s)throw new g(4,t,o);return{red:parseInt(""+s[1],10),green:parseInt(""+s[2],10),blue:parseInt(""+s[3],10)}}var u=oe.exec(t.substring(0,50));if(u){var c="rgb("+Y(parseInt(""+u[1],10),parseInt(""+u[2],10)/100,parseInt(""+u[3],10)/100)+")",d=ne.exec(c);if(!d)throw new g(4,t,c);return{red:parseInt(""+d[1],10),green:parseInt(""+d[2],10),blue:parseInt(""+d[3],10),alpha:parseFloat(""+u[4])}}throw new g(5)}function ue(e){return function(e){var t,a=e.red/255,r=e.green/255,n=e.blue/255,i=Math.max(a,r,n),l=Math.min(a,r,n),o=(i+l)/2;if(i===l)return void 0!==e.alpha?{hue:0,saturation:0,lightness:o,alpha:e.alpha}:{hue:0,saturation:0,lightness:o};var s=i-l,u=o>.5?s/(2-i-l):s/(i+l);switch(i){case a:t=(r-n)/s+(r<n?6:0);break;case r:t=(n-a)/s+2;break;default:t=(a-r)/s+4}return t*=60,void 0!==e.alpha?{hue:t,saturation:u,lightness:o,alpha:e.alpha}:{hue:t,saturation:u,lightness:o}}(se(e))}var ce=function(e){return 7===e.length&&e[1]===e[2]&&e[3]===e[4]&&e[5]===e[6]?"#"+e[1]+e[3]+e[5]:e};function de(e){var t=e.toString(16);return 1===t.length?"0"+t:t}function pe(e){return de(Math.round(255*e))}function fe(e,t,a){return ce("#"+pe(e)+pe(t)+pe(a))}function be(e,t,a){return Y(e,t,a,fe)}function me(e,t,a){if("number"==typeof e&&"number"==typeof t&&"number"==typeof a)return be(e,t,a);if("object"==typeof e&&void 0===t&&void 0===a)return be(e.hue,e.saturation,e.lightness);throw new g(1)}function ge(e,t,a,r){if("number"==typeof e&&"number"==typeof t&&"number"==typeof a&&"number"==typeof r)return r>=1?be(e,t,a):"rgba("+Y(e,t,a)+","+r+")";if("object"==typeof e&&void 0===t&&void 0===a&&void 0===r)return e.alpha>=1?be(e.hue,e.saturation,e.lightness):"rgba("+Y(e.hue,e.saturation,e.lightness)+","+e.alpha+")";throw new g(2)}function ve(e,t,a){if("number"==typeof e&&"number"==typeof t&&"number"==typeof a)return ce("#"+de(e)+de(t)+de(a));if("object"==typeof e&&void 0===t&&void 0===a)return ce("#"+de(e.red)+de(e.green)+de(e.blue));throw new g(6)}function ye(e,t,a,r){if("string"==typeof e&&"number"==typeof t){var n=se(e);return"rgba("+n.red+","+n.green+","+n.blue+","+t+")"}if("number"==typeof e&&"number"==typeof t&&"number"==typeof a&&"number"==typeof r)return r>=1?ve(e,t,a):"rgba("+e+","+t+","+a+","+r+")";if("object"==typeof e&&void 0===t&&void 0===a&&void 0===r)return e.alpha>=1?ve(e.red,e.green,e.blue):"rgba("+e.red+","+e.green+","+e.blue+","+e.alpha+")";throw new g(7)}function he(e){if("object"!=typeof e)throw new g(8);if(function(e){return"number"==typeof e.red&&"number"==typeof e.green&&"number"==typeof e.blue&&"number"==typeof e.alpha}(e))return ye(e);if(function(e){return"number"==typeof e.red&&"number"==typeof e.green&&"number"==typeof e.blue&&("number"!=typeof e.alpha||void 0===e.alpha)}(e))return ve(e);if(function(e){return"number"==typeof e.hue&&"number"==typeof e.saturation&&"number"==typeof e.lightness&&"number"==typeof e.alpha}(e))return ge(e);if(function(e){return"number"==typeof e.hue&&"number"==typeof e.saturation&&"number"==typeof e.lightness&&("number"!=typeof e.alpha||void 0===e.alpha)}(e))return me(e);throw new g(8)}function Ee(e,t,a){return function(){var r=a.concat(Array.prototype.slice.call(arguments));return r.length>=t?e.apply(this,r):Ee(e,t,r)}}function xe(e){return Ee(e,e.length,[])}function we(e,t){if("transparent"===t)return t;var a=ue(t);return he(u.default({},a,{hue:a.hue+parseFloat(e)}))}var Oe=xe(we);function ke(e,t,a){return Math.max(e,Math.min(t,a))}function Se(e,t){if("transparent"===t)return t;var a=ue(t);return he(u.default({},a,{lightness:ke(0,1,a.lightness-parseFloat(e))}))}var Ce=xe(Se);function Te(e,t){if("transparent"===t)return t;var a=ue(t);return he(u.default({},a,{saturation:ke(0,1,a.saturation-parseFloat(e))}))}var Fe=xe(Te);function je(e){if("transparent"===e)return 0;var t=se(e),a=Object.keys(t).map((function(e){var a=t[e]/255;return a<=.03928?a/12.92:Math.pow((a+.055)/1.055,2.4)})),r=a[0],n=a[1],i=a[2];return parseFloat((.2126*r+.7152*n+.0722*i).toFixed(3))}function Ie(e,t){var a=je(e),r=je(t);return parseFloat((a>r?(a+.05)/(r+.05):(r+.05)/(a+.05)).toFixed(2))}function Me(e,t){if("transparent"===t)return t;var a=ue(t);return he(u.default({},a,{lightness:ke(0,1,a.lightness+parseFloat(e))}))}var Pe=xe(Me);function Ae(e,t,a){if("transparent"===t)return a;if("transparent"===a)return t;if(0===e)return a;var r=se(t),n=u.default({},r,{alpha:"number"==typeof r.alpha?r.alpha:1}),i=se(a),l=u.default({},i,{alpha:"number"==typeof i.alpha?i.alpha:1}),o=n.alpha-l.alpha,s=2*parseFloat(e)-1,c=((s*o==-1?s:s+o)/(1+s*o)+1)/2,d=1-c;return ye({red:Math.floor(n.red*c+l.red*d),green:Math.floor(n.green*c+l.green*d),blue:Math.floor(n.blue*c+l.blue*d),alpha:n.alpha*(parseFloat(e)/1)+l.alpha*(1-parseFloat(e)/1)})}var De=xe(Ae);function Ve(e,t){if("transparent"===t)return t;var a=se(t),r="number"==typeof a.alpha?a.alpha:1;return ye(u.default({},a,{alpha:ke(0,1,(100*r+100*parseFloat(e))/100)}))}var ze=xe(Ve),_e="#000",Be="#fff";function Re(e,t){if("transparent"===t)return t;var a=ue(t);return he(u.default({},a,{saturation:ke(0,1,a.saturation+parseFloat(e))}))}var $e=xe(Re);function Le(e,t){return"transparent"===t?t:he(u.default({},ue(t),{hue:parseFloat(e)}))}var Ne=xe(Le);function We(e,t){return"transparent"===t?t:he(u.default({},ue(t),{lightness:parseFloat(e)}))}var qe=xe(We);function Ue(e,t){return"transparent"===t?t:he(u.default({},ue(t),{saturation:parseFloat(e)}))}var Ge=xe(Ue);function He(e,t){return"transparent"===t?t:De(parseFloat(e),"rgb(0, 0, 0)",t)}var Xe=xe(He);function Ke(e,t){return"transparent"===t?t:De(parseFloat(e),"rgb(255, 255, 255)",t)}var Qe=xe(Ke);function Je(e,t){if("transparent"===t)return t;var a=se(t),r="number"==typeof a.alpha?a.alpha:1;return ye(u.default({},a,{alpha:ke(0,1,+(100*r-100*parseFloat(e)).toFixed(2)/100)}))}var Ye=xe(Je);var Ze=["top","right","bottom","left"];function et(e,t){return e(t?":"+t:"")}function tt(e,t,a){if(!t)throw new g(67);if(0===e.length)return et(t,null);for(var r=[],n=0;n<e.length;n+=1){if(a&&a.indexOf(e[n])<0)throw new g(68);r.push(et(t,e[n]))}return r=r.join(",")}var at=[void 0,null,"active","focus","hover"];function rt(e){return"button"+e+',\n  input[type="button"]'+e+',\n  input[type="reset"]'+e+',\n  input[type="submit"]'+e}var nt=["absolute","fixed","relative","static","sticky"];var it=[void 0,null,"active","focus","hover"];function lt(e){return'input[type="color"]'+e+',\n    input[type="date"]'+e+',\n    input[type="datetime"]'+e+',\n    input[type="datetime-local"]'+e+',\n    input[type="email"]'+e+',\n    input[type="month"]'+e+',\n    input[type="number"]'+e+',\n    input[type="password"]'+e+',\n    input[type="search"]'+e+',\n    input[type="tel"]'+e+',\n    input[type="text"]'+e+',\n    input[type="time"]'+e+',\n    input[type="url"]'+e+',\n    input[type="week"]'+e+",\n    input:not([type])"+e+",\n    textarea"+e}t.adjustHue=Oe,t.animation=function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];var r=Array.isArray(t[0]);if(!r&&t.length>8)throw new g(64);var n=t.map((function(e){if(r&&!Array.isArray(e)||!r&&Array.isArray(e))throw new g(65);if(Array.isArray(e)&&e.length>8)throw new g(66);return Array.isArray(e)?e.join(" "):e})).join(", ");return{animation:n}},t.backgroundImages=function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return{backgroundImage:t.join(", ")}},t.backgrounds=function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return{background:t.join(", ")}},t.between=z,t.border=function(e){for(var t=arguments.length,a=new Array(t>1?t-1:0),r=1;r<t;r++)a[r-1]=arguments[r];var n;return"string"==typeof e&&Ze.indexOf(e)>=0?((n={})["border"+w(e)+"Width"]=a[0],n["border"+w(e)+"Style"]=a[1],n["border"+w(e)+"Color"]=a[2],n):(a.unshift(e),{borderWidth:a[0],borderStyle:a[1],borderColor:a[2]})},t.borderColor=function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return C.apply(void 0,["borderColor"].concat(t))},t.borderRadius=function(e,t){var a,r,n=w(e);if(!t&&0!==t)throw new g(62);if("Top"===n||"Bottom"===n)return(a={})["border"+n+"RightRadius"]=t,a["border"+n+"LeftRadius"]=t,a;if("Left"===n||"Right"===n)return(r={})["borderTop"+n+"Radius"]=t,r["borderBottom"+n+"Radius"]=t,r;throw new g(63)},t.borderStyle=function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return C.apply(void 0,["borderStyle"].concat(t))},t.borderWidth=function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return C.apply(void 0,["borderWidth"].concat(t))},t.buttons=function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return tt(t,rt,at)},t.clearFix=function(e){var t;return void 0===e&&(e="&"),(t={})[e+"::after"]={clear:"both",content:'""',display:"table"},t},t.complement=function(e){if("transparent"===e)return e;var t=ue(e);return he(u.default({},t,{hue:(t.hue+180)%360}))},t.cover=function(e){return void 0===e&&(e=0),{position:"absolute",top:e,right:e,bottom:e,left:e}},t.cssVar=function(e,t){if(!e||!e.match(x)){if(t)return e;throw new g(73)}var a;if("undefined"!=typeof document&&null!==document.documentElement&&(a=getComputedStyle(document.documentElement).getPropertyValue(e)),a)return a.trim();throw new g(74)},t.darken=Ce,t.desaturate=Fe,t.directionalProperty=C,t.ellipsis=function(e){return void 0===e&&(e="100%"),{display:"inline-block",maxWidth:e,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",wordWrap:"normal"}},t.em=M,t.fluidRange=function(e,t,a){if(void 0===t&&(t="320px"),void 0===a&&(a="1200px"),!Array.isArray(e)&&"object"!=typeof e||null===e)throw new g(49);if(Array.isArray(e)){for(var r,n={},i={},l=_(e);!(r=l()).done;){var o,s,c=r.value;if(!c.prop||!c.fromSize||!c.toSize)throw new g(50);i[c.prop]=c.fromSize,n["@media (min-width: "+t+")"]=u.default({},n["@media (min-width: "+t+")"],((o={})[c.prop]=z(c.fromSize,c.toSize,t,a),o)),n["@media (min-width: "+a+")"]=u.default({},n["@media (min-width: "+a+")"],((s={})[c.prop]=c.toSize,s))}return u.default({},i,n)}var d,p,f;if(!e.prop||!e.fromSize||!e.toSize)throw new g(51);return(f={})[e.prop]=e.fromSize,f["@media (min-width: "+t+")"]=((d={})[e.prop]=z(e.fromSize,e.toSize,t,a),d),f["@media (min-width: "+a+")"]=((p={})[e.prop]=e.toSize,p),f},t.fontFace=function(e){var t=e.fontFamily,a=e.fontFilePath,r=e.fontStretch,n=e.fontStyle,i=e.fontVariant,l=e.fontWeight,o=e.fileFormats,s=void 0===o?["eot","woff2","woff","ttf","svg"]:o,u=e.formatHint,c=void 0!==u&&u,d=e.localFonts,p=e.unicodeRange,f=e.fontDisplay,b=e.fontVariationSettings,m=e.fontFeatureSettings;if(!t)throw new g(55);if(!a&&!d)throw new g(52);if(d&&!Array.isArray(d))throw new g(53);if(!Array.isArray(s))throw new g(54);var v={"@font-face":{fontFamily:t,src:U(a,d,s,c),unicodeRange:p,fontStretch:r,fontStyle:n,fontVariant:i,fontWeight:l,fontDisplay:f,fontVariationSettings:b,fontFeatureSettings:m}};return JSON.parse(JSON.stringify(v))},t.getContrast=Ie,t.getLuminance=je,t.getValueAndUnit=A,t.grayscale=function(e){return"transparent"===e?e:he(u.default({},ue(e),{saturation:0}))},t.hiDPI=G,t.hideText=function(){return{textIndent:"101%",overflow:"hidden",whiteSpace:"nowrap"}},t.hideVisually=function(){return{border:"0",clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:"0",position:"absolute",whiteSpace:"nowrap",width:"1px"}},t.hsl=me,t.hslToColorString=function(e){if("object"==typeof e&&"number"==typeof e.hue&&"number"==typeof e.saturation&&"number"==typeof e.lightness)return e.alpha&&"number"==typeof e.alpha?ge({hue:e.hue,saturation:e.saturation,lightness:e.lightness,alpha:e.alpha}):me({hue:e.hue,saturation:e.saturation,lightness:e.lightness});throw new g(45)},t.hsla=ge,t.invert=function(e){if("transparent"===e)return e;var t=se(e);return he(u.default({},t,{red:255-t.red,green:255-t.green,blue:255-t.blue}))},t.lighten=Pe,t.linearGradient=function(e){var t=e.colorStops,a=e.fallback,r=e.toDirection,n=void 0===r?"":r;if(!t||t.length<2)throw new g(56);return{backgroundColor:a||t[0].replace(/,\s+/g,",").split(" ")[0].replace(/,(?=\S)/g,", "),backgroundImage:H(R||(R=f.default(["linear-gradient(","",")"])),n,t.join(", ").replace(/,(?=\S)/g,", "))}},t.margin=function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return C.apply(void 0,["margin"].concat(t))},t.math=function(e,t){var a=E(e),r=a.match(v);if(r&&!r.every((function(e){return e===r[0]})))throw new g(41);return""+h(E(a.replace(v,"")),t)+(r?E(r[0]):"")},t.meetsContrastGuidelines=function(e,t){var a=Ie(e,t);return{AA:a>=4.5,AALarge:a>=3,AAA:a>=7,AAALarge:a>=4.5}},t.mix=De,t.modularScale=function(e,t,a){if(void 0===t&&(t="1em"),void 0===a&&(a=1.333),"number"!=typeof e)throw new g(42);if("string"==typeof a&&!D[a])throw new g(43);var r="string"==typeof t?A(t):[t,""],n=r[0],i=r[1],l="string"==typeof a?D[a]:a;if("string"==typeof n)throw new g(44,t);return""+n*Math.pow(l,e)+(i||"")},t.normalize=function(){var e;return[(e={html:{lineHeight:"1.15",textSizeAdjust:"100%"},body:{margin:"0"},main:{display:"block"},h1:{fontSize:"2em",margin:"0.67em 0"},hr:{boxSizing:"content-box",height:"0",overflow:"visible"},pre:{fontFamily:"monospace, monospace",fontSize:"1em"},a:{backgroundColor:"transparent"},"abbr[title]":{borderBottom:"none",textDecoration:"underline"}},e["b,\n    strong"]={fontWeight:"bolder"},e["code,\n    kbd,\n    samp"]={fontFamily:"monospace, monospace",fontSize:"1em"},e.small={fontSize:"80%"},e["sub,\n    sup"]={fontSize:"75%",lineHeight:"0",position:"relative",verticalAlign:"baseline"},e.sub={bottom:"-0.25em"},e.sup={top:"-0.5em"},e.img={borderStyle:"none"},e["button,\n    input,\n    optgroup,\n    select,\n    textarea"]={fontFamily:"inherit",fontSize:"100%",lineHeight:"1.15",margin:"0"},e["button,\n    input"]={overflow:"visible"},e["button,\n    select"]={textTransform:"none"},e['button,\n    html [type="button"],\n    [type="reset"],\n    [type="submit"]']={WebkitAppearance:"button"},e['button::-moz-focus-inner,\n    [type="button"]::-moz-focus-inner,\n    [type="reset"]::-moz-focus-inner,\n    [type="submit"]::-moz-focus-inner']={borderStyle:"none",padding:"0"},e['button:-moz-focusring,\n    [type="button"]:-moz-focusring,\n    [type="reset"]:-moz-focusring,\n    [type="submit"]:-moz-focusring']={outline:"1px dotted ButtonText"},e.fieldset={padding:"0.35em 0.625em 0.75em"},e.legend={boxSizing:"border-box",color:"inherit",display:"table",maxWidth:"100%",padding:"0",whiteSpace:"normal"},e.progress={verticalAlign:"baseline"},e.textarea={overflow:"auto"},e['[type="checkbox"],\n    [type="radio"]']={boxSizing:"border-box",padding:"0"},e['[type="number"]::-webkit-inner-spin-button,\n    [type="number"]::-webkit-outer-spin-button']={height:"auto"},e['[type="search"]']={WebkitAppearance:"textfield",outlineOffset:"-2px"},e['[type="search"]::-webkit-search-decoration']={WebkitAppearance:"none"},e["::-webkit-file-upload-button"]={WebkitAppearance:"button",font:"inherit"},e.details={display:"block"},e.summary={display:"list-item"},e.template={display:"none"},e["[hidden]"]={display:"none"},e),{"abbr[title]":{textDecoration:"underline dotted"}}]},t.opacify=ze,t.padding=function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return C.apply(void 0,["padding"].concat(t))},t.parseToHsl=ue,t.parseToRgb=se,t.position=function(e){for(var t=arguments.length,a=new Array(t>1?t-1:0),r=1;r<t;r++)a[r-1]=arguments[r];return nt.indexOf(e)>=0&&e?u.default({},C.apply(void 0,[""].concat(a)),{position:e}):C.apply(void 0,["",e].concat(a))},t.radialGradient=function(e){var t=e.colorStops,a=e.extent,r=void 0===a?"":a,n=e.fallback,i=e.position,l=void 0===i?"":i,o=e.shape,s=void 0===o?"":o;if(!t||t.length<2)throw new g(57);return{backgroundColor:n||t[0].split(" ")[0],backgroundImage:H($||($=f.default(["radial-gradient(","","","",")"])),l,s,r,t.join(", "))}},t.readableColor=function(e,t,a,r){void 0===t&&(t=_e),void 0===a&&(a=Be),void 0===r&&(r=!0);var n=je(e)>.179,i=n?t:a;return!r||Ie(e,i)>=4.5?i:n?_e:Be},t.rem=V,t.retinaImage=function(e,t,a,r,n){var i;if(void 0===a&&(a="png"),void 0===n&&(n="_2x"),!e)throw new g(58);var l=a.replace(/^\./,""),o=r?r+"."+l:""+e+n+"."+l;return(i={backgroundImage:"url("+e+"."+l+")"})[G()]=u.default({backgroundImage:"url("+o+")"},t?{backgroundSize:t}:{}),i},t.rgb=ve,t.rgbToColorString=function(e){if("object"==typeof e&&"number"==typeof e.red&&"number"==typeof e.green&&"number"==typeof e.blue)return"number"==typeof e.alpha?ye({red:e.red,green:e.green,blue:e.blue,alpha:e.alpha}):ve({red:e.red,green:e.green,blue:e.blue});throw new g(46)},t.rgba=ye,t.saturate=$e,t.setHue=Ne,t.setLightness=qe,t.setSaturation=Ge,t.shade=Xe,t.size=function(e,t){return void 0===t&&(t=e),{height:e,width:t}},t.stripUnit=j,t.textInputs=function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return tt(t,lt,it)},t.timingFunctions=function(e){return X[e]},t.tint=Qe,t.toColorString=he,t.transitions=function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];if(Array.isArray(t[0])&&2===t.length){var r=t[1];if("string"!=typeof r)throw new g(61);var n=t[0].map((function(e){return e+" "+r})).join(", ");return{transition:n}}return{transition:t.join(", ")}},t.transparentize=Ye,t.triangle=function(e){var t=e.pointingDirection,a=e.height,r=e.width,n=e.foregroundColor,i=e.backgroundColor,l=void 0===i?"transparent":i,o=A(r),s=A(a);if(isNaN(s[0])||isNaN(o[0]))throw new g(60);return u.default({width:"0",height:"0",borderColor:l},function(e,t){switch(e){case"top":case"bottomRight":return{borderBottomColor:t};case"right":case"bottomLeft":return{borderLeftColor:t};case"bottom":case"topLeft":return{borderTopColor:t};case"left":case"topRight":return{borderRightColor:t};default:throw new g(59)}}(t,n),{borderStyle:"solid",borderWidth:K(t,s,o)})},t.wordWrap=function(e){return void 0===e&&(e="break-word"),{overflowWrap:e,wordWrap:e,wordBreak:"break-word"===e?"break-all":e}}},123:function(e,t,a){"use strict";a.r(t),a.d(t,"buildFilterLabel",(function(){return u})),a.d(t,"FilterValueLabel",(function(){return c}));var r=a(1),n=a.n(r),i=a(76),l=a(23),o=a(50),s=a(15);function u({field:e,value:t,label:a,indexPattern:r,negate:n}){const i=r.getFieldByName(e),o=t instanceof Array&&t.length>1?Object(l.c)(i,t,r):Object(l.b)(i,t,r);return o.meta.type=t instanceof Array&&t.length>1?"phrases":"phrase",o.meta.value=t,o.meta.key=a,o.meta.alias=null,o.meta.negate=n,o.meta.disabled=!1,o}function c({label:e,field:t,value:a,negate:r,indexPattern:l,invertFilter:c,removeFilter:d,allowExclusion:p=!0}){const f=Object(i.injectI18n)(o.FilterItem),b=u({field:t,value:a,label:e,indexPattern:l,negate:r}),{services:{uiSettings:m}}=Object(s.useKibana)();return l?n.a.createElement(f,{indexPatterns:[l],id:`${t}-${a}-${r}`,filter:b,onRemove:()=>{d(t,a,!1)},onUpdate:e=>{e.meta.negate!==r&&c({field:t,value:a,negate:r})},uiSettings:m,hiddenPanelOptions:[...p?[]:["negateFilter"],"pinFilter","editFilter","disableFilter"]}):null}t.default=c},124:function(e,t,a){"use strict";a.r(t),a.d(t,"ExploratoryViewPage",(function(){return ia}));var r=a(1),n=a.n(r),i=a(0),l=a(33),o=a(17),s=a.n(o),u=a(20),c=a.n(u),d=a(7),p=a(15),f=a(86),b=a(102),m=a(88),g=a(122),v=a(45),y=a(120),h=a(43);const E="SELECT_REPORT_TYPE",x={reportType:E,label:i.i18n.translate("xpack.observability.expView.reportType.selectLabel",{defaultMessage:"Select report type"})};function w({prepend:e}){const{setReportType:t,reportType:a,allSeries:r}=Object(f.f)(),{reportTypes:i}=Object(h.b)(),l=[x,...i].filter((({reportType:e})=>!a||e!==E)).map((({reportType:e,label:t})=>({value:e,inputDisplay:e===E?t:n.a.createElement("strong",null,t),dropdownDisplay:t})));return n.a.createElement(d.EuiSuperSelect,{"aria-labelledby":"report-type-label",options:l,valueOfSelected:null!=a?a:E,onChange:e=>{t(e)},style:{minWidth:200},isInvalid:!a&&r.length>0,disabled:r.length>0,prepend:e})}var O=a(2);function k(e){const t=(a=e,Object(O.pickBy)(a,(e=>void 0!==e)));var a;return Object.entries(t).forEach((([e,a])=>{"object"==typeof a&&(t[e]=k(a))})),t}function S({onApply:e}){var t;const{allSeries:a,storage:r,applyChanges:l}=Object(f.f)(),o=Object(f.d)(null!==(t=r.get(f.c))&&void 0!==t?t:[]);let s=a.length===o.length;return s&&(s=!a.some(((e,t)=>!Object(O.isEqual)(k(e),k(o[t]))))),n.a.createElement(d.EuiFlexGroup,{justifyContent:"flexEnd",alignItems:"center"},n.a.createElement(d.EuiFlexItem,{grow:!1},n.a.createElement(d.EuiButton,{onClick:()=>l(e),isDisabled:s,fill:!0,"data-test-subj":"seriesChangesApplyButton"},i.i18n.translate("xpack.observability.expView.seriesBuilder.apply",{defaultMessage:"Apply changes"}))))}function C({seriesId:e}){const{removeSeries:t,allSeries:a}=Object(f.f)(),r=0===e&&a.length>1;return n.a.createElement(d.EuiToolTip,{content:r?i.i18n.translate("xpack.observability.expView.seriesEditor.removeSeriesDisabled",{defaultMessage:"Main series cannot be removed. Please remove all series below before you can remove this."}):i.i18n.translate("xpack.observability.expView.seriesEditor.removeSeries",{defaultMessage:"Remove series"})},n.a.createElement(d.EuiButtonIcon,{"aria-label":i.i18n.translate("xpack.observability.expView.seriesEditor.removeSeries",{defaultMessage:"Remove series"}),iconType:"trash",color:"text",onClick:()=>{t(e)},size:"s",isDisabled:r}))}var T=a(44),F=a(32),j=a(26);function I({seriesId:e,series:t,seriesConfig:a,onEditClick:i}){const{setSeries:l,allSeries:o}=Object(f.f)(),{href:s}=(({series:e,seriesConfig:t})=>{var a;const n=Object(T.a)().services,{application:{navigateToUrl:i}}=n,{indexPatterns:l}=Object(m.b)(),o=null===(a=n.discover)||void 0===a?void 0:a.urlGenerator,[s,u]=Object(r.useState)("");Object(r.useEffect)((()=>{const a=null==l?void 0:l[e.dataType];if(a){var r,n;const i=null!==(r=e.reportDefinitions)&&void 0!==r?r:{},l=(null!==(n=e.filters)&&void 0!==n?n:[]).concat(Object(b.a)(i)),s=Object(F.g)({indexPattern:a,urlFilters:l,initFilters:null==t?void 0:t.baseFilters}),c=e.selectedMetricField;c&&c!==j.j&&c!==j.k&&s.push(Object(F.a)(c,a)[0]),(async()=>{if(null==o||!o.createUrl)return;const e=await o.createUrl({filters:s,indexPatternId:null==a?void 0:a.id});u(e)})()}}),[l,e.dataType,e.filters,e.reportDefinitions,e.selectedMetricField,null==t?void 0:t.baseFilters,o]);const c=Object(r.useCallback)((e=>{if(s)return e.preventDefault(),i(s)}),[s,i]);return{href:s,onClick:c}})({series:t,seriesConfig:a}),{indexPatterns:u}=Object(m.b)(),c=null==u?void 0:u[t.dataType];return n.a.createElement(d.EuiFlexGroup,{alignItems:"center",gutterSize:"none",justifyContent:"flexEnd",responsive:!1},n.a.createElement(d.EuiFlexItem,{grow:!1},n.a.createElement(d.EuiToolTip,{content:M},n.a.createElement(d.EuiButtonIcon,{iconType:"pencil",color:"text","aria-label":M,size:"s",onClick:i}))),n.a.createElement(d.EuiFlexItem,{grow:!1},n.a.createElement(d.EuiToolTip,{content:D},n.a.createElement(d.EuiButtonIcon,{iconType:"discoverApp","aria-label":D,size:"s",color:"text",target:"_blank",href:s,isDisabled:!t.dataType||!t.selectedMetricField||!c}))),n.a.createElement(d.EuiFlexItem,{grow:!1},n.a.createElement(d.EuiToolTip,{content:P},n.a.createElement(d.EuiButtonIcon,{iconType:t.hidden?"eyeClosed":"eye","aria-label":P,size:"s",color:"text",onClick:()=>{t.hidden?l(e,{...t,hidden:void 0}):l(e,{...t,hidden:!0})}}))),n.a.createElement(d.EuiFlexItem,{grow:!1},n.a.createElement(d.EuiToolTip,{content:A},n.a.createElement(d.EuiButtonIcon,{iconType:"copy",color:"text","aria-label":A,size:"s",onClick:()=>{let e=`${t.name}-copy`;o.find((({name:t})=>t===e))&&(e+=o.length),l(o.length,{...t,name:e,breakdown:void 0})}}))),n.a.createElement(d.EuiFlexItem,{grow:!1},n.a.createElement(C,{seriesId:e})))}const M=i.i18n.translate("xpack.observability.seriesEditor.edit",{defaultMessage:"Edit series"}),P=i.i18n.translate("xpack.observability.seriesEditor.hide",{defaultMessage:"Hide series"}),A=i.i18n.translate("xpack.observability.seriesEditor.clone",{defaultMessage:"Duplicate series"}),D=i.i18n.translate("xpack.observability.seriesEditor.sampleDocuments",{defaultMessage:"View sample documents in new tab"});var V=a(34);function z({seriesId:e,series:t}){var a;const i=Object(V.a)(),{setSeries:l}=Object(f.f)(),[o,s]=Object(r.useState)(!1),u=null!==(a=t.color)&&void 0!==a?a:i.eui[`euiColorVis${e}`],c=n.a.createElement(d.EuiToolTip,{content:B},n.a.createElement(d.EuiButtonEmpty,{size:"s",onClick:()=>s((e=>!e)),flush:"both"},n.a.createElement(d.EuiIcon,{type:"stopFilled",size:"l",color:u})));return n.a.createElement(d.EuiPopover,{button:c,isOpen:o,closePopover:()=>s(!1)},n.a.createElement(d.EuiFormRow,{label:_},n.a.createElement(d.EuiColorPicker,{onChange:a=>{l(e,{...t,color:a})},color:u})))}const _=i.i18n.translate("xpack.observability.overview.exploratoryView.pickColor",{defaultMessage:"Pick a color"}),B=i.i18n.translate("xpack.observability.overview.exploratoryView.editSeriesColor",{defaultMessage:"Edit color for series"});var R=a(69);const $=i.i18n.translate("xpack.observability.expView.chartTypes.label",{defaultMessage:"Chart type"});function L({seriesId:e,series:t,defaultChartType:a}){var r;const{setSeries:i}=Object(f.f)(),l=null!==(r=null==t?void 0:t.seriesType)&&void 0!==r?r:a;return n.a.createElement(N,{onChange:a=>{i(e,{...t,seriesType:a})},value:l,excludeChartTypes:["bar_percentage_stacked"],includeChartTypes:["bar","bar_horizontal","line","area","bar_stacked","area_stacked","bar_horizontal_percentage_stacked"],label:$})}function N({onChange:e,value:t,includeChartTypes:a,excludeChartTypes:r}){var i;const{services:{lens:l}}=Object(p.useKibana)(),{data:o=[],loading:s}=Object(R.useFetcher)((()=>l.getXyVisTypes()),[l]);let u=o;(null!=r?r:[]).length>0&&(u=u.filter((({id:e})=>!(null!=r&&r.includes(e))))),(null!=a?a:[]).length>0&&(u=u.filter((({id:e})=>null==a?void 0:a.includes(e))));const c=(null!==(i=u)&&void 0!==i?i:[]).map((({id:e,fullLabel:t,label:a,icon:r})=>{const i=n.a.createElement(d.EuiFlexGroup,{gutterSize:"s",alignItems:"center"},n.a.createElement(d.EuiFlexItem,{grow:!1},n.a.createElement(d.EuiIcon,{type:r})),n.a.createElement(d.EuiFlexItem,null,t||a));return{value:e,inputDisplay:i,dropdownDisplay:i}}));return n.a.createElement(d.EuiFormRow,{label:$,style:{minWidth:280}},n.a.createElement(d.EuiSuperSelect,{fullWidth:!0,valueOfSelected:t,isLoading:s,options:c,onChange:e}))}function W({seriesId:e,series:t,seriesConfig:a}){var i,l,o;const s=null!==(i=null==t?void 0:t.seriesType)&&void 0!==i?i:a.defaultSeriesType,{services:{lens:u}}=Object(p.useKibana)(),{data:c=[]}=Object(R.useFetcher)((()=>u.getXyVisTypes()),[u]),f=null===(l=(null!=c?c:[]).find((({id:e})=>e===s)))||void 0===l?void 0:l.icon,[b,m]=Object(r.useState)(!1);return n.a.createElement(d.EuiPopover,{isOpen:b,closePopover:()=>m(!1),button:n.a.createElement(d.EuiToolTip,{content:q},n.a.createElement(d.EuiButtonEmpty,{size:"s","aria-label":U,onClick:()=>m((e=>!e)),flush:"both"},f&&n.a.createElement(d.EuiIcon,{type:null===(o=(null!=c?c:[]).find((({id:e})=>e===s)))||void 0===o?void 0:o.icon,size:"l"})))},n.a.createElement(L,{seriesId:e,series:t,defaultChartType:a.defaultSeriesType}))}const q=i.i18n.translate("xpack.observability.expView.seriesEditor.editChartSeriesLabel",{defaultMessage:"Edit chart type for series"}),U=i.i18n.translate("xpack.observability.expView.chartTypes.label",{defaultMessage:"Chart type"});function G({seriesId:e,series:t,seriesConfig:a}){return a?n.a.createElement(d.EuiFlexGroup,{gutterSize:"s",responsive:!1},n.a.createElement(d.EuiFlexItem,{grow:!1},n.a.createElement(W,{seriesId:e,series:t,seriesConfig:a})),n.a.createElement(d.EuiFlexItem,{grow:!1},n.a.createElement(z,{seriesId:e,series:t}))):null}function H({seriesId:e,series:t}){const{setSeries:a,reportType:i}=Object(f.f)(),[l,o]=Object(r.useState)(!1),s=Object(r.useCallback)((e=>{null==e||e.focus()}),[]),{dataTypes:u}=Object(h.b)(),c=u.filter((({id:e})=>i===j.m.DEVICE_DISTRIBUTION?e===j.b.MOBILE:i!==j.m.CORE_WEB_VITAL||e===j.b.UX)).map((({id:e,label:t})=>({value:e,inputDisplay:t}))),p=u.find((e=>e.id===t.dataType));return n.a.createElement(n.a.Fragment,null,!t.dataType&&n.a.createElement(d.EuiPopover,{button:n.a.createElement(d.EuiButton,{iconType:"plusInCircle",onClick:()=>o((e=>!e)),fill:!0,size:"s",buttonRef:s},X),isOpen:l,closePopover:()=>o((e=>!e))},n.a.createElement(d.EuiListGroup,null,c.map((r=>n.a.createElement(d.EuiListGroupItem,{key:r.value,onClick:()=>{return n=r.value,void("SELECT_DATA_TYPE"!==String(n)&&a(e,{dataType:n,time:t.time,name:`${n}-series-${e+1}`}));var n},label:r.inputDisplay}))))),t.dataType&&n.a.createElement(d.EuiToolTip,{position:"top",content:K},n.a.createElement(d.EuiBadge,null,null==p?void 0:p.label)))}const X=i.i18n.translate("xpack.observability.overview.exploratoryView.selectDataType",{defaultMessage:"Select data type"}),K=i.i18n.translate("xpack.observability.overview.exploratoryView.selectDataTypeTooltip",{defaultMessage:"Data type cannot be edited."});function Q({seriesConfig:e,series:t}){const{loading:a}=Object(m.b)();if(!e)return null;const{dataType:r,reportDefinitions:l,selectedMetricField:o}=t,{definitionFields:s,labels:u}=e,c=(!r||Object(O.isEmpty)(l)||!o)&&!a,p=Object(O.isEmpty)(l)?i.i18n.translate("xpack.observability.overview.exploratoryView.missingReportDefinition",{defaultMessage:"Missing {reportDefinition}",values:{reportDefinition:null==u?void 0:u["string"==typeof s[0]?s[0]:s[0].field]}}):"";let f=o?p:J;return r||(f=Y),c?n.a.createElement(d.EuiBadge,{color:"warning"},f):null}const J=i.i18n.translate("xpack.observability.overview.exploratoryView.missingReportMetric",{defaultMessage:"Missing report metric"}),Y=i.i18n.translate("xpack.observability.overview.exploratoryView.missingDataType",{defaultMessage:"Missing data type"});var Z=a(111),ee=a(48);function te({singleSelection:e,keepHistory:t,series:a,field:i,seriesConfig:l,onChange:o,filters:s}){var u;const{indexPattern:c}=Object(m.b)(a.dataType),d="string"==typeof i?i:i.field,{reportDefinitions:p={}}=a,{labels:f,baseFilters:b,definitionFields:g}=l,v=Object(r.useMemo)((()=>{const e=[];return(null!=b?b:[]).concat(null!=s?s:[]).forEach((t=>{t.query&&e.push(t.query);const a=t;a.query.exists&&e.push({exists:a.query.exists})})),Object(O.isEmpty)(p)||g.forEach((t=>{const a="string"==typeof t?t:t.field;if(c&&null!=p&&p[a]&&a!==d){const t=null==p?void 0:p[a];if(!t.includes(ee.a)){const r=Object(F.c)(a,t,c)[0];r.query&&e.push(r.query)}}})),e}),[JSON.stringify(p),JSON.stringify(b)]);return c?n.a.createElement(Z.default,{label:null!==(u=f[d])&&void 0!==u?u:d,sourceField:d,indexPatternTitle:c.title,selectedValue:null==p?void 0:p[d],onChange:e=>o(d,e),filters:v,time:a.time,fullWidth:!0,asCombobox:!0,allowExclusions:!1,allowAllValuesSelection:!0,usePrependLabel:!1,compressed:!1,required:Object(O.isEmpty)(p),singleSelection:e,keepHistory:t}):null}var ae=a(100),re=a(9);function ne({seriesId:e,series:t,seriesConfig:a}){const{setSeries:r}=Object(f.f)(),{reportDefinitions:i={}}=t,{definitionFields:l}=a,o=(a,n)=>{null!=n&&n[0]?r(e,{...t,reportDefinitions:{...i,[a]:n}}):(delete i[a],r(e,{...t,reportDefinitions:{...i}}))};return n.a.createElement(d.EuiFlexGroup,{gutterSize:"s"},l.map((l=>{var s;const u="string"==typeof l?l:l.field,c="string"!=typeof l&&l.singleSelection,p="string"!=typeof l&&l.nested,f="string"!=typeof l?l.filters:void 0,b=!Object(ae.b)(t.selectedMetricField),m=p===re.h&&b;let g;return m&&p&&(null===(s=i[p])||void 0===s?void 0:s.length)>0&&r(e,{...t,reportDefinitions:{...i,[p]:[]}}),p&&(e=>{var a;return!Object(O.isEmpty)(null===(a=t.reportDefinitions)||void 0===a?void 0:a[e])})(u)&&!m&&(g=n.a.createElement(d.EuiFlexItem,{key:p,grow:1},n.a.createElement(te,{seriesId:e,series:t,seriesConfig:a,field:p,onChange:o,keepHistory:!1,singleSelection:c}))),n.a.createElement(n.a.Fragment,null,n.a.createElement(d.EuiFlexItem,{key:u,grow:1},n.a.createElement(te,{seriesId:e,series:t,seriesConfig:a,field:u,onChange:o,singleSelection:c,filters:f})),g)})))}var ie=a(121),le=a(109),oe=a(23),se=a(99);function ue({field:e,series:t,baseFilters:a,label:r},n){var i;const{indexPatterns:l}=Object(m.b)(t.dataType),o=[];return null==a||a.forEach((e=>{e.query&&o.push(e.query),Object(oe.e)(e)&&o.push({exists:e.query.exists})})),Object(se.a)({query:n,label:null!=r?r:e,sourceField:e,time:t.time,keepHistory:!0,filters:o,indexPatternTitle:null===(i=l[t.dataType])||void 0===i?void 0:i.title})}const ce=({seriesId:e,series:t})=>{var a;const{setSeries:r}=Object(f.f)(),n=null!==(a=t.filters)&&void 0!==a?a:[],i=({field:a,values:i,notValues:l,wildcards:o,notWildcards:s})=>{var u;const c=null!==(u=n.find((({field:e})=>a===e)))&&void 0!==u?u:{field:a};c.notValues=l.length>0?l:void 0,c.values=i.length>0?i:void 0,c.wildcards=o,c.notWildcards=s;const d=n.filter((({field:e})=>e!==a));Object(O.concat)(i,l,o,s).length>0?r(e,{...t,filters:[...d,c]}):r(e,{...t,filters:d})},l=({field:e,value:t,negate:a,wildcards:r})=>{var l,o,s;const u=null!==(l=n.find((({field:t})=>e===t)))&&void 0!==l?l:{field:e},c=null!==(o=u.notValues)&&void 0!==o?o:[],d=null!==(s=u.values)&&void 0!==s?s:[],p=c.filter((e=>t instanceof Array?!t.includes(e):e!==t)),f=d.filter((e=>t instanceof Array?!t.includes(e):e!==t));a?t instanceof Array?p.push(...t):p.push(t):t instanceof Array?f.push(...t):f.push(t),i({field:e,values:f,notValues:p,wildcards:r})};return{invertFilter:({field:e,value:t,negate:a})=>{l({field:e,value:t,negate:!a})},setFilter:({field:a,value:i,negate:o,wildcards:s})=>{n.find((({field:e})=>a===e))?l({field:a,value:i,negate:o,wildcards:s}):(({field:a,value:i,negate:l})=>{const o={field:a};l?o.notValues=i instanceof Array?i:[i]:o.values=i instanceof Array?i:[i],0===n.length?r(e,{...t,filters:[o]}):r(e,{...t,filters:[o,...n.filter((e=>e.field!==a))]})})({field:a,value:i,negate:o,wildcards:s})},removeFilter:({field:a,value:i,negate:l,isWildcard:o})=>{const s=n.map((e=>{if(e.field===a){if(l){var t;if(o){var r;const t=null===(r=e.notWildcards)||void 0===r?void 0:r.filter((e=>i instanceof Array?!i.includes(e):e!==i));return{...e,notWildcards:t}}const a=null===(t=e.notValues)||void 0===t?void 0:t.filter((e=>i instanceof Array?!i.includes(e):e!==i));return{...e,notValues:a}}{var n;if(o){var s;const t=null===(s=e.wildcards)||void 0===s?void 0:s.filter((e=>i instanceof Array?!i.includes(e):e!==i));return{...e,wildcards:t}}const t=null===(n=e.values)||void 0===n?void 0:n.filter((e=>i instanceof Array?!i.includes(e):e!==i));return{...e,values:t}}}return e})).filter((({values:e=[],notValues:t=[],wildcards:a=[],notWildcards:r=[]})=>e.length>0||t.length>0||a.length>0||r.length>0));r(e,{...t,filters:s})},replaceFilter:i,setFiltersWildcard:({field:a,wildcards:l})=>{let o=n.find((({field:e})=>a===e));var s,u;o?i({field:a,values:null!==(s=o.values)&&void 0!==s?s:[],notValues:null!==(u=o.notValues)&&void 0!==u?u:[],wildcards:l}):(o={field:a,wildcards:l},0===n.length?r(e,{...t,filters:[o]}):r(e,{...t,filters:[o,...n.filter((e=>e.field!==a))]}))}}};function de({isNestedOpen:e,setIsNestedOpen:t,value:a,field:l,negate:o,seriesId:s,series:u,nestedField:c,allSelectedValues:d}){var p;const{indexPatterns:f}=Object(m.b)(u.dataType),{setFilter:b,removeFilter:g}=ce({seriesId:s,series:u}),v=(null!=d?d:[]).includes(a),y=n.a.createElement(pe,{hasActiveFilters:v,color:o?"danger":"primary",onClick:()=>{v?g({field:l,value:a,negate:o}):b({field:l,value:a,negate:o}),t(v?{value:"",negate:o}:{value:a,negate:o})}},o?i.i18n.translate("xpack.observability.expView.filterValueButton.negate",{defaultMessage:"Not {value}",values:{value:a}}):a),h=(null==e?void 0:e.value)===a&&e.negate===o,E=Object(r.useMemo)((()=>[{term:{[l]:a}}]),[l,a]);return c&&h?n.a.createElement(Z.default,{button:y,label:"Version",sourceField:c,onChange:e=>{(null!=e?e:[]).forEach((e=>{b({field:c,value:e})})),t({value:"",negate:o})},filters:E,forceOpen:h,anchorPosition:"rightCenter",time:u.time,asCombobox:!1,indexPatternTitle:null===(p=f[u.dataType])||void 0===p?void 0:p.title}):y}const pe=Object(v.euiStyled)(d.EuiFilterButton)`
  background-color: rgba(${e=>{const t=e.hasActiveFilters?"danger"===e.color?Object(d.hexToRgb)(e.theme.eui.euiColorDanger):Object(d.hexToRgb)(e.theme.eui.euiColorPrimary):"initial";return`${t[0]}, ${t[1]}, ${t[2]}, 0.1`}});
`;function fe({field:e,values:t,query:a,setQuery:i,label:l,loading:o,isNegated:u,nestedField:c,series:p,seriesId:f}){var b;const[m,g]=Object(r.useState)({value:"",negate:!1}),v=Object(O.map)(t,"label").filter((e=>e.toLowerCase().includes(a.toLowerCase()))),y=(null!==(b=null==p?void 0:p.filters)&&void 0!==b?b:[]).find((({field:t})=>e===t)),h={field:e,nestedField:c,seriesId:f,series:p,isNestedOpen:m,setIsNestedOpen:g};return n.a.createElement(ve,null,n.a.createElement(d.EuiFieldSearch,{fullWidth:!0,isLoading:o,value:a,onChange:e=>{i(e.target.value)},placeholder:me(l)}),n.a.createElement(d.EuiSpacer,{size:"s"}),n.a.createElement(ge,null,o&&n.a.createElement("div",{className:"eui-textCenter"},n.a.createElement(d.EuiProgress,{size:"xs",color:"primary",position:"absolute",style:{top:"initial"}})),0===v.length&&!o&&n.a.createElement(d.EuiText,{className:"eui-textCenter"},be),v.map((e=>n.a.createElement(r.Fragment,{key:e},n.a.createElement(d.EuiFilterGroup,{fullWidth:!0,color:"primary"},!1!==u&&n.a.createElement(de,s()({},h,{value:e,negate:!0,allSelectedValues:null==y?void 0:y.notValues})),n.a.createElement(de,s()({},h,{value:e,negate:!1,allSelectedValues:null==y?void 0:y.values}))),n.a.createElement(d.EuiSpacer,{size:"s"}))))))}const be=i.i18n.translate("xpack.observability.filters.expanded.noFilter",{defaultMessage:"No filters found."}),me=e=>i.i18n.translate("xpack.observability.filters.expanded.search",{defaultMessage:"Search for {label}",values:{label:e}}),ge=v.euiStyled.div`
  height: 370px;
  overflow-y: auto;
  &::-webkit-scrollbar {
    height: ${({theme:e})=>e.eui.euiScrollBar};
    width: ${({theme:e})=>e.eui.euiScrollBar};
  }
  &::-webkit-scrollbar-thumb {
    background-clip: content-box;
    background-color: ${({theme:e})=>Object(g.rgba)(e.eui.euiColorDarkShade,.5)};
    border: ${({theme:e})=>e.eui.euiScrollBarCorner} solid transparent;
  }
  &::-webkit-scrollbar-corner,
  &::-webkit-scrollbar-track {
    background-color: transparent;
  }
`,ve=c.a.div.withConfig({displayName:"Wrapper",componentId:"sc-dqgr2v-0"})(["width:400px;"]);function ye(e){const[t,a]=Object(r.useState)(!1),[i,l]=Object(r.useState)(""),{values:o,loading:u}=ue(e,i);return n.a.createElement(d.EuiPopover,{button:n.a.createElement(d.EuiFilterButton,{onClick:()=>a((e=>!e)),iconType:"arrowDown"},e.label),isOpen:t,closePopover:()=>a(!1)},n.a.createElement(fe,s()({},e,{setQuery:l,query:i,values:o,loading:u})))}var he=a(54),Ee=a(123);function xe({label:e,seriesId:t,series:a,field:r,value:i,negate:l,indexPattern:o,removeFilter:s,definitionFilter:u}){const{invertFilter:c}=ce({seriesId:t,series:a});return o?n.a.createElement(Ee.FilterValueLabel,{indexPattern:o,removeFilter:s,invertFilter:e=>{u||c(e)},field:r,value:i,negate:l,label:e}):null}function we({seriesId:e,series:t,seriesConfig:a}){var l,o;const{setSeries:u}=Object(f.f)(),{labels:c}=a,p=null!==(l=t.filters)&&void 0!==l?l:[],{removeFilter:b,replaceFilter:g}=ce({seriesId:e,series:t}),{indexPattern:v}=Object(m.b)(t.dataType);if(0===p.length||!v)return null;const y={seriesId:e,series:t,indexPattern:v};return n.a.createElement(n.a.Fragment,null,n.a.createElement(d.EuiFlexGroup,{wrap:!0,gutterSize:"xs",alignItems:"center"},p.map((({field:e,values:t=[],notValues:a=[],wildcards:l=[],notWildcards:o=[]})=>{var u,p,f,m;return n.a.createElement(r.Fragment,{key:e},t.length>0&&n.a.createElement(d.EuiFlexItem,{grow:!1,style:{maxWidth:300}},n.a.createElement(xe,s()({field:e,label:null!==(u=c[e])&&void 0!==u?u:e,value:null!=t?t:[],removeFilter:()=>{g({field:e,values:[],notValues:a,wildcards:l,notWildcards:o})},negate:!1},y))),a.length>0&&n.a.createElement(d.EuiFlexItem,{key:e,grow:!1,style:{maxWidth:300}},n.a.createElement(xe,s()({field:e,label:null!==(p=c[e])&&void 0!==p?p:e,value:null!=a?a:[],negate:!0,removeFilter:()=>{g({field:e,notValues:[],values:t,wildcards:l,notWildcards:o})}},y))),l.length>0&&n.a.createElement(d.EuiFlexItem,{key:e,grow:!1,style:{maxWidth:300}},n.a.createElement(xe,s()({field:e,label:i.i18n.translate("xpack.observability.filters.label.wildcard",{defaultMessage:"{label} wildcard",values:{label:null!==(f=c[e])&&void 0!==f?f:e}}),value:null!=l?l:[],negate:!1,removeFilter:()=>{null==l||l.forEach((t=>{b({field:e,value:t,negate:!1,isWildcard:!0})}))}},y))),o.length>0&&n.a.createElement(d.EuiFlexItem,{key:e,grow:!1,style:{maxWidth:300}},n.a.createElement(xe,s()({field:e,label:i.i18n.translate("xpack.observability.filters.label.wildcard",{defaultMessage:"{label} wildcard",values:{label:null!==(m=c[e])&&void 0!==m?m:e}}),value:null!=o?o:[],negate:!1,removeFilter:()=>{null==o||o.forEach((t=>{b({field:e,value:t,negate:!0,isWildcard:!0})}))}},y))))})),(null!==(o=t.filters)&&void 0!==o?o:[]).length>0&&n.a.createElement(d.EuiFlexItem,{grow:!1},n.a.createElement(d.EuiButtonEmpty,{flush:"left",iconType:"cross",onClick:()=>{u(e,{...t,filters:void 0})},size:"xs"},i.i18n.translate("xpack.observability.expView.seriesEditor.clearFilter",{defaultMessage:"Clear filters"})))),n.a.createElement(d.EuiSpacer,{size:"s"}))}function Oe(e){const{series:t}=e,[a,i]=Object(r.useState)(""),{indexPattern:l}=Object(m.b)(t.dataType),o=null==l?void 0:l.fields.filter((e=>e.name.startsWith("labels."))),[u,c]=Object(r.useState)(!1),p=n.a.createElement(d.EuiFilterButton,{iconType:"arrowDown",iconSide:"right",onClick:()=>{c(!u)}},ke),[f,b]=Object(r.useState)(""),{values:g,loading:v}=ue({...e,field:f},a),y=(null!=o?o:[]).map((e=>({label:e.name,searchableLabel:e.name,append:n.a.createElement(d.EuiIcon,{type:"arrowRight"}),showIcons:!1})));y.unshift({label:Se,isGroupLabel:!0});return n.a.createElement(d.EuiPopover,{button:p,closePopover:()=>{c(!1),b("")},isOpen:u},f?n.a.createElement(n.a.Fragment,null,n.a.createElement(d.EuiPopoverTitle,null,n.a.createElement(d.EuiButtonEmpty,{iconType:"arrowLeft",iconSide:"left",onClick:()=>b("")},Ce)),n.a.createElement(fe,s()({},e,{label:f,values:g,query:a,setQuery:i,loading:v,field:f}))):n.a.createElement(d.EuiSelectable,{searchable:!0,options:y,onChange:e=>{var t;const a=e.find((e=>"on"===e.checked));b(null!==(t=null==a?void 0:a.label)&&void 0!==t?t:"")},listProps:{onFocusBadge:!1},height:450},((e,t)=>n.a.createElement("div",{style:{width:400}},t,e))))}const ke=i.i18n.translate("xpack.observability.filters.expanded.labels.label",{defaultMessage:"Labels"}),Se=i.i18n.translate("xpack.observability.filters.expanded.labels.fields",{defaultMessage:"Label fields"}),Ce=i.i18n.translate("xpack.observability.filters.expanded.labels.backTo",{defaultMessage:"Back to labels"});var Te=a(126),Fe=a(8);const je=e=>{const t=e.filter((({isWildcard:e})=>!e)),a=e.filter((({isWildcard:e})=>e));return{includedItems:Object(O.map)(t.filter((e=>"on"===e.checked)),"label"),excludedItems:Object(O.map)(t.filter((e=>"off"===e.checked)),"label"),includedWildcards:Object(O.map)(a.filter((e=>"on"===e.checked)),"title"),excludedWildcards:Object(O.map)(a.filter((e=>"off"===e.checked)),"title")}},Ie=e=>i.i18n.translate("xpack.observability.urlFilter.wildcard",{defaultMessage:"Use wildcard *{wildcard}*",values:{wildcard:e}});function Me({series:e,seriesConfig:t,seriesId:a}){const[i,l]=Object(r.useState)(!1),[o,s]=Object(r.useState)(""),[u,c]=Object(r.useState)([]),{values:d,loading:p}=(({series:e,query:t,seriesId:a,seriesConfig:r})=>{const{values:n,loading:i}=ue({series:e,seriesId:a,field:Fe.o,baseFilters:r.baseFilters,label:r.labels[Fe.o]},t);return{values:n,loading:i}})({query:o,series:e,seriesConfig:t,seriesId:a});Object(r.useEffect)((()=>{var t;const a=Ie(o),r=(null!==(t=e.filters)&&void 0!==t?t:[]).find((({field:e})=>e===Fe.o)),{wildcards:n=[],notWildcards:i=[],values:l=[],notValues:s=[]}=null!=r?r:{field:Fe.o};c((e=>{const{includedItems:t,excludedItems:r}=je(e),u=(null!=d?d:[]).map((e=>t.includes(e.label)||n.includes(e.label)||l.includes(e.label)?{...e,checked:"on",title:e.label}:r.includes(e.label)||i.includes(e.label)||s.includes(e.label)?{...e,checked:"off",title:e.label,...e}:{...e,title:e.label,checked:void 0}));n.forEach((e=>{u.unshift({title:e,label:Ie(e),isWildcard:!0,checked:"on"})})),i.forEach((e=>{u.unshift({title:e,label:Ie(e),isWildcard:!0,checked:"off"})}));let c=e.find((({isNewWildcard:e})=>e));return o?(c||(c={title:o,label:a,isNewWildcard:!0,isWildcard:!0},u.unshift(c)),[{...c,label:a,title:o},...u]):u}))}),[d,p,o]),Object(r.useEffect)((()=>{var t;const a=(null!==(t=e.filters)&&void 0!==t?t:[]).find((({field:e})=>e===Fe.o)),{wildcards:r=[],notWildcards:n=[],values:i=[],notValues:l=[]}=null!=a?a:{field:Fe.o};c((e=>(null!=e?e:[]).map((e=>i.includes(e.label)||r.includes(e.title)?{...e,checked:"on"}:l.includes(e.label)||n.includes(e.title)?{...e,checked:"off"}:{...e,checked:void 0}))))}),[e]);const{replaceFilter:f}=ce({seriesId:a,series:e});return n.a.createElement(Te.SelectableUrlList,{loading:Boolean(p),onInputChange:e=>s(e),data:{items:u,total:u.length},onSelectionChange:e=>{c(e)},searchValue:o,popoverIsOpen:i,setPopoverIsOpen:l,onSelectionApply:()=>{const{includedItems:e,excludedItems:t,includedWildcards:a,excludedWildcards:r}=je(u);f({field:Fe.o,values:e,notValues:t,wildcards:a,notWildcards:r}),s(""),l(!1)},hasChanged:()=>{var t;const{includedItems:a,excludedItems:r,includedWildcards:n,excludedWildcards:i}=je(u),l=(null!==(t=e.filters)&&void 0!==t?t:[]).find((({field:e})=>e===Fe.o)),{wildcards:o=[],notWildcards:s=[],values:c=[],notValues:d=[]}=null!=l?l:{field:Fe.o};return!(Object(O.isEqual)(a.sort(),c.sort())&&Object(O.isEqual)(r.sort(),d.sort())&&Object(O.isEqual)(o.sort(),n.sort())&&Object(O.isEqual)(s.sort(),i.sort()))}})}function Pe({series:e,seriesConfig:t,seriesId:a}){const r=t.filterFields.filter((e=>e!==Fe.o)).map((e=>{var a,r,n,i,l;return"string"==typeof e?{label:null!==(n=null!==(i=null===(l=t.labels)||void 0===l?void 0:l[e])&&void 0!==i?i:he.d[e])&&void 0!==n?n:e,field:e}:{field:e.field,nestedField:e.nested,isNegated:e.isNegated,label:(null!==(a=null===(r=t.labels)||void 0===r?void 0:r[e.field])&&void 0!==a?a:he.d[e.field])||e.field}}));return n.a.createElement(n.a.Fragment,null,n.a.createElement(d.EuiFlexGroup,{gutterSize:"s"},n.a.createElement(d.EuiFlexItem,null,n.a.createElement(Me,{series:e,seriesId:a,seriesConfig:t})),n.a.createElement(d.EuiFlexItem,null,n.a.createElement(d.EuiFilterGroup,null,r.map((r=>r.field===he.f?n.a.createElement(Oe,s()({series:e,key:r.label,seriesId:a,baseFilters:t.baseFilters},r)):n.a.createElement(ye,s()({series:e,key:r.label,seriesId:a,baseFilters:t.baseFilters},r))))))),n.a.createElement(d.EuiSpacer,{size:"s"}),n.a.createElement(we,{seriesId:a,series:e,seriesConfig:t}))}var Ae=a(96),De=a(89),Ve=a(59);function ze({series:e,seriesId:t}){var a,r;const{onRefreshTimeRange:i}=Object(De.a)(),l=Object(p.useUiSetting)(Ve.UI_SETTINGS.TIMEPICKER_QUICK_RANGES).map((({from:e,to:t,display:a})=>({start:e,end:t,label:a}))),{setSeries:o,reportType:s,allSeries:u}=Object(f.f)();function c({start:a,end:r}){i(),s===j.m.KPI?u.forEach(((e,t)=>{o(t,{...e,time:{from:a,to:r}})})):o(t,{...e,time:{from:a,to:r}})}return n.a.createElement(d.EuiSuperDatePicker,{start:null==e||null===(a=e.time)||void 0===a?void 0:a.from,end:null==e||null===(r=e.time)||void 0===r?void 0:r.to,onTimeChange:c,commonlyUsedRanges:l,onRefresh:c,showUpdateButton:!1})}const _e=i.i18n.translate("xpack.observability..synthetics.addDataButtonLabel",{defaultMessage:"Add synthetics data"});const Be=i.i18n.translate("xpack.observability.mobile.addDataButtonLabel",{defaultMessage:"Add Mobile data"});const Re=i.i18n.translate("xpack.observability.ux.addDataButtonLabel",{defaultMessage:"Add UX data"}),$e={mobile:function(){var e,t;const a=Object(T.a)();return n.a.createElement(d.EuiHeaderLink,{"aria-label":i.i18n.translate("xpack.observability.page_header.addMobileDataLink.label",{defaultMessage:"Navigate to a tutorial about adding mobile APM data"}),href:null===(e=a.services)||void 0===e||null===(t=e.application)||void 0===t?void 0:t.getUrlForApp("/home#/tutorial/apm"),color:"primary",iconType:"indexOpen"},Be)},ux:function(){var e,t;const a=Object(T.a)();return n.a.createElement(d.EuiHeaderLink,{"aria-label":i.i18n.translate("xpack.observability.page_header.addUXDataLink.label",{defaultMessage:"Navigate to a tutorial about adding user experience APM data"}),href:null===(e=a.services)||void 0===e||null===(t=e.application)||void 0===t?void 0:t.getUrlForApp("/home#/tutorial/apm"),color:"primary",iconType:"indexOpen"},Re)},synthetics:function(){var e,t;const a=Object(T.a)();return n.a.createElement(d.EuiHeaderLink,{"aria-label":i.i18n.translate("xpack.observability.page_header.addUptimeDataLink.label",{defaultMessage:"Navigate to a tutorial about adding Uptime data"}),href:null===(e=a.services)||void 0===e||null===(t=e.application)||void 0===t?void 0:t.getUrlForApp("/home#/tutorial/uptimeMonitors"),color:"primary",iconType:"indexOpen"},_e)},apm:null,infra_logs:null,infra_metrics:null};function Le({seriesId:e,series:t}){const{reportType:a}=Object(f.f)(),{hasAppData:r}=Object(m.b)();if(!t.dataType)return null;const l=$e[t.dataType];return!1===r[t.dataType]&&null!==l?n.a.createElement(d.EuiFlexGroup,{alignItems:"center"},n.a.createElement(d.EuiFlexItem,{grow:!1},n.a.createElement("strong",null,i.i18n.translate("xpack.observability.overview.exploratoryView.noDataAvailable",{defaultMessage:"No {dataType} data available.",values:{dataType:t.dataType}}))),n.a.createElement(d.EuiFlexItem,{grow:!1},n.a.createElement(l,null))):n.a.createElement(Ne,null,0===e||a!==j.m.KPI?n.a.createElement(ze,{seriesId:e,series:t}):n.a.createElement(Ae.a,{seriesId:e,series:t}))}const Ne=c.a.div.withConfig({displayName:"Wrapper",componentId:"sc-6ndrp0-0"})(["width:100%;.euiSuperDatePicker__flexWrapper{width:100%;> .euiFlexItem{margin-right:0;}}"]);function We({seriesConfig:e,seriesId:t,series:a}){const{setSeries:i,allSeries:l}=Object(f.f)(),o=l.findIndex((e=>Boolean(e.breakdown))),s=-1!==o&&!(o===t),u=a.breakdown,c="no_breakdown";if(Object(r.useEffect)((()=>{Object(ae.b)(a.selectedMetricField)||u!==re.h||i(t,{...a,breakdown:void 0})})),!e)return null;const p=e.xAxisColumn.sourceField===j.o,b=a.selectedMetricField===j.j,m=e.breakdownFields.map((t=>{var a;return{id:t,label:null!==(a=e.labels[t])&&void 0!==a?a:t}}));p||m.push({id:c,label:qe});const g=m.map((({id:e,label:t})=>e!==re.h||Object(ae.b)(a.selectedMetricField)?{inputDisplay:t,value:e,dropdownDisplay:t}:{inputDisplay:t,value:e,dropdownDisplay:n.a.createElement(d.EuiToolTip,{content:Ge},n.a.createElement(n.a.Fragment,null,t)),disabled:!0})).filter((({value:e})=>!(e===j.h&&b)));let v=u||(p?g[0].value:c);function y(){return n.a.createElement(d.EuiSuperSelect,{options:g,valueOfSelected:v,onChange:e=>{var r;i(t,(r=e)===c?{...a,breakdown:void 0}:{...a,breakdown:u===r?void 0:r})},"data-test-subj":"seriesBreakdown",disabled:s})}return null!=u&&u.startsWith("labels.")&&(v=j.e),n.a.createElement(He,null,s?n.a.createElement(d.EuiToolTip,{content:Ue,position:"top"},n.a.createElement(y,null)):n.a.createElement(y,null))}const qe=i.i18n.translate("xpack.observability.exp.breakDownFilter.noBreakdown",{defaultMessage:"No breakdown"}),Ue=i.i18n.translate("xpack.observability.exp.breakDownFilter.warning",{defaultMessage:"Breakdowns can be applied to only one series at a time."}),Ge=i.i18n.translate("xpack.observability.exp.breakDownFilter.unavailable",{defaultMessage:"Step name breakdown is not available for monitor duration metric. Use step duration metric to breakdown by step name."}),He=c.a.span.withConfig({displayName:"Wrapper",componentId:"sc-125bdxf-0"})([".euiToolTipAnchor{width:100%;}"]);function Xe({series:e,seriesId:t}){const{indexPattern:a}=Object(m.b)(e.dataType),r=null==a?void 0:a.fields.filter((e=>e.name.startsWith("labels."))),{setSeries:i}=Object(f.f)(),{breakdown:l}=e;if(!(l===j.e||(null==l?void 0:l.startsWith("labels."))))return null;const o=null==r?void 0:r.map((e=>({label:e.name,value:e.name})));return n.a.createElement(d.EuiFlexItem,{grow:!1,style:{minWidth:200}},n.a.createElement(d.EuiComboBox,{selectedOptions:null==o?void 0:o.filter((e=>e.label===l)),options:o,placeholder:Ke,onChange:a=>{var r,n;i(t,{...e,breakdown:null!==(r=null==a||null===(n=a[0])||void 0===n?void 0:n.label)&&void 0!==r?r:j.e})},singleSelection:{asPlainText:!0},isInvalid:e.breakdown===j.e}))}const Ke=i.i18n.translate("xpack.observability.expView.seriesBuilder.labelField",{defaultMessage:"Choose label field"});function Qe(e){const{seriesConfig:t,series:a,seriesId:r}=e;if(!t)return null;const{selectedMetricField:i}=null!=a?a:{},{hasOperationType:l,yAxisColumns:o}=t,u=function(e,t){const{columnType:a}=Object(le.b)(e,t);return a}(t,i),c=a.breakdown===j.h;return n.a.createElement("div",{style:{width:"100%"}},n.a.createElement(d.EuiFlexGroup,{gutterSize:"xs",wrap:!0},n.a.createElement(d.EuiFlexItem,{grow:1},n.a.createElement(d.EuiFormRow,{label:et,fullWidth:!0},n.a.createElement(Le,e))),n.a.createElement(d.EuiFlexItem,{grow:2},n.a.createElement(ne,{seriesConfig:t,seriesId:r,series:a}))),n.a.createElement(d.EuiHorizontalRule,null),n.a.createElement(d.EuiFormRow,{label:Ye,fullWidth:!0},n.a.createElement(Pe,{seriesConfig:t,seriesId:r,series:a})),n.a.createElement(d.EuiFlexGroup,{gutterSize:"s"},n.a.createElement(d.EuiFlexItem,null,n.a.createElement(d.EuiFormRow,{label:Je},n.a.createElement(d.EuiFlexGroup,{gutterSize:"xs"},n.a.createElement(d.EuiFlexItem,{style:{minWidth:200}},n.a.createElement(We,e)),n.a.createElement(Xe,e)))),(l||"operation"===u&&!c)&&n.a.createElement(d.EuiFlexItem,null,n.a.createElement(d.EuiFormRow,{label:Ze},n.a.createElement(ie.b,s()({},e,{defaultOperationType:o[0].operationType}))))))}const Je=i.i18n.translate("xpack.observability.expView.seriesBuilder.breakdownBy",{defaultMessage:"Breakdown by"}),Ye=i.i18n.translate("xpack.observability.expView.seriesBuilder.selectFilters",{defaultMessage:"Filters"}),Ze=i.i18n.translate("xpack.observability.expView.seriesBuilder.operation",{defaultMessage:"Operation"}),et=i.i18n.translate("xpack.observability.expView.seriesBuilder.date",{defaultMessage:"Date"}),tt=c()(d.EuiText).withConfig({displayName:"StyledText",componentId:"sc-7zp12x-0"})(["&.euiText.euiText--constrainedWidth{max-width:200px;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;}"]);function at({series:e,seriesId:t}){const{setSeries:a}=Object(f.f)(),[l,o]=Object(r.useState)(e.name),[s,u]=Object(r.useState)(!1),c=Object(r.useRef)(null),p=Object(r.useRef)(null);return Object(r.useEffect)((()=>{o(e.name)}),[e.name]),Object(r.useEffect)((()=>{s&&c.current&&c.current.focus()}),[s,c]),n.a.createElement(d.EuiFlexGroup,{alignItems:"center",gutterSize:"s",responsive:!1},s?n.a.createElement(d.EuiFlexItem,{grow:!1},n.a.createElement(d.EuiOutsideClickDetector,{onOutsideClick:e=>{e.target!==p.current&&u(!1)}},n.a.createElement(d.EuiFieldText,{value:l,onChange:e=>{o(e.target.value)},onBlur:()=>{l!==e.name&&a(t,{...e,name:l})},onKeyDown:e=>{"Enter"===e.key&&u(!1)},fullWidth:!0,inputRef:c,"aria-label":i.i18n.translate("xpack.observability.expView.seriesEditor.seriesName",{defaultMessage:"Series name"}),"data-test-subj":"exploratoryViewSeriesNameInput"}))):n.a.createElement(d.EuiFlexItem,{grow:!1},n.a.createElement(tt,{grow:!1},l)),n.a.createElement(d.EuiFlexItem,{grow:!1},n.a.createElement(d.EuiButtonIcon,{onClick:()=>u(!s),iconType:"pencil","aria-label":i.i18n.translate("xpack.observability.expView.seriesEditor.editName",{defaultMessage:"Edit name"}),color:"text",buttonRef:p})))}var rt=a(76);function nt({seriesId:e,series:t,seriesConfig:a}){var i,l;const{setSeries:o}=Object(f.f)(),[s,u]=Object(r.useState)(!1),c=null==a?void 0:a.metricOptions,{indexPatterns:p,indexPatternErrors:b,loading:g}=Object(m.b)(),v=a=>{o(e,{...t,selectedMetricField:a})},y=Object(r.useCallback)((e=>{null==e||e.focus()}),[]);if(!t.dataType)return null;const h=null==p?void 0:p[t.dataType],E=null==b?void 0:b[t.dataType],x=(null!=c?c:[]).map((({label:e,field:t,id:a})=>{let r=!1;return t!==j.j&&t!==j.k&&t&&(r=!Boolean(null==h?void 0:h.getFieldByName(t))),{disabled:r,value:t||a,dropdownDisplay:r?n.a.createElement(d.EuiToolTip,{content:n.a.createElement(rt.FormattedMessage,{id:"xpack.observability.expView.seriesEditor.selectReportMetric.noFieldData",defaultMessage:"No data available for field {field}.",values:{field:n.a.createElement("strong",null,t)}})},n.a.createElement("span",null,e)):e,inputDisplay:e}}));var w;return!E||h||g?h||g?n.a.createElement(n.a.Fragment,null,!t.selectedMetricField&&n.a.createElement(d.EuiPopover,{button:n.a.createElement(d.EuiButton,{iconType:"plusInCircle",onClick:()=>u((e=>!e)),fill:!0,size:"s",isLoading:!h&&g,buttonRef:y},it),isOpen:s,closePopover:()=>u((e=>!e))},n.a.createElement(d.EuiListGroup,null,x.map((e=>n.a.createElement(d.EuiListGroupItem,{key:e.value,onClick:()=>v(e.value),label:e.dropdownDisplay,isDisabled:e.disabled}))))),t.selectedMetricField&&(h?n.a.createElement(d.EuiToolTip,{position:"top",content:ut},n.a.createElement(d.EuiBadge,{iconType:"cross",iconSide:"right",iconOnClick:()=>v(void 0),iconOnClickAriaLabel:lt},null==a||null===(i=a.metricOptions)||void 0===i||null===(l=i.find((e=>e.id===t.selectedMetricField)))||void 0===l?void 0:l.label)):n.a.createElement(d.EuiLoadingSpinner,null))):n.a.createElement(d.EuiText,null,ot):n.a.createElement(d.EuiText,{color:"danger",className:"eui-textNoWrap"},"Forbidden"===(null===(w=E.body)||void 0===w?void 0:w.error)||"DataViewInsufficientAccessError"===E.name?st:E.body.message)}const it=i.i18n.translate("xpack.observability.expView.seriesEditor.selectReportMetric",{defaultMessage:"Select report metric"}),lt=i.i18n.translate("xpack.observability.expView.seriesEditor.removeReportMetric",{defaultMessage:"Remove report metric"}),ot=i.i18n.translate("xpack.observability.expView.seriesEditor.noData",{defaultMessage:"No data available"}),st=i.i18n.translate("xpack.observability.expView.seriesEditor.noPermissions",{defaultMessage:"Unable to create Data View. You don't have the required permission, please contact your admin."}),ut=i.i18n.translate("xpack.observability.expView.seriesEditor.reportMetricTooltip",{defaultMessage:"Report metric"}),ct=c()(d.EuiAccordion).withConfig({displayName:"StyledAccordion",componentId:"sc-fdabah-0"})([".euiAccordion__button{width:auto;flex-grow:0;}.euiAccordion__optionalAction{flex-grow:1;flex-shrink:1;}.euiAccordion__childWrapper{overflow:visible;}"]);function dt({item:e,isExpanded:t,toggleExpanded:a}){const{id:i}=e,l={...e,seriesId:i},[o,u]=Object(r.useState)(!1);return Object(r.useEffect)((()=>{t&&u(!0)}),[t]),n.a.createElement(d.EuiPanel,{hasBorder:!0,"data-test-subj":"exploratoryViewSeriesPanel0"},n.a.createElement(ct,{id:`exploratoryViewSeriesAccordion${i}`,forceState:t?"open":"closed","aria-label":pt,onToggle:a,arrowDisplay:l.series.dataType?void 0:"none",extraAction:n.a.createElement(d.EuiFlexGroup,{alignItems:"center",gutterSize:"s",wrap:!0},n.a.createElement(d.EuiFlexItem,{grow:!1},n.a.createElement(d.EuiFlexGroup,{alignItems:"center",responsive:!1,gutterSize:"s"},n.a.createElement(d.EuiFlexItem,{grow:!1},n.a.createElement(G,l)),n.a.createElement(d.EuiFlexItem,{grow:!1},n.a.createElement(at,l)))),n.a.createElement(d.EuiFlexItem,{grow:!1},n.a.createElement(d.EuiFlexGroup,{alignItems:"center",responsive:!1,gutterSize:"s"},n.a.createElement(d.EuiFlexItem,{grow:!1},n.a.createElement(H,l)),n.a.createElement(d.EuiFlexItem,{grow:!1},n.a.createElement(nt,l)),n.a.createElement(d.EuiFlexItem,{grow:!1},n.a.createElement(Q,l)))),n.a.createElement(d.EuiFlexItem,null,n.a.createElement(I,s()({},l,{onEditClick:t?void 0:a}))))},n.a.createElement(d.EuiSpacer,{size:"s"}),n.a.createElement(d.EuiPanel,{color:"subdued"},o&&n.a.createElement(Qe,l))))}const pt=i.i18n.translate("xpack.observability.expView.seriesBuilder.accordion.label",{defaultMessage:"Toggle series information"}),ft=({indexPatterns:e,allSeries:t,reportType:a,reportConfigMap:r})=>t.map(((t,n)=>({id:n,series:t,seriesConfig:(t=>{if(null!=e&&e[t])return Object(y.a)({dataType:t,reportType:a,reportConfigMap:r,indexPattern:e[t]})})(t.dataType)}))),bt=n.a.memo((function(){const[e,t]=Object(r.useState)([]),{getSeries:a,allSeries:i,reportType:l}=Object(f.f)(),{loading:o,indexPatterns:s}=Object(m.b)(),{reportConfigMap:u}=Object(h.b)(),[c,p]=Object(r.useState)({}),[{prevCount:b,curCount:g},v]=Object(r.useState)({curCount:i.length});Object(r.useEffect)((()=>{v((e=>({prevCount:e.curCount,curCount:i.length}))),void 0!==b&&!isNaN(b)&&b<g&&p({})}),[i.length,g,b]),Object(r.useEffect)((()=>{const e={};t((t=>{const a=ft({reportType:l,allSeries:i,indexPatterns:s,reportConfigMap:u});return a.forEach((({series:a,id:r})=>{const n=t.find((({id:e})=>e===r));n&&a.selectedMetricField&&n.series.selectedMetricField!==a.selectedMetricField&&(e[r]=!0)})),[...a]})),p((t=>({...t,...e})))}),[i,a,s,o,u,l]);return n.a.createElement(mt,null,n.a.createElement(gt,null),n.a.createElement(vt,{gutterSize:"none"},n.a.createElement(d.EuiFlexItem,{grow:!1},n.a.createElement(wt,{"aria-label":xt,id:"report-type-label",isDisabled:!0},n.a.createElement(w,{prepend:Et}))),n.a.createElement(d.EuiFlexItem,null,n.a.createElement(S,{onApply:()=>p({})}))),n.a.createElement(yt,null,e.map((e=>n.a.createElement("div",{key:e.id},n.a.createElement(dt,{item:e,toggleExpanded:()=>(e=>{const t={...c};t[e.id]?delete t[e.id]:t[e.id]=!0,p(t)})(e),isExpanded:c[e.id]}),n.a.createElement(d.EuiSpacer,{size:"s"}))))))})),mt=v.euiStyled.div`
  &::-webkit-scrollbar {
    height: ${({theme:e})=>e.eui.euiScrollBar};
    width: ${({theme:e})=>e.eui.euiScrollBar};
  }
  &::-webkit-scrollbar-thumb {
    background-clip: content-box;
    background-color: ${({theme:e})=>Object(g.rgba)(e.eui.euiColorDarkShade,.5)};
    border: ${({theme:e})=>e.eui.euiScrollBarCorner} solid transparent;
  }
  &::-webkit-scrollbar-corner,
  &::-webkit-scrollbar-track {
    background-color: transparent;
  }

  &&& {
    .euiTableRow-isExpandedRow .euiTableRowCell {
      border-top: none;
      background-color: #FFFFFF;
      border-bottom: 2px solid #d3dae6;
      border-right: 2px solid rgb(211, 218, 230);
      border-left: 2px solid rgb(211, 218, 230);
    }

    .isExpanded {
      border-right: 2px solid rgb(211, 218, 230);
      border-left: 2px solid rgb(211, 218, 230);
      .euiTableRowCell {
        border-bottom: none;
      }
    }
    .isIncomplete .euiTableRowCell {
      background-color: rgba(254, 197, 20, 0.1);
    }
  }
`,gt=v.euiStyled.div`
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 56px;
  background-color: ${({theme:e})=>e.eui.euiPageBackgroundColor};
  border-bottom: 1px solid ${({theme:e})=>e.eui.euiColorLightShade};
  z-index: 90;
`,vt=Object(v.euiStyled)(d.EuiFlexGroup)`
  position: sticky;
  top: 0;
  z-index: 100;
  padding: 0;
`,yt=v.euiStyled.div`
  margin: ${({theme:e})=>e.eui.paddingSizes.m} 0;
`,ht=i.i18n.translate("xpack.observability.expView.seriesBuilder.loadingView",{defaultMessage:"Loading view ..."}),Et=(i.i18n.translate("xpack.observability.expView.seriesBuilder.selectReportType",{defaultMessage:"No report type selected"}),i.i18n.translate("xpack.observability.expView.seriesBuilder.reportType",{defaultMessage:"Report type"})),xt=i.i18n.translate("xpack.observability.expView.seriesBuilder.reportType.aria",{defaultMessage:"This select allows you to choose the type of report you wish to create"});var wt=c()(d.EuiFormRow).withConfig({displayName:"_StyledEuiFormRow",componentId:"sc-1l6fn79-0"})({alignItems:"center"});function Ot(){const[e,t]=Object(r.useState)([]),a=Object(r.useRef)(null),{getSeries:l,allSeries:o,setSeries:s,reportType:u}=Object(f.f)(),{loading:c,indexPatterns:p}=Object(m.b)(),{reportConfigMap:b}=Object(h.b)();Object(r.useEffect)((()=>{t(ft({allSeries:o,indexPatterns:p,reportType:u,reportConfigMap:b}))}),[o,l,p,c,b,u]);const g=!u||(u===j.m.CORE_WEB_VITAL||u===j.m.DEVICE_DISTRIBUTION)&&o.length>0;return n.a.createElement(d.EuiToolTip,{content:u?g?i.i18n.translate("xpack.observability.expView.seriesBuilder.addSeries.limitation",{defaultMessage:"You can only add one series of this report type."}):"":i.i18n.translate("xpack.observability.expView.seriesBuilder.addSeries.selectReportType",{defaultMessage:"Please select report type before you can add series."})},n.a.createElement(d.EuiButton,{onClick:()=>(()=>{const t=null==o?void 0:o[0],r={name:`${f.a}-${e.length+1}`};null!=a&&a.current&&a.current.blur();const n=o.length;s(n,"data-distribution"===u?{...r,time:(null==t?void 0:t.time)||j.a}:t?r:{...r,time:j.a})})(),isDisabled:g,iconType:"plusInCircle",size:"s",buttonRef:a},i.i18n.translate("xpack.observability.expView.seriesBuilder.addSeries",{defaultMessage:"Add series"})))}function kt({seriesBuilderRef:e}){return n.a.createElement("div",{ref:e},n.a.createElement(bt,null),n.a.createElement(Ot,null))}var St=a(28);const Ct=()=>{const{storage:e,reportType:t,lastRefresh:a,firstSeries:n}=Object(f.f)();return Object(r.useMemo)((()=>{var a;const r=Object(f.d)(null!==(a=e.get(f.c))&&void 0!==a?a:[]),n=null==r?void 0:r[0];return n?((e,t,a)=>{let r="",n="";return e===j.m.KPI?null==a?void 0:a.time:(t.forEach((e=>{if(e.dataType&&e.selectedMetricField&&e.time){const t=Object(Ae.b)(e.time.from),a=Object(Ae.b)(e.time.to,{roundUp:!0});(!r||a>Object(Ae.b)(r,{roundUp:!0}))&&(r=e.time.to),(!n||t<Object(Ae.b)(n))&&(n=e.time.from)}})),{to:r,from:n})})(t,r,n):void 0}),[t,e,a,n])};var Tt=a(119);function Ft(e){const{lensAttributes:t,setChartTimeRangeContext:a}=e,{services:{lens:l,notifications:o}}=Object(p.useKibana)(),s=null==l?void 0:l.EmbeddableComponent,u=null==l?void 0:l.SaveModalComponent,{firstSeries:c,setSeries:d,reportType:b,lastRefresh:m}=Object(f.f)(),[g,v]=Object(r.useState)(!1),y=Ct(),h=Object(St.d)(),E=Object(r.useCallback)((e=>{var t,r;const n=Date.now();a({lastUpdated:n,to:null===(t=Object(Ae.b)((null==y?void 0:y.to)||""))||void 0===t?void 0:t.valueOf(),from:null===(r=Object(Ae.b)((null==y?void 0:y.from)||""))||void 0===r?void 0:r.valueOf()}),e||Object(Tt.b)(h,m,n)}),[a,y,m,h]),x=Object(r.useCallback)((({range:e})=>{"data-distribution"!==b&&c?d(0,{...c,time:{from:new Date(e[0]).toISOString(),to:new Date(e[1]).toISOString()}}):null==o||o.toasts.add(i.i18n.translate("xpack.observability.exploratoryView.noBrusing",{defaultMessage:"Zoom by brush selection is only available on time series charts."}))}),[b,d,c,null==o?void 0:o.toasts]);return y&&t?n.a.createElement(jt,null,n.a.createElement(s,{id:"exploratoryView",timeRange:y,attributes:t,onLoad:E,onBrushEnd:x}),g&&t&&n.a.createElement(u,{initialInput:t,onClose:()=>v(!1),onSave:()=>{}})):null}const jt=c.a.div.withConfig({displayName:"LensWrapper",componentId:"sc-hgoyq0-0"})(["height:100%;.embPanel__optionsMenuPopover{visibility:collapse;}&&&:hover{.embPanel__optionsMenuPopover{visibility:visible;}}&& .embPanel--editing{border-style:initial !important;:hover{box-shadow:none;}}.embPanel__title{display:none;}&&& > div{height:100%;}"]);function It({loading:e,series:t,reportType:a}){const{dataType:r,reportDefinitions:l}=null!=t?t:{};let o=At;return r?a?Object(O.isEmpty)(l)&&(o=Dt):o=Vt:o=zt,t||(o=i.i18n.translate("xpack.observability.expView.seriesEditor.notFound",{defaultMessage:"No series found. Please add a series."})),n.a.createElement(Mt,null,e&&n.a.createElement(d.EuiProgress,{size:"xs",color:"accent",position:"absolute",style:{top:"initial"}}),n.a.createElement(d.EuiSpacer,null),n.a.createElement(Pt,{justifyContent:"center",alignItems:"center"},n.a.createElement(d.EuiFlexItem,null,n.a.createElement(d.EuiText,null,e?ht:o))))}const Mt=c.a.div.withConfig({displayName:"Wrapper",componentId:"sc-174xx6x-0"})(["text-align:center;position:relative;"]),Pt=c()(d.EuiFlexGroup).withConfig({displayName:"FlexGroup",componentId:"sc-174xx6x-1"})(["height:100%;"]),At=i.i18n.translate("xpack.observability.expView.seriesBuilder.emptyview",{defaultMessage:"Nothing to display."}),Dt=i.i18n.translate("xpack.observability.expView.seriesBuilder.emptyReportDefinition",{defaultMessage:"Select a report definition to create a visualization."}),Vt=i.i18n.translate("xpack.observability.expView.seriesBuilder.selectReportType.empty",{defaultMessage:"Select a report type to create a visualization."}),zt=i.i18n.translate("xpack.observability.expView.reportType.selectDataType",{defaultMessage:"Select a data type to create a visualization."});var _t=a(22),Bt=a.n(_t);function Rt(e){const t="lll",a=Bt()(e.from).format(t),r=Bt()(e.to).format(t),i=Bt()(e.lastUpdated).format(t);return n.a.createElement(n.a.Fragment,null,e.lastUpdated&&n.a.createElement(n.a.Fragment,null,n.a.createElement(d.EuiFlexGroup,null,n.a.createElement(d.EuiFlexItem,null,n.a.createElement(d.EuiText,{size:"xs"},n.a.createElement(rt.FormattedMessage,{id:"xpack.observability.expView.seriesBuilder.creationTime",defaultMessage:"Chart created"}))),n.a.createElement(d.EuiFlexItem,{grow:2},n.a.createElement(d.EuiText,{size:"xs"},i))),n.a.createElement(d.EuiSpacer,{size:"xs"})),e.to&&e.from&&n.a.createElement(n.a.Fragment,null,n.a.createElement(d.EuiFlexGroup,{alignItems:"center"},n.a.createElement(d.EuiFlexItem,null,n.a.createElement(d.EuiText,{size:"xs"},n.a.createElement(rt.FormattedMessage,{id:"xpack.observability.expView.seriesBuilder.creationContext",defaultMessage:"Displaying from"}))),n.a.createElement(d.EuiFlexItem,{grow:2},n.a.createElement(d.EuiText,{size:"xs"},a,"  ",r)))))}function $t({chartTimeRange:e}){const{lastUpdated:t}=e||{},[a,i]=Object(r.useState)((()=>Date.now()));if(Object(r.useEffect)((()=>{const e=setInterval((()=>{i(Date.now())}),5e3);return()=>{clearInterval(e)}}),[]),Object(r.useEffect)((()=>{i(Date.now())}),[t]),!t)return null;const l=Bt()().diff(Bt()(t),"minute")>5,o=Bt()().diff(Bt()(t),"minute")>10;return n.a.createElement(d.EuiText,{color:o?"danger":l?"warning":"subdued",size:"s"},n.a.createElement(Lt,{as:d.EuiToolTip,position:"top",content:n.a.createElement(Rt,e)},n.a.createElement(d.EuiIcon,{type:"iInCircle"}))," ",n.a.createElement(rt.FormattedMessage,{id:"xpack.observability.expView.lastUpdated.label",defaultMessage:"Last Updated: {updatedDate}",values:{updatedDate:Bt()(t).from(a)}}))}const Lt=c.a.div.withConfig({displayName:"StyledToolTipWrapper",componentId:"sc-yw5uw0-0"})(["min-width:30vw;"]);var Nt=a(127);function Wt({timeRange:e,lensAttributes:t}){const a=Object(p.useKibana)().services,{lens:l}=a,[o,s]=Object(r.useState)(!1),u=l.SaveModalComponent;return n.a.createElement(n.a.Fragment,null,n.a.createElement(d.EuiFlexGroup,{alignItems:"center",gutterSize:"s",responsive:!1,style:{paddingRight:20}},e&&n.a.createElement(d.EuiFlexItem,{grow:!1},n.a.createElement(Nt.a,{lensAttributes:t,timeRange:e})),n.a.createElement(d.EuiFlexItem,{grow:!1},n.a.createElement(d.EuiButton,{iconType:"lensApp",fullWidth:!1,isDisabled:!l.canUseEditor()||null===t,size:"s",onClick:()=>{t&&l.navigateToPrefilledEditor({id:"",timeRange:e,attributes:t},{openInNewTab:!0})}},i.i18n.translate("xpack.observability.expView.heading.openInLens",{defaultMessage:"Open in Lens"}))),n.a.createElement(d.EuiFlexItem,{grow:!1},n.a.createElement(d.EuiButton,{fill:!0,iconType:"save",fullWidth:!1,isDisabled:!l.canUseEditor()||null===t,onClick:()=>{t&&s(!0)},size:"s"},i.i18n.translate("xpack.observability.expView.heading.saveLensVisualization",{defaultMessage:"Save"})))),o&&t&&n.a.createElement(u,{initialInput:t,onClose:()=>s(!1),onSave:()=>{}}))}var qt=a(110);function Ut(e){const{setHeaderActionMenu:t,theme$:a}=Object(h.b)();return n.a.createElement(qt.default,{setHeaderActionMenu:t,theme$:a},n.a.createElement(Wt,e))}function Gt({saveAttributes:e}){const{services:{lens:t}}=Object(p.useKibana)(),a=Object(r.useRef)(null),i=Object(r.useRef)(null),[l,o]=Object(r.useState)("100vh"),[u,c]=Object(r.useState)(),[g,v]=Object(r.useState)(null),{loadIndexPattern:y,loading:h}=Object(m.b)(),{firstSeries:E,allSeries:x,lastRefresh:w,reportType:O,setLastRefresh:k}=Object(f.f)(),S=Object(b.c)(),C=Ct();Object(r.useEffect)((()=>{x.forEach((e=>{y({dataType:e.dataType})}))}),[x,y]),Object(r.useEffect)((()=>{v(S),e&&e(S)}),[JSON.stringify(null!=S?S:{}),w]),Object(r.useEffect)((()=>{(()=>{if(null!=a&&a.current&&i.current){const e=i.current.getBoundingClientRect().top;o(`calc(100vh - ${e+40}px)`)}})()}));const T=Object(r.useRef)(),[F,j]=Object(r.useState)(""),I=e=>{j((t=>e===t?"":e))},M=e=>{I(e),T.current&&T.current(e,"seriesPanel"===e?"right":"left")};return t?n.a.createElement(n.a.Fragment,null,n.a.createElement(Ut,{timeRange:C,lensAttributes:g}),n.a.createElement(Ht,{ref:i,height:l},n.a.createElement(Xt,{direction:"vertical",onToggleCollapsed:I},((e,t,{togglePanel:r})=>(T.current=(e,t)=>null==r?void 0:r(e,{direction:t}),n.a.createElement(n.a.Fragment,null,n.a.createElement(d.EuiFlexGroup,{alignItems:"center"},n.a.createElement(d.EuiFlexItem,{grow:!1},n.a.createElement(d.EuiButtonEmpty,s()({},"chartPanel"===F?{iconType:"arrowRight"}:{iconType:"arrowDown"},{onClick:()=>M("chartPanel")}),"chartPanel"===F?Jt:Qt)),"chartPanel"===F?null:n.a.createElement(n.a.Fragment,null,n.a.createElement(d.EuiFlexItem,{style:{textAlign:"right"}},n.a.createElement($t,{chartTimeRange:u})),n.a.createElement(d.EuiFlexItem,{grow:!1},n.a.createElement(d.EuiButton,{iconType:"refresh",onClick:()=>k(Date.now())},Zt)))),n.a.createElement(e,{initialSize:40,minSize:"30%",mode:"collapsible",id:"chartPanel"},g?n.a.createElement(Ft,{setChartTimeRangeContext:c,lensAttributes:g}):n.a.createElement(It,{series:E,loading:h,reportType:O})),n.a.createElement(e,{initialSize:60,minSize:"10%",mode:"main",id:"seriesPanel",color:"subdued",className:"paddingTopSmall"},n.a.createElement(kt,{seriesBuilderRef:a,onSeriesPanelCollapse:M})))))),"seriesPanel"===F&&n.a.createElement(Kt,{onClick:()=>M("seriesPanel"),iconType:"arrowUp"},Yt))):n.a.createElement(d.EuiTitle,null,n.a.createElement("h2",null,ea))}const Ht=c.a.div.withConfig({displayName:"LensWrapper",componentId:"sc-1r2o5cy-0"})(["min-height:400px;height:",";&&& > div{height:100%;}"],(e=>e.height)),Xt=c()(d.EuiResizableContainer).withConfig({displayName:"ResizableContainer",componentId:"sc-1r2o5cy-1"})(["height:100%;&&& .paddingTopSmall{padding-top:8px;}"]),Kt=c()(d.EuiButtonEmpty).withConfig({displayName:"ShowPreview",componentId:"sc-1r2o5cy-2"})(["position:absolute;bottom:34px;"]),Qt=i.i18n.translate("xpack.observability.overview.exploratoryView.hideChart",{defaultMessage:"Hide chart"}),Jt=i.i18n.translate("xpack.observability.overview.exploratoryView.showChart",{defaultMessage:"Show chart"}),Yt=i.i18n.translate("xpack.observability.overview.exploratoryView.preview",{defaultMessage:"Preview"}),Zt=i.i18n.translate("xpack.observability.overview.exploratoryView.refresh",{defaultMessage:"Refresh"}),ea=i.i18n.translate("xpack.observability.overview.exploratoryView.lensDisabled",{defaultMessage:"Lens app is not available, please enable Lens to use exploratory view."});var ta=a(47),aa=a(46),ra=a(87);const na=i.i18n.translate("xpack.observability.expView.heading.label",{defaultMessage:"Explore data"});function ia({app:e,saveAttributes:t,useSessionStorage:a=!1}){Object(R.useTrackPageview)({app:"observability-overview",path:"exploratory-view"}),Object(R.useTrackPageview)({app:"observability-overview",path:"exploratory-view",delay:15e3}),Object(ta.a)([{text:i.i18n.translate("xpack.observability.overview.exploratoryView",{defaultMessage:"Explore data"})}],e);const{ObservabilityPageTemplate:r}=Object(ra.a)(),{services:{uiSettings:o,notifications:s}}=Object(p.useKibana)(),u=Object(l.useHistory)(),c=a?Object(aa.createSessionStorageStateStorage)():Object(aa.createKbnUrlStateStorage)({history:u,useHash:o.get("state:storeInSessionStorage"),...Object(aa.withNotifyOnErrors)(s.toasts)});return n.a.createElement(r,{pageHeader:{pageTitle:na}},n.a.createElement(m.a,null,n.a.createElement(f.b,{storage:c},n.a.createElement(Gt,{saveAttributes:t}))))}t.default=ia},126:function(e,t,a){"use strict";a.r(t),a.d(t,"formatOptions",(function(){return p})),a.d(t,"SelectableUrlList",(function(){return f}));var r=a(1),n=a.n(r),i=a(7),l=a(0),o=a(105),s=a.n(o),u=a(81),c=a.n(u);const d={filterByUrl:l.i18n.translate("xpack.observability.filters.filterByUrl",{defaultMessage:"Filter by URL"}),getSearchResultsLabel:e=>l.i18n.translate("xpack.observability.filters.searchResults",{defaultMessage:"{total} Search results",values:{total:e}}),topPages:l.i18n.translate("xpack.observability.filters.topPages",{defaultMessage:"Top pages"}),select:l.i18n.translate("xpack.observability.filters.select",{defaultMessage:"Select"}),url:l.i18n.translate("xpack.observability.filters.url",{defaultMessage:"Url"}),loadingResults:l.i18n.translate("xpack.observability.filters.url.loadingResults",{defaultMessage:"Loading results"}),noResults:l.i18n.translate("xpack.observability.filters.url.noResults",{defaultMessage:"No results available"})},p=e=>e.map((e=>({title:e.label,...e,className:c()("euiSelectableTemplateSitewide__listItem",e.className)})));function f({data:e,loading:t,onInputChange:a,onSelectionChange:o,onSelectionApply:u,searchValue:c,popoverIsOpen:f,setPopoverIsOpen:b,initialValue:m,renderOption:g,rowHeight:v,hasChanged:y}){var h,E;const[x,w]=Object(r.useState)(null),O=Object(r.useRef)(null),k=p(null!==(h=e.items)&&void 0!==h?h:[]),S=()=>{b(!1)};s()("keydown",(e=>{"enter"===e.key.toLowerCase()&&(u(),b(!1))}),x),s()("escape",(()=>b(!1)),x),Object(r.useEffect)((()=>{x&&x.value!==c&&(x.value=c,x.dispatchEvent(new Event("change")))}),[x,c]);const C=n.a.createElement(i.EuiSelectableMessage,{style:{minHeight:300}},n.a.createElement(i.EuiLoadingSpinner,{size:"l"}),n.a.createElement("br",null),n.a.createElement("p",null,d.loadingResults)),T=n.a.createElement(i.EuiSelectableMessage,{style:{minHeight:300}},n.a.createElement("p",null,d.noResults)),F=c?d.getSearchResultsLabel(null!==(E=null==e?void 0:e.total)&&void 0!==E?E:0):d.topPages;function j(){return n.a.createElement(i.EuiPopoverTitle,{paddingSize:"s"},n.a.createElement(i.EuiFlexGroup,{ref:O,gutterSize:"xs"},n.a.createElement(i.EuiFlexItem,{style:{justifyContent:"center"}},t?n.a.createElement(i.EuiLoadingSpinner,null):F),n.a.createElement(i.EuiFlexItem,{grow:!1},n.a.createElement(i.EuiButtonIcon,{color:"text",onClick:()=>S(),"aria-label":l.i18n.translate("xpack.observability.search.url.close",{defaultMessage:"Close"}),iconType:"cross"}))))}return n.a.createElement(i.EuiSelectable,{searchable:!0,onChange:o,options:c!==(null==x?void 0:x.value)?[]:k,renderOption:g,singleSelection:!1,searchProps:{isClearable:!0,onClick:e=>{b(!0),x&&x.focus()},onInput:e=>{a(e.target.value),b(!0)},inputRef:w,placeholder:d.filterByUrl,"aria-label":d.filterByUrl},listProps:{rowHeight:v,showIcons:!0,onFocusBadge:!1},loadingMessage:C,emptyMessage:T,noMatchesMessage:T,allowExclusions:!0,isPreFiltered:c!==(null==x?void 0:x.value)},((e,t)=>{var a;return n.a.createElement(i.EuiPopover,{panelPaddingSize:"none",isOpen:f,display:"block",button:t,closePopover:S,style:{minWidth:400},anchorPosition:"downLeft",ownFocus:!1},n.a.createElement("div",{style:{width:null!==(a=null==x?void 0:x.getBoundingClientRect().width)&&void 0!==a?a:600,maxWidth:"100%"}},n.a.createElement(j,null),e,n.a.createElement(i.EuiPopoverFooter,{paddingSize:"s"},n.a.createElement(i.EuiFlexGroup,{style:{justifyContent:"flex-end"}},n.a.createElement(i.EuiFlexItem,{grow:!1},n.a.createElement(i.EuiButton,{fill:!0,size:"s",onClick:()=>{u(),S()},isDisabled:!y()},l.i18n.translate("xpack.observability.apply.label",{defaultMessage:"Apply"})))))))}))}t.default=f},127:function(e,t,a){"use strict";a.d(t,"a",(function(){return f}));var r=a(7),n=a(0),i=a(1),l=a.n(i),o=a(15),s=a(18),u=a(44),c=a(12);const d=({lensAttributes:e,getToastText:t,timeRange:a,appId:r})=>{const[l,o]=Object(i.useState)(!1),[d,p]=Object(i.useState)(!1),{http:f,application:{navigateToApp:b},notifications:{toasts:m}}=Object(u.a)().services;return{onCaseClicked:Object(i.useCallback)((i=>{i&&e?(p(!1),o(!0),async function(e,t,a,r){const n=`/api/cases/${null==t?void 0:t.id}/comments`,i={attributes:a,timeRange:r},l={comment:`!{lens${JSON.stringify(i)}}`,type:"user",owner:c.observabilityFeatureId};return e.post(n,{body:JSON.stringify(l)})}(f,i,e,a).then((()=>{o(!1),m.addSuccess({title:n.i18n.translate("xpack.observability.expView.heading.addToCase.notification",{defaultMessage:"Successfully added visualization to the case: {caseTitle}",values:{caseTitle:i.title}}),text:t(i)},{toastLifeTimeMs:1e4})}),(e=>{m.addError(e,{title:n.i18n.translate("xpack.observability.expView.heading.addToCase.notification.error",{defaultMessage:"Failed to add visualization to the selected case."})})}))):b(r||c.observabilityFeatureId,{deepLinkId:s.CasesDeepLinkId.casesCreate,openInNewTab:!0})}),[r,t,f,e,b,a,m]),isSaving:l,isCasesOpen:d,setIsCasesOpen:p}};var p=a(96);function f({lensAttributes:e,timeRange:t,autoOpen:a,setAutoOpen:u,appId:f}){var m,g;const v=Object(o.useKibana)().services,{cases:y,application:{getUrlForApp:h},theme:E}=v,x=Object(i.useCallback)((e=>Object(o.toMountPoint)(l.a.createElement(b,{linkUrl:h(c.observabilityAppId,{deepLinkId:s.CasesDeepLinkId.cases,path:Object(s.generateCaseViewPath)({detailName:e.id})})}),{theme$:null==E?void 0:E.theme$})),[h,null==E?void 0:E.theme$]),w=Object(p.b)(t.from),O=Object(p.b)(t.to,{roundUp:!0}),{onCaseClicked:k,isCasesOpen:S,setIsCasesOpen:C,isSaving:T}=d({lensAttributes:e,getToastText:x,timeRange:{from:null!==(m=null==w?void 0:w.toISOString())&&void 0!==m?m:"",to:null!==(g=null==O?void 0:O.toISOString())&&void 0!==g?g:""},appId:f}),F={onRowClick:k,userCanCrud:!0,owner:[c.observabilityFeatureId],onClose:()=>{C(!1)}};return Object(i.useEffect)((()=>{a&&C(!0)}),[a,C]),Object(i.useEffect)((()=>{S||null==u||u(!1)}),[S,u]),l.a.createElement(l.a.Fragment,null,void 0===a&&l.a.createElement(r.EuiButtonEmpty,{size:"s",isLoading:T,isDisabled:null===e,onClick:()=>{e&&C(!0)}},n.i18n.translate("xpack.observability.expView.heading.addToCase",{defaultMessage:"Add to case"})),S&&e&&y.getAllCasesSelectorModal(F))}function b({linkUrl:e}){return l.a.createElement(r.EuiFlexGroup,{justifyContent:"center"},l.a.createElement(r.EuiFlexItem,null,l.a.createElement(r.EuiLink,{href:e,target:"_blank"},n.i18n.translate("xpack.observability.expView.heading.addToCase.notification.viewCase",{defaultMessage:"View case"}))))}},152:function(e,t,a){var r=a(153);e.exports=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,r(e,t)},e.exports.__esModule=!0,e.exports.default=e.exports},153:function(e,t,a){e.exports=a(11)(874)},154:function(e,t){e.exports=function(e,t){return t||(t=e.slice(0)),e.raw=t,e},e.exports.__esModule=!0,e.exports.default=e.exports},86:function(e,t,a){"use strict";a.d(t,"d",(function(){return u})),a.d(t,"c",(function(){return c})),a.d(t,"e",(function(){return d})),a.d(t,"b",(function(){return p})),a.d(t,"f",(function(){return f})),a.d(t,"a",(function(){return b}));var r=a(1),n=a.n(r),i=a(28),l=a(32),o=(a(13),a(119));const s=Object(r.createContext)({});function u(e){return(null!=e?e:[]).map((e=>function(e){const{dt:t,op:a,st:r,bd:n,ft:i,time:l,rdf:o,mt:s,h:u,n:c,c:d,...p}=e;return{operationType:a,seriesType:r,breakdown:n,filters:i,time:l,reportDefinitions:o,dataType:t,selectedMetricField:s,hidden:u,name:c,color:d,...p}}(e)))}const c="sr",d="reportType";function p({children:e,storage:t}){const[a,p]=Object(r.useState)((()=>{var e;return u(null!==(e=t.get(c))&&void 0!==e?e:[])})),[f,b]=Object(r.useState)((()=>Date.now())),[m,g]=Object(r.useState)((()=>{var e;return null!==(e=t.get(d))&&void 0!==e?e:""})),[v,y]=Object(r.useState)(),h=Object(i.d)();Object(r.useEffect)((()=>{const e=null==a?void 0:a[0];y(e)}),[a,t]);const E=Object(r.useCallback)(((e,t)=>{p((a=>{const r=a.findIndex((e=>e.breakdown)),n=a.map(((a,n)=>n===e?{...t,breakdown:r===e||-1===r?t.breakdown:void 0}:a));return a.length===e?[...n,t]:[...n]}))}),[]),x=Object(r.useCallback)((e=>{p((t=>t.filter(((t,a)=>a!==e))))}),[]),w=Object(r.useCallback)((e=>a[e]),[a]),O={applyChanges:Object(r.useCallback)((e=>{const r=a.map((e=>Object(l.d)(e)));t.set(d,m),t.set(c,r),b(Date.now()),Object(o.a)(h,a,m),e&&e()}),[a,t,h,m]),storage:t,getSeries:w,setSeries:E,removeSeries:x,allSeries:a,lastRefresh:f,setLastRefresh:b,setReportType:g,reportType:m,firstSeries:v};return n.a.createElement(s.Provider,{value:O},e)}function f(){return Object(r.useContext)(s)}const b="new-series"},87:function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var r=a(1),n=a(117);function i(){return Object(r.useContext)(n.a)}},88:function(e,t,a){"use strict";a.d(t,"a",(function(){return p})),a.d(t,"b",(function(){return f}));var r=a(1),n=a.n(r),i=a(15),l=a(61),o=a(27),s=a(43),u=a(85),c=a(2);const d=Object(r.createContext)({});function p({children:e}){const[t,a]=Object(r.useState)({}),[p,f]=Object(r.useState)({}),[b,m]=Object(r.useState)({}),[g,v]=Object(r.useState)({}),{services:{data:y}}=Object(i.useKibana)(),{indexPatterns:h}=Object(s.b)(),E=Object(r.useCallback)((async({dataType:e})=>{var r,n,i;if(void 0===g[e]&&!t[e]){a((t=>({...t,[e]:!0})));try{let t=!1,s="";switch(h[e]&&(s=h[e],t=!0),e){case"ux":case"synthetics":const a=await(null===(r=Object(o.a)(e))||void 0===r?void 0:r.hasData());t=Boolean(null==a?void 0:a.hasData),s=null==a?void 0:a.indices;break;case"infra_metrics":const l=await(null===(n=Object(o.a)(e))||void 0===n?void 0:n.hasData());t=Boolean(null==l?void 0:l.hasData),s=null==l?void 0:l.indices;break;case"apm":case"mobile":const u=await Object(o.a)("apm").hasData();t=Boolean(null==u?void 0:u.hasData),i=null==u?void 0:u.indices,s=Object(c.uniq)([i.transaction,i.metric]).join(",")}if(v((a=>({...a,[e]:t}))),t&&s){const t=new l.a(y),a=await t.getDataView(e,s);f((t=>({...t,[e]:a})))}a((t=>({...t,[e]:!1})))}catch(t){(t instanceof u.DataViewInsufficientAccessError||"Forbidden"===t.body)&&m((a=>({...a,[e]:t}))),a((t=>({...t,[e]:!1})))}}}),[y,g,h,t]);return n.a.createElement(d.Provider,{value:{hasAppData:g,indexPatterns:p,loadIndexPattern:E,indexPatternErrors:b,loading:!!Object.values(t).find((e=>e))}},e)}const f=e=>{const{loading:t,hasAppData:a,loadIndexPattern:n,indexPatterns:i,indexPatternErrors:l}=Object(r.useContext)(d);return!e||null!=i&&i[e]||t||n({dataType:e}),Object(r.useMemo)((()=>({hasAppData:a,loading:t,indexPatterns:i,indexPatternErrors:l,indexPattern:e?null==i?void 0:i[e]:void 0,hasData:e?null==a?void 0:a[e]:void 0,loadIndexPattern:n})),[e,a,l,i,n,t])}},89:function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var r=a(1),n=a(116);function i(){return Object(r.useContext)(n.a)}},91:function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));var r=a(53),n=a(33),i=a(41),l=a(39),o=a(87);function s(){var e,t;const{plugins:a}=Object(o.a)(),s=Object(l.b)(l.a.TIMEPICKER_TIME_DEFAULTS),u=a.data.query.timefilter.timefilter.getTime(),{rangeFrom:c,rangeTo:d}=(p=Object(n.useLocation)().search,Object(r.parse)(p.slice(1),{sort:!1}));var p;const f=null!==(e=null!=c?c:u.from)&&void 0!==e?e:s.from,b=null!==(t=null!=d?d:u.to)&&void 0!==t?t:s.to;return{relativeStart:f,relativeEnd:b,absoluteStart:Object(i.a)(f),absoluteEnd:Object(i.a)(b,{roundUp:!0})}}},96:function(e,t,a){"use strict";a.d(t,"b",(function(){return p})),a.d(t,"a",(function(){return f}));var r=a(1),n=a.n(r),i=a(7),l=a(60),o=a.n(l),s=a(0),u=a(86),c=a(15),d=a(26);const p=(e,t={})=>o.a.parse(e,t);function f({seriesId:e,series:t}){var a,r;const{firstSeries:l,setSeries:o,reportType:f}=Object(u.f)(),b=Object(c.useUiSetting)("dateFormat"),m=null===(a=t.time)||void 0===a?void 0:a.from,g=null===(r=t.time)||void 0===r?void 0:r.to,{from:v,to:y}=l.time,h=p(null!=m?m:v),E=p(null!=g?g:y,{roundUp:!0}),x=()=>{const e=p(v);return p(y,{roundUp:!0}).diff(e,"millisecond")};return n.a.createElement(i.EuiDatePickerRange,{fullWidth:!0,isCustom:!0,startDateControl:n.a.createElement(i.EuiDatePicker,{fullWidth:!0,selected:h,onChange:a=>{if(f===d.m.KPI){const r=x(),n=a.toISOString(),i=a.add(r,"millisecond").toISOString();o(e,{...t,time:{from:n,to:i}})}else{const r=a.toISOString();o(e,{...t,time:{from:r,to:g}})}},startDate:h,endDate:E,isInvalid:h>E,"aria-label":s.i18n.translate("xpack.observability.expView.dateRanger.startDate",{defaultMessage:"Start date"}),dateFormat:b.replace("ss.SSS","ss"),showTimeSelect:!0,popoverPlacement:"right"}),endDateControl:n.a.createElement(i.EuiDatePicker,{fullWidth:!0,showIcon:!1,selected:E,onChange:a=>{if(f===d.m.KPI){const r=x(),n=a.toISOString(),i=a.subtract(r,"millisecond").toISOString();o(e,{...t,time:{from:i,to:n}})}else{const r=a.toISOString();o(e,{...t,time:{from:m,to:r}})}},startDate:h,endDate:E,isInvalid:h>E,"aria-label":s.i18n.translate("xpack.observability.expView.dateRanger.endDate",{defaultMessage:"End date"}),dateFormat:b.replace("ss.SSS","ss"),showTimeSelect:!0,popoverPlacement:"right"})})}},99:function(e,t,a){"use strict";a.d(t,"a",(function(){return u}));var r=a(2),n=a(1),i=a(103),l=a.n(i),o=a(38),s=a(8);const u=({sourceField:e,indexPatternTitle:t,query:a="",filters:i,time:u,label:c,keepHistory:d,cardinalityField:p})=>{const[f,b]=Object(n.useState)(a),[m,g]=Object(n.useState)([]),{from:v,to:y}=null!=u?u:{};l()((()=>{b(a)}),350,[a]),Object(n.useEffect)((()=>{a||b(a)}),[a]);const h=((e,t)=>{if(!t)return"";let a="";return a=e===s.o?`*.${t.toLowerCase()}.*`:t[0].toLowerCase()===t[0]?`(${t}|${Object(r.capitalize)(t)}).*`:`(${t}|${t.toLowerCase()}).*`,a})(e,a),{data:E,loading:x}=Object(o.b)(Object(o.a)({index:t,body:{query:{bool:{filter:[...null!=i?i:[],...v&&y?[{range:{"@timestamp":{gte:v,lte:y}}}]:[]]}},size:0,aggs:{values:{terms:{field:e,size:50,...a?{include:h}:{}},...p?{aggs:{count:{cardinality:{field:p}}}}:{}}}}}),[f,v,y,JSON.stringify(i),t,e],{name:`get${c.replace(/\s/g,"")}ValuesList`});return Object(n.useEffect)((()=>{var e,t;const a=null==E||null===(e=E.aggregations)||void 0===e?void 0:e.values.buckets,n=null!==(t=null==a?void 0:a.map((({key:e,doc_count:t,count:a})=>a?{count:a.value,label:String(e)}:{count:t,label:String(e)})))&&void 0!==t?t:[];g(d?e=>((e,t)=>Object(r.uniqBy)([...e,...t],"label"))(n,e):n)}),[E,d,x,a]),{values:m,loading:x}}}}]);