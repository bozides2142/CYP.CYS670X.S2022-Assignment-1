/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements. 
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.cases_bundle_jsonpfunction=window.cases_bundle_jsonpfunction||[]).push([[9],{185:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return D}));var s=a(11),n=a(2),r=a.n(n),l=a(1);const c=l.i18n.translate("xpack.cases.recentCases.commentsTooltip",{defaultMessage:"Comments"}),o=l.i18n.translate("xpack.cases.recentCases.myRecentlyReportedCasesButtonLabel",{defaultMessage:"My recently reported cases"}),i=l.i18n.translate("xpack.cases.recentCases.noCasesMessage",{defaultMessage:"No cases have been created yet. Put your detective hat on and"}),u=l.i18n.translate("xpack.cases.recentCases.noCasesMessageReadOnly",{defaultMessage:"No cases have been created yet."}),d=l.i18n.translate("xpack.cases.recentCases.recentCasesSidebarTitle",{defaultMessage:"Recent cases"}),m=l.i18n.translate("xpack.cases.recentCases.recentlyCreatedCasesButtonLabel",{defaultMessage:"Recently created cases"}),p=l.i18n.translate("xpack.cases.recentCases.startNewCaseLink",{defaultMessage:"start a new case"}),E=l.i18n.translate("xpack.cases.recentCases.viewAllCasesLink",{defaultMessage:"View all cases"}),C=l.i18n.translate("xpack.cases.recentCases.controlLegend",{defaultMessage:"Cases filter"});var y=a(49);const b="myRecentlyReported",g=[{id:"recentlyCreated",label:m,iconType:"folderExclamation"},{id:b,label:o,iconType:"reporter"}],f=r.a.memo((({filterBy:e,setFilterBy:t,showMyRecentlyReported:a})=>{const l=Object(n.useMemo)((()=>a?g:g.filter((e=>e.id!==b))),[a]),c=Object(n.useCallback)((e=>{t(e)}),[t]);return r.a.createElement(s.EuiButtonGroup,{options:l,idSelected:e,onChange:c,isIconOnly:!0,legend:C})}));f.displayName="RecentCasesFilters";var O=a(22),T=a(34),h=a.n(T);const x=h()(s.EuiIcon).withConfig({displayName:"Icon",componentId:"sc-1ql3gmh-0"})(["margin-right:8px;"]),j=h()(s.EuiFlexGroup).withConfig({displayName:"FlexGroup",componentId:"sc-1ql3gmh-1"})(["margin-right:16px;"]),w=h.a.span.withConfig({displayName:"OuterContainer",componentId:"sc-1ql3gmh-2"})(["width:fit-content;"]),k=r.a.memo((({count:e,icon:t,tooltip:a})=>r.a.createElement(w,null,r.a.createElement(s.EuiToolTip,{content:a},r.a.createElement(j,{alignItems:"center",gutterSize:"none"},r.a.createElement(s.EuiFlexItem,{grow:!1},r.a.createElement(x,{color:"subdued",size:"s",type:t})),r.a.createElement(s.EuiFlexItem,{grow:!1},r.a.createElement(s.EuiText,{color:"subdued",size:"xs"},e)))))));k.displayName="IconWithCount";var S=a(87);const F=({lines:e,placeholders:t})=>r.a.createElement(r.a.Fragment,null,[...Array(t).keys()].map(((a,n)=>r.a.createElement(r.a.Fragment,{key:n},r.a.createElement(s.EuiLoadingContent,{lines:e,"data-test-subj":"loadingPlaceholders"}),n!==t-1&&r.a.createElement(s.EuiSpacer,{size:"l"})))));F.displayName="LoadingPlaceholdersComponent";const A=r.a.memo(F);var v=a(18),I=a(10);const P=()=>{const{userCanCrud:e}=Object(v.a)(),{getCreateCaseUrl:t,navigateToCreateCase:a}=Object(I.m)(),s=Object(n.useCallback)((e=>{e.preventDefault(),a()}),[a]);return e?r.a.createElement(r.a.Fragment,null,r.a.createElement("span",null,i),r.a.createElement(y.c,{"data-test-subj":"no-cases-create-case",onClick:s,href:t()},` ${p}`),"!"):r.a.createElement("span",{"data-test-subj":"no-cases-readonly"},u)};P.displayName="NoCasesComponent";const R=r.a.memo(P);var _=a(66),N=a(69);const U=h.a.div.withConfig({displayName:"MarkdownContainer",componentId:"sc-fsk0lx-0"})(["max-height:150px;overflow-y:auto;width:300px;"]),M=({filterOptions:e,maxCasesToShow:t})=>{const a=(e=>{const t=Object(n.useRef)();return Object(n.useEffect)((()=>{t.current=e})),t.current})(e),{data:l,loading:o,setFilters:i}=Object(S.a)({initialQueryParams:{perPage:t}});Object(n.useEffect)((()=>{void 0===a||Object(O.isEqual)(a,e)||i(e)}),[a,e,i]);const u=Object(n.useMemo)((()=>o.indexOf("cases")>-1||o.indexOf("caseUpdate")>-1),[o]);return u?r.a.createElement(A,{lines:2,placeholders:3}):u||0!==l.cases.length?r.a.createElement(r.a.Fragment,null,l.cases.map(((e,t)=>r.a.createElement(s.EuiFlexGroup,{key:e.id,gutterSize:"none",justifyContent:"spaceBetween"},r.a.createElement(s.EuiFlexItem,{grow:!1},r.a.createElement(s.EuiText,{size:"s"},r.a.createElement(y.a,{detailName:e.id,title:e.title},r.a.createElement(N.a,{text:e.title}))),r.a.createElement(k,{count:e.totalComment,icon:"editorComment",tooltip:c}),e.description&&e.description.length&&r.a.createElement(U,null,r.a.createElement(s.EuiText,{color:"subdued",size:"xs"},r.a.createElement(_.b,{disableLinks:!0},e.description))),t!==l.cases.length-1&&r.a.createElement(s.EuiSpacer,{size:"l"})))))):r.a.createElement(R,null)};M.displayName="RecentCasesComp";var L=a(13);const D=r.a.memo((({maxCasesToShow:e})=>{const t=Object(L.b)(),{getAllCasesUrl:a,navigateToAllCases:l}=Object(I.i)(),[c,o]=Object(n.useState)("recentlyCreated"),i=Object(n.useCallback)((e=>{e.preventDefault(),l()}),[l]),u=Object(n.useMemo)((()=>"myRecentlyReported"===c&&null!=t?{reporters:[{email:t.email,full_name:t.fullName,username:t.username}]}:{reporters:[]}),[t,c]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(r.a.Fragment,null,r.a.createElement(s.EuiFlexGroup,{alignItems:"center",gutterSize:"none",justifyContent:"spaceBetween"},r.a.createElement(s.EuiFlexItem,{grow:!1},r.a.createElement(s.EuiTitle,{size:"xs"},r.a.createElement("h2",null,d))),r.a.createElement(s.EuiFlexItem,{grow:!1},r.a.createElement(f,{filterBy:c,setFilterBy:o,showMyRecentlyReported:null!=t}))),r.a.createElement(s.EuiHorizontalRule,{margin:"s"})),r.a.createElement(s.EuiText,{color:"subdued",size:"s"},r.a.createElement(M,{filterOptions:u,maxCasesToShow:e}),r.a.createElement(s.EuiHorizontalRule,{margin:"s"}),r.a.createElement(s.EuiText,{size:"xs"},r.a.createElement(y.c,{onClick:i,href:a()}," ",E))))}));D.displayName="RecentCases"},49:function(e,t,a){"use strict";a.d(t,"d",(function(){return i})),a.d(t,"c",(function(){return u})),a.d(t,"a",(function(){return m})),a.d(t,"b",(function(){return E}));var s=a(11),n=a(2),r=a.n(n),l=a(10),c=a(1);const o=e=>c.i18n.translate("xpack.cases.caseTable.caseDetailsLinkAria",{values:{detailName:e},defaultMessage:"click to visit case with title {detailName}"}),i=({children:e,...t})=>r.a.createElement(s.EuiButton,t,e),u=({children:e,...t})=>r.a.createElement(s.EuiLink,t,e),d=({children:e,detailName:t,title:a})=>{const{getCaseViewUrl:s,navigateToCaseView:c}=Object(l.j)(),i=Object(n.useCallback)((e=>{e.preventDefault(),c({detailName:t})}),[c,t]);return r.a.createElement(u,{onClick:i,href:s({detailName:t}),"data-test-subj":"case-details-link","aria-label":o(null!=a?a:t)},e||t)},m=r.a.memo(d);m.displayName="CaseDetailsLink";const p=({isDisabled:e,label:t,msgTooltip:a,showToolTip:c,titleTooltip:o})=>{const{getConfigureCasesUrl:u,navigateToConfigureCases:d}=Object(l.l)(),m=Object(n.useCallback)((e=>{e.preventDefault(),d()}),[d]),p=Object(n.useMemo)((()=>r.a.createElement(i,{onClick:m,href:u(),iconType:"controlsHorizontal",isDisabled:e,"aria-label":t,"data-test-subj":"configure-case-button"},t)),[t,e,m,u]);return c?r.a.createElement(s.EuiToolTip,{position:"top",title:o,content:r.a.createElement("p",null,a),"data-test-subj":"configure-case-tooltip"},p):r.a.createElement(r.a.Fragment,null,p)},E=r.a.memo(p);E.displayName="ConfigureCaseButton"},69:function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));var s=a(2),n=a.n(s),r=a(34);const l=a.n(r).a.span.withConfig({displayName:"Text",componentId:"sc-x34vmt-0"})(["text-overflow:ellipsis;display:-webkit-box;-webkit-line-clamp:",";-webkit-box-orient:vertical;overflow:hidden;word-break:normal;"],3),c=({text:e})=>n.a.createElement(l,{title:e},e);c.displayName="TruncatedText";const o=n.a.memo(c)},87:function(e,t,a){"use strict";a.d(t,"a",(function(){return p}));var s=a(2);var n=a(67),r=a(13),l=a(16),c=a(46);const o=(e,t)=>{switch(t.type){case"FETCH_INIT":return{...e,isError:!1,loading:[...e.loading.filter((e=>e!==t.payload)),t.payload]};case"FETCH_UPDATE_CASE_SUCCESS":return{...e,loading:e.loading.filter((e=>"caseUpdate"!==e))};case"FETCH_CASES_SUCCESS":return{...e,data:t.payload,isError:!1,loading:e.loading.filter((e=>"cases"!==e))};case"FETCH_FAILURE":return{...e,isError:!0,loading:e.loading.filter((e=>e!==t.payload))};case"UPDATE_FILTER_OPTIONS":return{...e,filterOptions:{...e.filterOptions,...t.payload}};case"UPDATE_QUERY_PARAMS":return{...e,queryParams:{...e.queryParams,...t.payload}};case"UPDATE_TABLE_SELECTIONS":return{...e,selectedCases:t.payload};default:return e}},i={search:"",reporters:[],status:n.b,tags:[],owner:[]},u={page:1,perPage:5,sortField:n.a.createdAt,sortOrder:"desc"},d={cases:[],countClosedCases:null,countInProgressCases:null,countOpenCases:null,page:0,perPage:0,total:0},m={},p=(e={})=>{const{initialQueryParams:t=m,initialFilterOptions:a=m}=e,[n,p]=Object(s.useReducer)(o,{data:d,filterOptions:{...i,...a},isError:!1,loading:[],queryParams:{...u,...t},selectedCases:[]}),E=Object(r.g)(),C=Object(s.useRef)(!1),y=Object(s.useRef)(!1),b=Object(s.useRef)(new AbortController),g=Object(s.useRef)(new AbortController),f=Object(s.useCallback)((e=>{p({type:"UPDATE_TABLE_SELECTIONS",payload:e})}),[]),O=Object(s.useCallback)((e=>{p({type:"UPDATE_QUERY_PARAMS",payload:e})}),[]),T=Object(s.useCallback)((e=>{p({type:"UPDATE_FILTER_OPTIONS",payload:e})}),[]),h=Object(s.useCallback)((async(e,t)=>{try{C.current=!1,b.current.abort(),b.current=new AbortController,p({type:"FETCH_INIT",payload:"cases"});const a=await Object(c.e)({filterOptions:e,queryParams:t,signal:b.current.signal});C.current||p({type:"FETCH_CASES_SUCCESS",payload:a})}catch(e){C.current||("AbortError"!==e.name&&E.addError(e.body&&e.body.message?new Error(e.body.message):e,{title:l.d}),p({type:"FETCH_FAILURE",payload:"cases"}))}}),[E]),x=Object(s.useCallback)((async({updateKey:e,updateValue:t,caseId:a,refetchCasesStatus:s,version:r})=>{const o=n.data.cases.find((e=>e.id===a));try{y.current=!1,g.current.abort(),g.current=new AbortController,p({type:"FETCH_INIT",payload:"caseUpdate"}),await Object(c.i)(a,{[e]:t},null!=r?r:"",g.current.signal),y.current||(p({type:"FETCH_UPDATE_CASE_SUCCESS"}),h(n.filterOptions,n.queryParams),s(),o&&E.addSuccess({title:l.j(o.title),text:"status"===e&&o.totalAlerts>0&&o.settings.syncAlerts?l.g:void 0}))}catch(e){y.current||("AbortError"!==e.name&&E.addError(e,{title:l.d}),p({type:"FETCH_FAILURE",payload:"caseUpdate"}))}}),[h,n.data,n.filterOptions,n.queryParams,E]),j=Object(s.useCallback)((()=>{h(n.filterOptions,n.queryParams)}),[n.filterOptions,n.queryParams]);return Object(s.useEffect)((()=>(h(n.filterOptions,n.queryParams),()=>{C.current=!0,y.current=!0,b.current.abort(),g.current.abort()})),[n.queryParams,n.filterOptions]),{...n,dispatchUpdateCaseProperty:x,refetchCases:j,setFilters:T,setQueryParams:O,setSelectedCases:f}}}}]);