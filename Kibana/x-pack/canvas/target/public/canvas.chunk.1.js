/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements. 
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.canvas_bundle_jsonpfunction=window.canvas_bundle_jsonpfunction||[]).push([[1],{102:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=a(17);t.default=function(e){var t=l.useRef();return l.useEffect((function(){t.current=e})),t.current}},103:function(e,t,a){"use strict";a.d(t,"b",(function(){return p})),a.d(t,"c",(function(){return c})),a.d(t,"a",(function(){return u}));var l=a(0),n=a(96),s=a(54),i=a(57);const{esService:o}=s.f,r=function(){return i.pluginServices.getServices().platform.getSavedObjectsClient()},p=(e="_all")=>n.a.get(`${i.pluginServices.getServices().platform.getBasePath()+l.a}/es_fields?index=${e}`).then((({data:e})=>Object.keys(e).filter((e=>!e.startsWith("_"))).sort())).catch((t=>{i.pluginServices.getServices().notify.error(t,{title:o.getFieldsFetchErrorMessage(e)})})),c=()=>r().find({type:"index-pattern",fields:["title"],searchFields:["title"],perPage:1e3}).then((e=>e.savedObjects.map((e=>e.attributes.title)))).catch((e=>{i.pluginServices.getServices().notify.error(e,{title:o.getIndicesFetchErrorMessage()})})),u=()=>{const e=i.pluginServices.getServices().platform.getUISettings().get("defaultIndex");return e?r().get("index-pattern",e).then((e=>e.attributes.title)).catch((e=>{i.pluginServices.getServices().notify.error(e,{title:o.getDefaultIndexFetchErrorMessage()})})):Promise.resolve("")}},115:function(e,t,a){"use strict";a.d(t,"a",(function(){return u}));var l=a(17),n=a.n(l),s=a(64),i=a(67),o=a.n(i),r=a(20),p=a(18);const c=e=>{const{children:t,...a}=e;return Object(p.jsx)(n.a.Fragment,null,t(a))};c.propTypes={children:o.a.func.isRequired,error:o.a.object,errorInfo:o.a.object,resetErrorState:o.a.func.isRequired};const u=Object(s.compose)(Object(s.withState)("error","setError",null),Object(s.withState)("errorInfo","setErrorInfo",null),Object(s.withHandlers)({resetErrorState:({setError:e,setErrorInfo:t})=>()=>{e(null),t(null)}}),Object(s.lifecycle)({componentDidCatch(e,t){this.props.setError(e),this.props.setErrorInfo(t)}}),Object(s.mapProps)((e=>Object(r.omit)(e,["setError","setErrorInfo"]))))(c)},116:function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));a(17);var l=a(19),n=a(108),s=a(18);const i=({animated:e=!1,text:t="",backgroundColor:a="#000000"})=>{if(e)return Object(s.jsx)("div",{className:"canvasLoading"},t&&Object(s.jsx)("span",null,t," "),Object(s.jsx)(l.EuiLoadingSpinner,{size:"m"}));const i=Object(n.a)(a);let o="text";return i&&Object(l.isColorDark)(i[0],i[1],i[2])&&(o="ghost"),Object(s.jsx)("div",{className:"canvasLoading"},t&&Object(s.jsx)("span",null,t," "),Object(s.jsx)(l.EuiIcon,{color:o,type:"clock"}))};i.defaultProps={animated:!1,backgroundColor:"#000000",text:""}},225:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=a(42),n=a(17),s=l.__importDefault(a(396));t.default=function(e,t,a){void 0===t&&(t=0),void 0===a&&(a=[]);var l=s.default(e,t),i=l[0],o=l[1],r=l[2];return n.useEffect(r,a),[i,o]}},396:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=a(17);t.default=function(e,t){void 0===t&&(t=0);var a=l.useRef(!1),n=l.useRef(),s=l.useRef(e),i=l.useCallback((function(){return a.current}),[]),o=l.useCallback((function(){a.current=!1,n.current&&clearTimeout(n.current),n.current=setTimeout((function(){a.current=!0,s.current()}),t)}),[t]),r=l.useCallback((function(){a.current=null,n.current&&clearTimeout(n.current)}),[]);return l.useEffect((function(){s.current=e}),[e]),l.useEffect((function(){return o(),r}),[t]),[i,r,o]}},407:function(e,t,a){"use strict";a.r(t),a.d(t,"datasourceSpecs",(function(){return U})),a.d(t,"initializeElements",(function(){return Q})),a.d(t,"initializeElementsSpec",(function(){return J})),a.d(t,"modelSpecs",(function(){return se})),a.d(t,"viewSpecs",(function(){return Ee})),a.d(t,"viewInitializers",(function(){return De})),a.d(t,"initializeViews",(function(){return Fe})),a.d(t,"args",(function(){return ya})),a.d(t,"initializers",(function(){return ja})),a.d(t,"initializeArgs",(function(){return fa})),a.d(t,"tagSpecs",(function(){return va})),a.d(t,"transformSpecs",(function(){return Sa}));var l=a(1),n=a.n(l),s=a(17),i=a.n(s),o=a(53),r=a(19),p=a(24),c=a(20),u=a(60);const m=["string","number","boolean"],g=()=>new Error(`Arg setting helpers only support ${m.join(",")}`),d=e=>Object(c.includes)(m,e);function b(e){const t=Object(u.getType)(e);if(!d(t))throw g();return e}function h(e,t){return t[e]?t[e].map((e=>{if(!d(Object(u.getType)(e)))throw g();return e})):[]}function y(e,t){return{[e]:(t=Array.isArray(t)?t:[t]).map(b)}}var j=a(61),f=a(54),x=a(18);const{Essql:v}=f.e;class essql_EssqlDatasource extends s.PureComponent{constructor(...e){super(...e),n()(this,"defaultQuery",`SELECT * FROM "${this.props.defaultIndex}"`),n()(this,"getQuery",(()=>h(this.getArgName(),this.props.args)[0])),n()(this,"getArgName",(()=>{const{args:e}=this.props;return h("_",e)[0]?"_":h("q",e)[0]?"q":"query"})),n()(this,"setArg",((e,t)=>{const{args:a,updateArgs:l}=this.props;l&&l({...a,...y(e,t)})})),n()(this,"onChange",(e=>{this.props.setInvalid(!e.trim()),this.setArg(this.getArgName(),e)})),n()(this,"editorDidMount",(e=>{const t=e.getModel();null==t||t.updateOptions({tabSize:2})}))}componentDidMount(){const e=this.getQuery();"string"!=typeof e?this.setArg(this.getArgName(),this.defaultQuery):this.props.setInvalid(!e.trim())}render(){const{isInvalid:e}=this.props;return Object(x.jsx)(r.EuiFormRow,{isInvalid:e,label:v.getLabel(),labelAppend:Object(x.jsx)(r.EuiText,{size:"xs"},Object(x.jsx)(r.EuiLink,{href:f.k,target:"_blank"},v.getLabelAppend()))},Object(x.jsx)(p.CodeEditorField,{languageId:o.EsqlLang.ID,value:this.getQuery(),onChange:this.onChange,className:"canvasTextArea__code",options:{fontSize:14,scrollBeyondLastLine:!1,quickSuggestions:!0,minimap:{enabled:!1},wordWrap:"on",wrappingIndent:"indent",lineNumbers:"off",glyphMargin:!1,folding:!1},height:"350px",editorDidMount:this.editorDidMount}))}}var O=a(58),N=a.n(O),C=a(102),T=a.n(C),S=a(103);const E=({selected:e=[],fields:t=[],onChange:a,onFocus:l,onBlur:n})=>{const s=t.map((e=>({label:e}))),i=e.map((e=>({label:e})));return Object(x.jsx)(r.EuiComboBox,{selectedOptions:i,options:s,onChange:e=>a(e.map((({label:e})=>e))),className:"canvasFieldsSelect",onFocus:l,onBlur:n,compressed:!0})},D=e=>{const{index:t,selected:a,onChange:l}=e,[n,i]=Object(s.useState)([]),o=T()(t),r=Object(s.useRef)(!0);return Object(s.useEffect)((()=>{o!==t&&Object(S.b)(t).then((e=>{if(!r.current)return;i(e||[]);const t=a.filter((t=>(e||[]).includes(t)));Object(c.isEqual)(t,a)||l(t)}))}),[n,t,l,o,a]),Object(s.useEffect)((()=>()=>{r.current=!1}),[]),Object(x.jsx)(E,N()({},e,{fields:n}))},F=({value:e,fields:t=[],onChange:a,onFocus:l,onBlur:n})=>{const s=e?[{label:e}]:[],i=t.map((e=>({label:e})));return Object(x.jsx)(r.EuiComboBox,{selectedOptions:s,options:i,onChange:([e])=>{var t;return a(null!==(t=null==e?void 0:e.label)&&void 0!==t?t:null)},onSearchChange:e=>{e&&a(null)},onFocus:l,onBlur:n,singleSelection:{asPlainText:!0},isClearable:!1,compressed:!0})},A=e=>{const{index:t,value:a,onChange:l}=e,[n,i]=Object(s.useState)([]);return Object(s.useEffect)((()=>{Object(S.b)(t).then((e=>i(e||[])))}),[t]),Object(s.useEffect)((()=>{a&&!n.includes(a)&&l(null)}),[a,n,l]),Object(x.jsx)(F,N()({},e,{fields:n}))};var I=a(90),_=a.n(I);const w="_all",k=({value:e="_all",loading:t,indices:a,onChange:l,onFocus:n,onBlur:s})=>{const i=e!==w?[{label:e}]:[],o=a.map((e=>({label:e})));return Object(x.jsx)(r.EuiComboBox,{selectedOptions:i,onChange:([e])=>{var t;return l(null!==(t=null==e?void 0:e.label)&&void 0!==t?t:w)},onSearchChange:e=>{e&&l(w)},onBlur:s,onFocus:n,isDisabled:t,options:o,singleSelection:{asPlainText:!0},isClearable:!1,onCreateOption:e=>l(e||w),compressed:!0})},H=e=>{const{value:t,onChange:a}=e,[l,n]=Object(s.useState)([]),[i,o]=Object(s.useState)(!0),r=Object(s.useRef)(!0);return _()((()=>(Object(S.c)().then((e=>{r.current&&(e||(e=[]),o(!1),n(e.sort()),!t&&e.length&&a(e[0]))})),()=>{r.current=!1}))),Object(x.jsx)(k,N()({},e,{indices:l,loading:i}))},{ESDocs:P}=f.e,L=({args:e,updateArgs:t,defaultIndex:a})=>{const l=Object(s.useCallback)(((a,l)=>{t&&t({...e,...y(a,l)})}),[e,t]),n=()=>h("_",e)[0]?"_":h("q",e)[0]?"q":"query",i=(()=>{const t=h("fields",e)[0]||"";return 0===t.length?[]:t.split(",").map((e=>e.trim()))})(),[o,p]=(h("sort",e)[0]||", DESC").split(",").map((e=>e.trim())),c=h("index",e)[0]||a||"";Object(s.useEffect)((()=>{h("index",e)[0]!==c&&l("index",c)}),[e,c,l]);const u=[{value:"asc",text:P.getAscendingOption()},{value:"desc",text:P.getDescendingOption()}];return Object(x.jsx)("div",null,Object(x.jsx)(r.EuiFormRow,{label:P.getIndexTitle(),helpText:P.getIndexLabel(),display:"rowCompressed"},Object(x.jsx)(H,{value:c,onChange:e=>l("index",e)})),Object(x.jsx)(r.EuiFormRow,{label:P.getFieldsTitle(),helpText:i.length<=10?P.getFieldsLabel():P.getFieldsWarningLabel(),display:"rowCompressed"},Object(x.jsx)(D,{index:c,onChange:e=>l("fields",e.join(", ")),selected:i})),Object(x.jsx)(r.EuiSpacer,{size:"s"}),Object(x.jsx)(r.EuiAccordion,{id:"accordionAdvancedSettings",buttonContent:"Advanced settings",className:"canvasSidebar__accordion"},Object(x.jsx)(r.EuiSpacer,{size:"s"}),Object(x.jsx)(r.EuiFormRow,{label:P.getSortFieldTitle(),display:"columnCompressed"},Object(x.jsx)(A,{index:c,value:o,onChange:e=>l("sort",[e,p].join(", "))})),Object(x.jsx)(r.EuiFormRow,{label:P.getSortOrderTitle(),display:"columnCompressed"},Object(x.jsx)(r.EuiSelect,{value:p.toLowerCase(),onChange:e=>l("sort",[o,e.target.value].join(", ")),options:u,compressed:!0})),Object(x.jsx)(r.EuiFormRow,{label:P.getQueryTitle(),labelAppend:Object(x.jsx)(r.EuiText,{size:"xs"},Object(x.jsx)(r.EuiLink,{href:f.g,target:"_blank"},P.getQueryLabel())),display:"rowCompressed"},Object(x.jsx)(r.EuiTextArea,{value:h(n(),e)[0]||"",onChange:e=>l(n(),e.target.value),compressed:!0}))),Object(x.jsx)(r.EuiSpacer,{size:"m"}),Object(x.jsx)(r.EuiCallOut,{size:"s",title:P.getWarningTitle(),iconType:"alert",color:"warning"},Object(x.jsx)("p",null,P.getWarning())))},{DemoData:V}=f.e,z=()=>Object(x.jsx)(r.EuiCallOut,{title:V.getHeading(),iconType:"iInCircle"},Object(x.jsx)(r.EuiText,{size:"s"},Object(x.jsx)("p",null,V.getDescription())));var M=a(27);const{Timelion:R}=f.e,B=({args:e,updateArgs:t,defaultIndex:a})=>{const l=`.es(index=${a})`,n=(a,l)=>{t&&t({...e,...y(a,l)})},s=h("_",e)[0]?"_":h("q",e)[0]?"q":"query";return Object(x.jsx)("div",null,Object(x.jsx)(r.EuiCallOut,{title:R.getTipsHeading(),size:"s",iconType:"iInCircle"},Object(x.jsx)("ul",null,Object(x.jsx)("li",null,Object(x.jsx)(M.FormattedMessage,{id:"xpack.canvas.uis.dataSources.timelion.tips.time",defaultMessage:"{timelion} requires a time range. Add a time filter element to your page or use the expression editor to pass one in.",values:{timelion:f.l}})),Object(x.jsx)("li",null,Object(x.jsx)(M.FormattedMessage,{id:"xpack.canvas.uis.dataSources.timelion.tips.functions",defaultMessage:"Some {timelion} functions, such as {functionExample}, do not translate to a {canvas} data table. However, anything todo with data manipulation should work as expected.",values:{timelion:f.l,canvas:f.c,functionExample:Object(x.jsx)(r.EuiCode,null,".color()")}})))),Object(x.jsx)(r.EuiSpacer,{size:"m"}),Object(x.jsx)(r.EuiFormRow,{label:R.getQueryLabel(),labelAppend:Object(x.jsx)(r.EuiText,{size:"xs"},Object(x.jsx)(r.EuiLink,{href:f.m,target:"_blank"},R.queryLabel())),display:"rowCompressed"},Object(x.jsx)(r.EuiTextArea,{className:"canvasTextArea__code",value:h(s,e)[0]||l,onChange:e=>n(s,e.target.value),rows:15})),Object(x.jsx)(r.EuiFormRow,{label:R.getIntervalLabel(),helpText:R.getIntervalHelp(),display:"columnCompressed"},Object(x.jsx)(r.EuiFieldText,{compressed:!0,value:h("interval",e)[0]||"auto",onChange:e=>n("interval",e.target.value)})))},U=[()=>({name:"essql",displayName:v.getDisplayName(),help:v.getHelp(),image:"database",template:Object(j.a)(essql_EssqlDatasource)}),()=>({name:"esdocs",displayName:P.getDisplayName(),help:P.getHelp(),image:"documents",template:Object(j.a)(L)}),()=>({name:"demodata",displayName:V.getDisplayName(),help:V.getHelp(),image:"training",template:Object(j.a)(z)}),()=>({name:"timelion",displayName:f.l,help:R.getHelp(),image:"visTimelion",template:Object(j.a)(B)})];var G=a(152);var q=a(66);var $=a(33);const W=()=>({name:"metricVis",displayName:"(New) Metric Vis",type:"chart",help:"Metric visualization",icon:"visMetric",expression:'kibana\n| selectFilter\n| demodata\n| head 1\n| metricVis metric={visdimension "percent_uptime"} colorMode="Labels"\n| render'}),Y=[()=>({name:"areaChart",displayName:"Area",help:"A line chart with a filled body",type:"chart",icon:"visArea",expression:'kibana\n| selectFilter\n| demodata\n| pointseries x="time" y="mean(price)"\n| plot defaultStyle={seriesStyle lines=1 fill=1}\n| render'}),()=>({name:"bubbleChart",displayName:"Bubble",type:"chart",help:"A customizable bubble chart",width:700,height:300,icon:"heatmap",expression:'kibana\n| selectFilter\n| demodata\n| pointseries x="project" y="sum(price)" color="state" size="size(username)"\n| plot defaultStyle={seriesStyle points=5 fill=1}\n| render'}),()=>({name:"debug",displayName:"Debug data",help:"Just dumps the configuration of the element",icon:"bug",expression:"demodata\n| render as=debug"}),()=>({name:"dropdownFilter",displayName:"Dropdown select",type:"filter",help:'A dropdown from which you can select values for an "exactly" filter',icon:"filter",height:50,expression:"demodata\n| dropdownControl valueColumn=project filterColumn=project | render",filter:""}),()=>({name:"filterDebug",displayName:"Debug filter",help:"Shows the underlying global filters in a workpad",icon:"bug",expression:"kibana\n| selectFilter\n| render as=debug"}),()=>({name:"image",displayName:"Image",type:"image",help:"A static image",icon:"image",expression:'image dataurl=null mode="contain"\n| render'}),()=>({name:"horizontalBarChart",displayName:"Bar horizontal",type:"chart",help:"A customizable horizontal bar chart",icon:"visBarHorizontal",expression:'kibana\n| selectFilter\n| demodata\n| pointseries x="size(cost)" y="project" color="project"\n| plot defaultStyle={seriesStyle bars=0.75 horizontalBars=true} legend=false\n| render'}),()=>({name:"horizontalProgressBar",displayName:"Horizontal bar",type:"progress",help:"Displays progress as a portion of a horizontal bar",width:400,height:30,expression:`kibana\n| selectFilter\n| demodata\n| math "mean(percent_uptime)"\n| progress shape="horizontalBar" label={formatnumber 0%} font={font size=24 family="${q.openSans.value}" color="#000000" align=center}\n| render`}),()=>({name:"horizontalProgressPill",displayName:"Horizontal pill",type:"progress",help:"Displays progress as a portion of a horizontal pill",width:400,height:30,expression:`kibana\n| selectFilter\n| demodata\n| math "mean(percent_uptime)"\n| progress shape="horizontalPill" label={formatnumber 0%} font={font size=24 family="${q.openSans.value}" color="#000000" align=center}\n| render`}),()=>({name:"lineChart",displayName:"Line",type:"chart",help:"A customizable line chart",icon:"visLine",expression:'kibana\n| selectFilter\n| demodata\n| pointseries x="time" y="mean(price)"\n| plot defaultStyle={seriesStyle lines=3}\n| render'}),()=>({name:"markdown",displayName:"Text",type:"text",help:"Add text using Markdown",icon:"visText",expression:'kibana\n| selectFilter\n| demodata\n| markdown "### Welcome to the Markdown element\n\nGood news! You\'re already connected to some demo data!\n\nThe data table contains\n**{{rows.length}} rows**, each containing\n the following columns:\n{{#each columns}}\n **{{name}}**\n{{/each}}\n\nYou can use standard Markdown in here, but you can also access your piped-in data using Handlebars. If you want to know more, check out the [Handlebars documentation](https://ela.st/handlebars-docs).\n\n#### Enjoy!" | render'}),()=>({name:"pie",displayName:"Pie",type:"chart",width:300,height:300,help:"A simple pie chart",icon:"visPie",expression:'kibana\n| selectFilter\n| demodata\n| pointseries color="state" size="max(price)"\n| pie\n| render'}),()=>({name:"plot",displayName:"Coordinate plot",type:"chart",help:"Mixed line, bar or dot charts",expression:'kibana\n| selectFilter\n| demodata\n| pointseries x="time" y="sum(price)" color="state"\n| plot defaultStyle={seriesStyle points=5}\n| render'}),()=>({name:"progressGauge",displayName:"Gauge",type:"progress",help:"Displays progress as a portion of a gauge",width:200,height:200,icon:"visGoal",expression:`kibana\n| selectFilter\n| demodata\n| math "mean(percent_uptime)"\n| progress shape="gauge" label={formatnumber 0%} font={font size=24 family="${q.openSans.value}" color="#000000" align=center}\n| render`}),()=>({name:"progressSemicircle",displayName:"Semicircle",type:"progress",help:"Displays progress as a portion of a semicircle",width:200,height:100,expression:`kibana\n| selectFilter\n| demodata\n| math "mean(percent_uptime)"\n| progress shape="semicircle" label={formatnumber 0%} font={font size=24 family="${q.openSans.value}" color="#000000" align=center}\n| render`}),()=>({name:"progressWheel",displayName:"Wheel",type:"progress",help:"Displays progress as a portion of a wheel",width:200,height:200,expression:`kibana\n| selectFilter\n| demodata\n| math "mean(percent_uptime)"\n| progress shape="wheel" label={formatnumber 0%} font={font size=24 family="${q.openSans.value}" color="#000000" align=center}\n| render`}),()=>({name:"repeatImage",displayName:"Image repeat",type:"image",help:"Repeats an image N times",expression:'kibana\n| selectFilter\n| demodata\n| math "mean(cost)"\n| repeatImage image=null\n| render'}),()=>({name:"revealImage",displayName:"Image reveal",type:"image",help:"Reveals a percentage of an image",expression:'kibana\n| selectFilter\n| demodata\n| math "mean(percent_uptime)"\n| revealImage origin=bottom image=null\n| render'}),()=>({name:"shape",displayName:"Shape",type:"shape",help:"A customizable shape",width:200,height:200,icon:"node",expression:'shape "square" fill="#4cbce4" border="rgba(255,255,255,0)" borderWidth=0 maintainAspect=false | render'}),()=>({name:"table",displayName:"Data table",type:"chart",help:"A scrollable grid for displaying data in a tabular format",icon:"visTable",expression:"kibana\n| selectFilter\n| demodata\n| table\n| render"}),()=>({name:"timeFilter",displayName:"Time filter",type:"filter",help:"Set a time window",icon:"calendar",height:50,expression:"timefilterControl compact=true column=@timestamp\n| render",filter:"timefilter column=@timestamp from=now-24h to=now"}),()=>({name:"verticalBarChart",displayName:"Vertical bar chart",type:"chart",help:"A customizable vertical bar chart",icon:"visBarVertical",expression:'kibana\n| selectFilter\n| demodata\n| pointseries x="project" y="size(cost)" color="project"\n| plot defaultStyle={seriesStyle bars=0.75} legend=false\n| render'}),()=>({name:"verticalProgressBar",displayName:"Vertical progress bar",type:"progress",help:"Displays progress as a portion of a vertical bar",width:80,height:400,expression:`kibana\n| selectFilter\n| demodata\n| math "mean(percent_uptime)"\n| progress shape="verticalBar" label={formatnumber 0%} font={font size=24 family="${q.openSans.value}" color="#000000" align=center}\n| render`}),()=>({name:"verticalProgressPill",displayName:"Vertical progress pill",type:"progress",help:"Displays progress as a portion of a vertical pill",width:80,height:400,expression:`kibana\n| selectFilter\n| demodata\n| math "mean(percent_uptime)"\n| progress shape="verticalPill" label={formatnumber 0%} font={font size=24 family="${q.openSans.value}" color="#000000" align=center}\n| render`}),()=>({name:"tagCloud",displayName:"Tag Cloud",type:"chart",help:"Tagcloud visualization",icon:"visTagCloud",expression:'kibana\n| selectFilter\n| demodata\n| ply by="country" fn={math "count(country)" | as "Count"}\n| filterrows fn={getCell "Count" | gte 10}\n| tagcloud metric={visdimension "Count"} bucket={visdimension "country"}\n| render'}),()=>({name:"heatmap",displayName:"Heatmap",type:"chart",help:"Heatmap visualization",icon:"heatmap",expression:'filters\n| demodata\n| head 10\n| heatmap xAccessor={visdimension "age"} yAccessor={visdimension "project"} valueAccessor={visdimension "cost"}\n| render'})],X=[(e,t)=>()=>({name:"metric",displayName:"Metric",type:"chart",help:"A number with a label",width:200,height:100,icon:"visMetric",expression:`kibana\n| selectFilter\n| demodata\n| math "unique(country)"\n| metric "Countries"\n  metricFont={font size=48 family="${q.openSans.value}" color="#000000" align="center" lHeight=48}\n  labelFont={font size=14 family="${q.openSans.value}" color="#000000" align="center"}\n  metricFormat="${e.uiSettings.get($.FORMATS_UI_SETTINGS.FORMAT_NUMBER_DEFAULT_PATTERN)}"\n| render`})],Q=(e,t)=>{const a=[...Y,...X.map((a=>a(e,t)))];return Object(G.a)(a)},J=(e,t)=>{const a=Q(e,t);return[...Object(G.a)([W]),...a]};var Z=a(72);const{PointSeries:K}=f.i,{Math:ee}=f.i,{Tagcloud:te}=f.r,{MetricVis:ae}=f.r,{HeatmapLegend:le}=f.i,{HeatmapGrid:ne}=f.i,se=[()=>({name:"pointseries",displayName:K.getDisplayName(),args:[{name:"x",displayName:K.getXAxisDisplayName(),help:K.getXAxisHelp(),argType:"datacolumn"},{name:"y",displayName:K.getYaxisDisplayName(),help:K.getYaxisHelp(),argType:"datacolumn"},{name:"color",displayName:K.getColorDisplayName(),help:K.getColorHelp(),argType:"datacolumn"},{name:"size",displayName:K.getSizeDisplayName(),help:K.getSizeHelp(),argType:"datacolumn"},{name:"text",displayName:K.getTextDisplayName(),help:K.getTextHelp(),argType:"datacolumn"}],resolve:({context:e})=>"ready"!==Object(Z.b)(e)?{columns:[]}:{columns:Object(c.get)(Object(Z.c)(e),"columns",[])}}),()=>({name:"math",displayName:ee.getDisplayName(),args:[{name:"_",displayName:ee.getValueDisplayName(),help:ee.getValueHelp(),argType:"datacolumn",options:{onlyMath:!1}}],resolve:({context:e})=>"ready"!==Object(Z.b)(e)?{columns:[]}:{columns:Object(c.get)(Object(Z.c)(e),"columns",[])}}),()=>({name:"tagcloud",displayName:te.getDisplayName(),args:[{name:"metric",displayName:te.getMetricColumnDisplayName(),help:te.getMetricColumnHelp(),argType:"vis_dimension"},{name:"bucket",displayName:te.getBucketColumnDisplayName(),help:te.getBucketColumnHelp(),argType:"vis_dimension"},{name:"palette",argType:"palette"},{name:"orientation",displayName:te.getOrientationColumnDisplayName(),help:te.getOrientationColumnHelp(),argType:"select",default:"single",options:{choices:[{value:"single",name:te.getOrientationSingle()},{value:"right angled",name:te.getOrientationRightAngled()},{value:"multiple",name:te.getOrientationMultiple()}]}},{name:"scale",displayName:te.getScaleColumnDisplayName(),help:te.getScaleColumnHelp(),argType:"select",default:"linear",options:{choices:[{value:"linear",name:te.getScaleLinear()},{value:"log",name:te.getScaleLog()},{value:"square root",name:te.getScaleSquareRoot()}]}},{name:"minFontSize",displayName:te.getMinFontHeightColumnDisplayName(),help:te.getMinFontHeightColumnHelp(),argType:"number",default:18},{name:"maxFontSize",displayName:te.getMaxFontHeightColumnDisplayName(),help:te.getMaxFontHeightColumnHelp(),argType:"number",default:72},{name:"showLabel",displayName:te.getShowLabelColumnDisplayName(),help:te.getShowLabelColumnHelp(),argType:"toggle",default:!0}],resolve:({context:e})=>"ready"!==Object(Z.b)(e)?{columns:[]}:{columns:Object(c.get)(Object(Z.c)(e),"columns",[])}}),()=>({name:"metricVis",displayName:ae.getDisplayName(),args:[{name:"metric",displayName:ae.getMetricColumnDisplayName(),help:ae.getMetricColumnHelp(),argType:"vis_dimension",multi:!0,default:"{visdimension}"},{name:"bucket",displayName:ae.getBucketColumnDisplayName(),help:ae.getBucketColumnHelp(),argType:"vis_dimension",default:"{visdimension}"},{name:"palette",argType:"stops_palette"},{name:"font",displayName:ae.getFontColumnDisplayName(),help:ae.getFontColumnHelp(),argType:"font",default:'{font size=60 align="center"}'},{name:"colorMode",displayName:ae.getColorModeColumnDisplayName(),help:ae.getColorModeColumnHelp(),argType:"select",default:"Labels",options:{choices:[{value:"None",name:ae.getColorModeNoneOption()},{value:"Labels",name:ae.getColorModeLabelOption()},{value:"Background",name:ae.getColorModeBackgroundOption()}]}},{name:"showLabels",displayName:ae.getShowLabelsColumnDisplayName(),help:ae.getShowLabelsColumnHelp(),argType:"toggle",default:!0},{name:"percentageMode",displayName:ae.getPercentageModeColumnDisplayName(),help:ae.getPercentageModeColumnHelp(),argType:"toggle"}],resolve:({context:e})=>"ready"!==Object(Z.b)(e)?{columns:[]}:{columns:Object(c.get)(Object(Z.c)(e),"columns",[])}}),()=>({name:"heatmap_legend",displayName:le.getDisplayName(),args:[{name:"isVisible",displayName:le.getIsVisibleDisplayName(),help:le.getIsVisibleHelp(),argType:"toggle",default:!0},{name:"position",displayName:le.getPositionDisplayName(),help:le.getPositionHelp(),argType:"select",default:"right",options:{choices:[{value:"top",name:le.getPositionTopOption()},{value:"right",name:le.getPositionRightOption()},{value:"bottom",name:le.getPositionBottomOption()},{value:"left",name:le.getPositionLeftOption()}]}},{name:"maxLines",displayName:le.getMaxLinesDisplayName(),help:le.getMaxLinesHelp(),argType:"number",default:10},{name:"shouldTruncate",displayName:le.getShouldTruncateDisplayName(),help:le.getShouldTruncateHelp(),argType:"toggle"}],resolve:({context:e})=>"ready"!==Object(Z.b)(e)?{columns:[]}:{columns:Object(c.get)(Object(Z.c)(e),"columns",[])}}),()=>({name:"heatmap_grid",displayName:ne.getDisplayName(),args:[{name:"strokeWidth",displayName:ne.getStrokeWidthDisplayName(),help:ne.getStrokeWidthHelp(),argType:"number"},{name:"strokeColor",displayName:ne.getStrokeColorDisplayName(),help:ne.getStrokeColorDisplayName(),argType:"color_picker"},{name:"isCellLabelVisible",displayName:ne.getIsCellLabelVisibleDisplayName(),help:ne.getIsCellLabelVisibleHelp(),argType:"toggle"},{name:"isYAxisLabelVisible",displayName:ne.getIsYAxisLabelVisibleDisplayName(),help:ne.getIsYAxisLabelVisibleHelp(),argType:"toggle"},{name:"isYAxisTitleVisible",displayName:ne.getIsYAxisTitleVisibleDisplayName(),help:ne.getIsYAxisTitleVisibleHelp(),argType:"toggle"},{name:"isXAxisLabelVisible",displayName:ne.getIsXAxisLabelVisibleDisplayName(),help:ne.getIsXAxisLabelVisibleHelp(),argType:"toggle"},{name:"isXAxisTitleVisible",displayName:ne.getIsXAxisTitleVisibleDisplayName(),help:ne.getIsXAxisTitleVisibleHelp(),argType:"toggle"}],resolve:({context:e})=>"ready"!==Object(Z.b)(e)?{columns:[]}:{columns:Object(c.get)(Object(Z.c)(e),"columns",[])}})],{DropdownControl:ie}=f.r,{GetCell:oe}=f.r;var re=a(28);const{Image:pe}=f.r,{Markdown:ce}=f.r,{Metric:ue}=f.r,me=[{name:"Hidden",value:!1},{name:"Top Left",value:"nw"},{name:"Top Right",value:"ne"},{name:"Bottom Left",value:"sw"},{name:"Bottom Right",value:"se"}],{Pie:ge}=f.r,{Plot:de}=f.r,be=["lines","bars","points","fill","stack"];var he=a(43);const{Progress:ye}=f.r,{RepeatImage:je}=f.r,{RevealImage:fe}=f.r;var xe=a(0),ve=a(55);const{Render:Oe}=f.r,{Shape:Ne}=f.r,{Table:Ce}=f.r,{Timefilter:Te}=f.r,{Heatmap:Se}=f.r,Ee=[()=>({name:"dropdownControl",displayName:ie.getDisplayName(),modelArgs:[],args:[{name:"valueColumn",displayName:ie.getValueDisplayName(),help:ie.getValueHelp(),argType:"string",options:{confirm:"Set"}},{name:"filterColumn",displayName:ie.getFilterDisplayName(),help:ie.getFilterHelp(),argType:"string",options:{confirm:"Set"}},{name:"filterGroup",displayName:ie.getFilterGroupDisplayName(),help:ie.getFilterGroupHelp(),argType:"filterGroup"}]}),()=>({name:"getCell",displayName:oe.getDisplayName(),help:oe.getHelp(),modelArgs:["size"],requiresContext:!0,args:[]}),()=>({name:"image",displayName:pe.getDisplayName(),modelArgs:[],requiresContext:!1,args:[{name:"dataurl",argType:"imageUpload",resolve:async({args:e})=>{const{elasticLogo:t}=await Object(re.getElasticLogo)();return{dataurl:Object(re.resolveFromArgs)(e,t)}}},{name:"mode",displayName:pe.getModeDisplayName(),help:pe.getModeHelp(),argType:"select",options:{choices:[{value:"contain",name:pe.getContainMode()},{value:"cover",name:pe.getCoverMode()},{value:"stretch",name:pe.getStretchMode()}]}}]}),()=>({name:"markdown",displayName:ce.getDisplayName(),help:ce.getHelp(),modelArgs:[],requiresContext:!1,args:[{name:"_",displayName:ce.getContentDisplayName(),help:ce.getContentHelp(),argType:"textarea",default:'""',options:{confirm:"Apply"},multi:!0},{name:"font",argType:"font"},{name:"openLinksInNewTab",displayName:ce.getOpenLinksInNewTabDisplayName(),help:ce.getOpenLinksInNewTabHelp(),label:ce.getOpenLinksInNewTabLabelName(),argType:"toggle",default:!1,options:{labelValue:ce.getOpenLinksInNewTabLabelName()}}]}),()=>({name:"pie",displayName:ge.getDisplayName(),modelArgs:[["color",{label:"Slice Labels"}],["size",{label:"Slice Angles"}]],args:[{name:"palette",argType:"palette"},{name:"legend",displayName:ge.getLegendDisplayName(),help:ge.getLegendHelp(),argType:"select",default:"ne",options:{choices:me}},{name:"hole",displayName:ge.getHoleDisplayName(),help:ge.getHoleHelp(),argType:"range",default:50,options:{min:0,max:100}},{name:"labelRadius",displayName:ge.getLabelRadiusDisplayName(),help:ge.getLabelRadiusHelp(),argType:"range",default:100,options:{min:0,max:100}},{name:"radius",displayName:ge.getRadiusDisplayName(),help:ge.getRadiusHelp(),argType:"percentage",default:1},{name:"tilt",displayName:ge.getTiltDisplayName(),help:ge.getTiltHelp(),argType:"percentage",default:1},{name:"labels",displayName:ge.getLabelsDisplayName(),help:ge.getLabelsHelp(),argType:"toggle",default:!0,options:{labelValue:ge.getLabelsToggleSwitch()}},{name:"seriesStyle",argType:"seriesStyle",multi:!0},{name:"font",argType:"font"}],resolve:({context:e})=>"ready"!==Object(Z.b)(e)?{labels:[]}:{labels:Object(c.uniq)(Object(c.map)(Object(Z.c)(e).rows,"color").filter((e=>void 0!==e)))}}),()=>({name:"plot",displayName:de.getDisplayName(),modelArgs:["x","y","color","size","text"],args:[{name:"palette",argType:"palette"},{name:"legend",displayName:de.getLegendDisplayName(),help:de.getLegendHelp(),argType:"select",default:"ne",options:{choices:me}},{name:"xaxis",displayName:de.getXaxisDisplayName(),help:de.getXaxisHelp(),argType:"axisConfig",default:!0},{name:"yaxis",displayName:de.getYaxisDisplayName(),help:de.getYaxisHelp(),argType:"axisConfig",default:!0},{name:"font",argType:"font"},{name:"defaultStyle",displayName:de.getDefaultStyleDisplayName(),help:de.getDefaultStyleHelp(),argType:"seriesStyle",default:"{seriesStyle points=5}",options:{include:be}},{name:"seriesStyle",argType:"seriesStyle",options:{include:be},multi:!0}],resolve:({context:e})=>"ready"!==Object(Z.b)(e)?{labels:[]}:{labels:Object(c.uniqBy)(Object(c.map)(Object(Z.c)(e).rows,"color").filter((e=>void 0!==e)))}}),()=>({name:"progress",displayName:ye.getDisplayName(),modelArgs:[["_",{label:"Value"}]],requiresContext:!1,args:[{name:"shape",displayName:ye.getShapeDisplayName(),help:ye.getShapeHelp(),argType:"select",options:{choices:Object(he.getAvailableProgressShapes)().map((e=>({value:e,name:e[0].toUpperCase()+e.slice(1).replace(/([A-Z])/g," $1")})))}},{name:"max",displayName:ye.getMaxDisplayName(),help:ye.getMaxHelp(),argType:"number",default:"1"},{name:"valueColor",displayName:ye.getValueColorDisplayName(),help:ye.getValueColorHelp(),argType:"color",default:"#1785b0"},{name:"valueWeight",displayName:ye.getValueWeightDisplayName(),help:ye.getValueWeightHelp(),argType:"number",default:"20"},{name:"barColor",displayName:ye.getBarColorDisplayName(),help:ye.getBarColorHelp(),argType:"color",default:"#f0f0f0"},{name:"barWeight",displayName:ye.getBarWeightDisplayName(),help:ye.getBarWeightHelp(),argType:"number",default:"20"},{name:"label",displayName:ye.getLabelDisplayName(),help:ye.getLabelHelp(),argType:"toggle",default:"true"},{name:"font",displayName:ye.getFontDisplayName(),help:ye.getFontHelp(),argType:"font",default:`{font size=24 family="${q.openSans.value}" color="#000000" align=center}`}]}),()=>({name:"repeatImage",displayName:je.getDisplayName(),modelArgs:[["_",{label:"Value"}]],args:[{name:"image",displayName:je.getImageDisplayName(),help:je.getImageHelp(),argType:"imageUpload"},{name:"emptyImage",displayName:je.getEmptyImageDisplayName(),help:je.getEmptyImageHelp(),argType:"imageUpload"},{name:"size",displayName:je.getSizeDisplayName(),help:je.getSizeHelp(),argType:"number",default:"100"},{name:"max",displayName:je.getMaxDisplayName(),help:je.getMaxHelp(),argType:"number",default:"1000"}]}),()=>({name:"revealImage",displayName:fe.getDisplayName(),modelArgs:[["_",{label:"Value"}]],args:[{name:"image",displayName:fe.getImageDisplayName(),help:fe.getImageHelp(),argType:"imageUpload"},{name:"emptyImage",displayName:fe.getEmptyImageDisplayName(),help:fe.getEmptyImageHelp(),argType:"imageUpload"},{name:"origin",displayName:fe.getOriginDisplayName(),help:fe.getOriginHelp(),argType:"select",options:{choices:[{value:"top",name:fe.getOriginTop()},{value:"left",name:fe.getOriginLeft()},{value:"bottom",name:fe.getOriginBottom()},{value:"right",name:fe.getOriginRight()}]}}]}),()=>({name:"render",displayName:Oe.getDisplayName(),help:Oe.getHelp(),modelArgs:[],requiresContext:!1,args:[{name:"containerStyle",argType:"containerStyle"},{name:"css",displayName:ve.e,help:Oe.getCssHelp(),argType:"textarea",default:`"${xe.q}"`,options:{confirm:Oe.getCssApply()}}]}),()=>({name:"shape",displayName:Ne.getDisplayName(),modelArgs:[],requiresContext:!1,args:[{name:"_",displayName:Ne.getShapeDisplayName(),argType:"shape",options:{shapes:Object(he.getAvailableShapes)()}},{name:"fill",displayName:Ne.getFillDisplayName(),argType:"color",help:Ne.getFillHelp()},{name:"border",displayName:Ne.getBorderDisplayName(),argType:"color",help:Ne.getBorderHelp()},{name:"borderWidth",displayName:Ne.getBorderWidthDisplayName(),argType:"number",help:Ne.getBorderWidthHelp()},{name:"maintainAspect",displayName:Ne.getMaintainAspectDisplayName(),argType:"toggle",help:Ne.getMaintainAspectHelp(),options:{labelValue:Ne.getMaintainAspectLabelName()}}]}),()=>({name:"table",displayName:Ce.getDisplayName(),help:Ce.getHelp(),modelArgs:[],args:[{name:"font",argType:"font"},{name:"perPage",displayName:Ce.getPerPageDisplayName(),help:Ce.getPerPageHelp(),argType:"select",default:10,options:{choices:["",5,10,25,50,100].map((e=>({name:String(e),value:e})))}},{name:"paginate",displayName:Ce.getPaginateDisplayName(),help:Ce.getPaginateHelp(),argType:"toggle",default:!0,options:{labelValue:Ce.getPaginateToggleSwitch()}},{name:"showHeader",displayName:Ce.getShowHeaderDisplayName(),help:Ce.getShowHeaderHelp(),argType:"toggle",default:!0,options:{labelValue:Ce.getShowHeaderToggleSwitch()}}]}),()=>({name:"timefilterControl",displayName:Te.getDisplayName(),modelArgs:[],args:[{name:"column",displayName:Te.getColumnDisplayName(),help:Te.getColumnHelp(),argType:"string",options:{confirm:Te.getColumnConfirm()}},{name:"filterGroup",displayName:Te.getFilterGroupDisplayName(),help:Te.getFilterGroupHelp(),argType:"filterGroup"}]}),()=>({name:"heatmap",displayName:Se.getDisplayName(),args:[{name:"xAccessor",displayName:Se.getXAccessorDisplayName(),help:Se.getXAccessorHelp(),argType:"vis_dimension",default:"{visdimension}"},{name:"yAccessor",displayName:Se.getYAccessorDisplayName(),help:Se.getYAccessorHelp(),argType:"vis_dimension",default:"{visdimension}"},{name:"valueAccessor",displayName:Se.getValueAccessorDisplayName(),help:Se.getValueAccessorHelp(),argType:"vis_dimension",default:"{visdimension}"},{name:"splitRowAccessor",displayName:Se.getSplitRowAccessorDisplayName(),help:Se.getSplitRowAccessorHelp(),argType:"vis_dimension",default:"{visdimension}"},{name:"splitColumnAccessor",displayName:Se.getSplitColumnAccessorDisplayName(),help:Se.getSplitColumnAccessorHelp(),argType:"vis_dimension",default:"{visdimension}"},{name:"showTooltip",displayName:Se.getShowTooltipDisplayName(),help:Se.getShowTooltipHelp(),argType:"toggle",default:!0},{name:"highlightInHover",displayName:Se.getHighlightInHoverDisplayName(),help:Se.getHighlightInHoverHelp(),argType:"toggle"},{name:"lastRangeIsRightOpen",displayName:Se.getLastRangeIsRightOpenDisplayName(),help:Se.getLastRangeIsRightOpenHelp(),argType:"toggle",default:!0},{name:"palette",argType:"stops_palette"},{name:"legend",displayName:Se.getLegendDisplayName(),help:Se.getLegendHelp(),type:"model",argType:"heatmap_legend"},{name:"gridConfig",displayName:Se.getGridConfigDisplayName(),help:Se.getGridConfigHelp(),type:"model",argType:"heatmap_grid"}],resolve:({context:e})=>"ready"!==Object(Z.b)(e)?{columns:[]}:{columns:Object(c.get)(Object(Z.c)(e),"columns",[])}})],De=[(e,t)=>()=>({name:"metric",displayName:ue.getDisplayName(),modelArgs:[["_",{label:ue.getNumberDisplayName()}]],requiresContext:!1,args:[{name:"metricFormat",displayName:ue.getMetricFormatDisplayName(),help:ue.getMetricFormatHelp(),argType:"numberFormat",default:`"${e.uiSettings.get($.FORMATS_UI_SETTINGS.FORMAT_NUMBER_DEFAULT_PATTERN)}"`},{name:"_",displayName:ue.getLabelDisplayName(),help:ue.getLabelHelp(),argType:"string",default:'""'},{name:"metricFont",displayName:ue.getMetricFontDisplayName(),help:ue.getMetricFontHelp(),argType:"font",default:`{font size=48 family="${q.openSans.value}" color="#000000" align=center lHeight=48}`},{name:"labelFont",displayName:ue.getLabelFontDisplayName(),help:ue.getLabelFontHelp(),argType:"font",default:`{font size=18 family="${q.openSans.value}" color="#000000" align=center}`}]})],Fe=(e,t)=>[...Ee,...De.map((a=>a(e,t)))],Ae=({onValueChange:e,argValue:t})=>Object(x.jsx)(r.EuiSwitch,{compressed:!0,checked:Boolean(t),onChange:()=>e(!Boolean(t)),showLabel:!1,label:""});Ae.displayName="AxisConfigSimpleInput";var Ie=a(76),_e=a.n(Ie),we=a(124);const{AxisConfig:ke}=we.a,{set:He}=_e.a,Pe={type:"expression",chain:[{type:"function",function:"axisConfig",arguments:{}}]};class extended_template_ExtendedTemplate extends s.PureComponent{constructor(...e){super(...e),n()(this,"getArgValue",((e,t)=>Object(c.get)(this.props.argValue,`chain.0.arguments.${e}.0`,t))),n()(this,"setArgValue",(e=>t=>{if(!t||!t.target)return;const a=t.target.value,{argValue:l,onValueChange:n}=this.props;n(He("boolean"==typeof l?Pe:l,`chain.0.arguments.${e}.0`,a))}))}render(){if("boolean"==typeof this.props.argValue&&!1===this.props.argValue)return Object(x.jsx)(r.EuiText,{color:"subdued",size:"xs"},Object(x.jsx)("p",null,ke.getDisabledText()));const e={xaxis:[{value:"bottom",text:ke.getPositionBottom()},{value:"top",text:ke.getPositionTop()}],yaxis:[{value:"left",text:ke.getPositionLeft()},{value:"right",text:ke.getPositionRight()}]},t=this.props.typeInstance.name,a=this.getArgValue("position",e[t][0].value),l=e[t];return Object(x.jsx)(s.Fragment,null,Object(x.jsx)(r.EuiFormRow,{label:ke.getPositionLabel(),display:"columnCompressed"},Object(x.jsx)(r.EuiSelect,{compressed:!0,value:a,options:l,onChange:this.setArgValue("position")})),Object(x.jsx)(r.EuiSpacer,{size:"s"}))}}n()(extended_template_ExtendedTemplate,"displayName","AxisConfigExtendedInput");const{AxisConfig:Le}=f.b,{DataColumn:Ve}=f.b,ze=({onChange:e,value:t,onlymath:a})=>{const l=[{text:Ve.getOptionAverage(),value:"mean"},{text:Ve.getOptionCount(),value:"size"},{text:Ve.getOptionFirst(),value:"first"},{text:Ve.getOptionLast(),value:"last"},{text:Ve.getOptionMax(),value:"max"},{text:Ve.getOptionMedian(),value:"median"},{text:Ve.getOptionMin(),value:"min"},{text:Ve.getOptionSum(),value:"sum"},{text:Ve.getOptionUnique(),value:"unique"}];return a||l.unshift({text:Ve.getOptionValue(),value:""}),Object(x.jsx)(r.EuiSelect,{compressed:!0,options:l,value:t,onChange:e})};ze.defaultProps={value:""};var Me=a(217),Re=a(106);const{DataColumn:Be}=f.b,Ue=e=>e.match(/\s/)?`'${e}'`:e,Ge=e=>!e||0===e.length,qe=(e,t)=>{if("string"!==Object(u.getType)(e))return{error:"argValue is not a string type"};try{const a=t.find((({name:t})=>e===t)),l=function(e){if(""===e)return{fn:"",column:""};const t=Object(Me.parse)(e);if("number"==typeof t)throw new Error("Cannot render scalar values or complex math expressions");if("variable"===t.type)return{fn:"",column:Object(Re.a)(t.value)};if("function"===t.type&&1===t.args.length&&"number"!=typeof t.args[0]&&"variable"===t.args[0].type)return{fn:t.name,column:Object(Re.a)(t.args[0].value)};throw new Error("Cannot render scalar values or complex math expressions")}(a?Ue(a.name):e),n=t.some((({name:e})=>l.column===e));return{...l,column:n?l.column:""}}catch(e){return{error:e.message}}},$e=({onValueChange:e,resolved:{columns:t},argValue:a,renderError:l,argId:n,typeInstance:i})=>{const[o,p]=Object(s.useState)(qe(a,t));Object(s.useEffect)((()=>{p(qe(a,t))}),[a,t]);const u=i.options.allowedTypes||!1,m=i.options.onlyMath||!1,g=Object(s.useCallback)(((a,l)=>{if("size"===a){const n=l||t[0]&&t[0].name||"";if(n)return e(`${a}(${Ue(n)})`)}return Ge(l)?p({...o,fn:a}):Ge(a)?e(l):void e(`${a}(${Ue(l)})`)}),[o,e,t]),d=Object(s.useCallback)((({target:{value:e}})=>g(e,o.column)),[o.column,g]),b=Object(s.useCallback)((({target:{value:e}})=>g(o.fn,e)),[o.fn,g]);if(o.error)return l(),null;const h=Object(c.sortBy)(t,"name").filter((e=>!u||u.includes(e.type))).map((({name:e})=>({value:e,text:e})));return Object(x.jsx)(r.EuiFlexGroup,{gutterSize:"s",id:n,direction:"row"},Object(x.jsx)(r.EuiFlexItem,{grow:!1},Object(x.jsx)(ze,{id:n,value:o.fn,onlymath:m,onChange:d})),Object(x.jsx)(r.EuiFlexItem,null,Object(x.jsx)(r.EuiSelect,{compressed:!0,options:[{value:"",text:"select column",disabled:!0},...h],value:o.column,onChange:b})))};var We=a(25),Ye=a.n(We);class format_select_FormatSelect extends s.PureComponent{constructor(...e){super(...e),n()(this,"state",{isCustomFormat:!this.props.formatOptions.map((({value:e})=>e)).includes(this.props.argValue)}),n()(this,"_options",this.props.formatOptions.concat({value:"custom",text:"Custom"})),n()(this,"_handleTextChange",(e=>this.props.onValueChange(e.target.value))),n()(this,"_handleSelectChange",(e=>{const{onValueChange:t,defaultCustomFormat:a}=this.props,{value:l}=this._options[e.target.selectedIndex];return"custom"===l?(this.setState({isCustomFormat:!0}),t(a)):(this.state.isCustomFormat&&this.setState({isCustomFormat:!1}),t(l))}))}render(){const{argId:e,argValue:t,defaultCustomFormat:a}=this.props,{isCustomFormat:l}=this.state;return Object(x.jsx)(s.Fragment,null,Object(x.jsx)(r.EuiSelect,{compressed:!0,id:e,value:l?"custom":t,options:this._options,onChange:this._handleSelectChange}),l&&Object(x.jsx)(s.Fragment,null,Object(x.jsx)(r.EuiSpacer,{size:"s"}),Object(x.jsx)(r.EuiFieldText,{placeholder:a,value:t,compressed:!0,onChange:this._handleTextChange})))}}const Xe=({dateFormats:e,onValueChange:t,argValue:a,argId:l})=>Object(x.jsx)(format_select_FormatSelect,{argId:l,argValue:a,formatOptions:e,onValueChange:t,defaultCustomFormat:"M/D/YY h:ma"}),{DateFormat:Qe}=f.b,{FilterGroup:Je}=f.b,Ze=({onValueChange:e,argValue:t,argId:a,filterGroups:l})=>{const[n,i]=Object(s.useState)(""),[o,p]=Object(s.useState)(!1),c=t&&!l.includes(t)?[{text:t}]:[],u=[{text:"No group",value:""}].concat(c,l.map((e=>({text:e})))),m=t=>{t.preventDefault(),e(n),p(!1),i("")},g=Object(x.jsx)("form",{onSubmit:m},Object(x.jsx)(r.EuiFlexGroup,{gutterSize:"s"},Object(x.jsx)(r.EuiFlexItem,null,Object(x.jsx)(r.EuiFieldText,{autoFocus:!0,compressed:!0,type:"text",value:n,onChange:e=>i(e.target.value)})),Object(x.jsx)(r.EuiFlexItem,{grow:!1,className:"canvasSidebar__panel-noMinWidth"},Object(x.jsx)(r.EuiButton,{type:"submit",size:"s",onClick:m},Je.getButtonSet()))),Object(x.jsx)(r.EuiSpacer,{size:"s"}),Object(x.jsx)(r.EuiButtonEmpty,{color:"danger",size:"xs",onClick:()=>p(!o),flush:"left"},Je.getButtonCancel())),d=Object(x.jsx)(s.Fragment,null,Object(x.jsx)(r.EuiSelect,{compressed:!0,id:a,value:t||"",options:u,onChange:t=>{const a=t.target.value;e(a)}}),Object(x.jsx)(r.EuiSpacer,{size:"s"}),Object(x.jsx)(r.EuiButtonEmpty,{size:"xs",onClick:()=>p(!o),flush:"left"},Je.getCreateNewGroup()));return o?g:d};var Ke=a(3);const et=()=>Ke.i18n.translate("xpack.canvas.assetpicker.assetAltText",{defaultMessage:"Asset thumbnail"});class asset_picker_AssetPicker extends s.PureComponent{componentDidMount(){const e=document.getElementById("canvasAssetPicker__selectedAsset");e&&e.scrollIntoView()}render(){const{assets:e,selected:t,onChange:a}=this.props;return Object(x.jsx)(r.EuiFlexGrid,{id:"canvasAssetPicker",className:"canvasAssetPicker",gutterSize:"s",columns:4},e.map((e=>Object(x.jsx)(r.EuiFlexItem,{key:e.id,id:e.id===t?"canvasAssetPicker__selectedAsset":"",className:"canvasCheckered"},Object(x.jsx)(r.EuiLink,{className:"canvasAssetPicker__link",disabled:e.id===t,onClick:()=>a(e)},Object(x.jsx)(r.EuiImage,{url:e.value,alt:et()}),e.id===t&&Object(x.jsx)(r.EuiIcon,{className:"canvasAssetPicker__selected",type:"checkInCircleFilled"}))))))}}var tt=a(21);const{ImageUpload:at}=f.b,lt=({url:e,inputRef:t,onSubmit:a})=>Object(x.jsx)(r.EuiFormRow,{display:"rowCompressed",onSubmit:a,className:"eui-textRight"},Object(x.jsx)(r.EuiFlexGroup,{gutterSize:"xs"},Object(x.jsx)(r.EuiFlexItem,null,Object(x.jsx)(r.EuiFieldText,{compressed:!0,defaultValue:e,inputRef:t,placeholder:at.getUrlFieldPlaceholder(),"aria-label":at.getUrlFieldPlaceholder()})),Object(x.jsx)(r.EuiFlexItem,{grow:!1},Object(x.jsx)(r.EuiButton,{type:"submit",size:"s",onClick:a},"Set"))));var nt=a(116);const{ImageUpload:st}=f.b,it=({loading:e,onChange:t})=>e?Object(x.jsx)(nt.a,{animated:!0,text:st.getImageUploading()}):Object(x.jsx)(r.EuiFilePicker,{initialPromptText:st.getFileUploadPrompt(),onChange:t,compressed:!0,display:"default",className:"canvasImageUpload",accept:"image/*"}),{ImageUpload:ot}=f.b;class image_upload_ImageUpload extends i.a.Component{constructor(e){super(e),n()(this,"updateAST",(e=>{this.props.onValueChange({type:"expression",chain:[{type:"function",function:"asset",arguments:{_:[e]}}]})})),n()(this,"handleUpload",(e=>{const{onAssetAdd:t}=this.props,[a]=e,[l,n]=Object(c.get)(a,"type","").split("/");"image"===l&&xe.E.indexOf(n)>=0&&(this.setState({loading:!0}),Object(tt.encode)(a).then((e=>t("dataurl",e))).then((e=>{this.updateAST(e),this._isMounted&&this.setState({loading:!1})})))})),n()(this,"changeUrlType",(e=>{this.setState({urlType:e})})),n()(this,"setSrcUrl",(()=>{const{value:e}=this.inputRefs.srcUrlText;this.setState({url:e});const{onValueChange:t}=this.props;t(e)}));const t=e.resolvedArgValue||e.argValue||null;let a=Object.keys(e.assets).length?"asset":"file";Object(tt.isValidHttpUrl)(t)&&(a="link"),this.inputRefs={},this.state={loading:!1,url:t,urlType:a}}componentDidMount(){this._isMounted=!0}componentWillUnmount(){this._isMounted=!1}render(){const{loading:e,url:t,urlType:a}=this.state,l=Object.values(this.props.assets);let n={};const s=[{id:"file",label:ot.getFileUrlType()},{id:"link",label:ot.getLinkUrlType()}];l.length&&(s.unshift({id:"asset",label:ot.getAssetUrlType()}),n=l.find((({value:e})=>e===t))||{});const i=Object(x.jsx)(r.EuiFormRow,{display:"rowCompressed"},Object(x.jsx)(r.EuiButtonGroup,{buttonSize:"compressed",options:s,idSelected:a,onChange:this.changeUrlType,isFullWidth:!0,className:"canvasSidebar__buttonGroup",legend:ot.getUrlTypeChangeLegend()})),o={file:Object(x.jsx)(it,{loading:e,onChange:this.handleUpload}),link:Object(x.jsx)(lt,{url:n.id?"":t,inputRef:e=>this.inputRefs.srcUrlText=e,onSubmit:this.setSrcUrl}),asset:Object(x.jsx)(asset_picker_AssetPicker,{assets:l,selected:n.id,onChange:({id:e})=>this.updateAST(e)})};return Object(x.jsx)("div",{className:"canvasSidebar__panel-noMinWidth",style:{position:"relative"}},i,Object(x.jsx)(r.EuiSpacer,{size:"s"}),o[a],Object(x.jsx)(r.EuiSpacer,{size:"s"}))}}var rt=a(225),pt=a.n(rt),ct=a(77),ut=a.n(ct);const mt=(e,t=150)=>({argValue:a,onValueChange:l,...n})=>{const[i,o]=Object(s.useState)(a),[,r]=pt()((()=>{i===a||ut()(i,a)||l(i)}),t,[i]);return Object(s.useEffect)((()=>()=>{r()}),[r]),Object(x.jsx)(e,N()({},n,{argValue:i,onValueChange:o}))},{Number:gt}=f.b,dt=({argId:e,argValue:t,typeInstance:a,onValueChange:l})=>{var n;const[i,o]=Object(s.useState)(t),p=null==a||null===(n=a.options)||void 0===n?void 0:n.confirm;Object(s.useEffect)((()=>{o(t)}),[t]);const c=Object(s.useCallback)((e=>{const{value:t}=e.target;o(t),p||l(t)}),[p,l]);return Object(x.jsx)(r.EuiFlexGroup,{gutterSize:"s"},Object(x.jsx)(r.EuiFlexItem,null,Object(x.jsx)(r.EuiFieldNumber,{compressed:!0,id:e,value:Number(i),onChange:c})),p&&Object(x.jsx)(r.EuiFlexItem,{grow:!1},Object(x.jsx)(r.EuiButton,{size:"s",onClick:()=>l(Number(i))},p)))},bt=({numberFormats:e,onValueChange:t,argValue:a,argId:l})=>Object(x.jsx)(format_select_FormatSelect,{argId:l,argValue:a,formatOptions:e,onValueChange:t,defaultCustomFormat:"0.0a"}),{NumberFormat:ht}=f.b;var yt=a(78);const{Palette:jt}=f.b;function ft(e,t,a,l){return Object(u.getType)(t)!==a&&l(),[...e,t]}const xt=({chain:e},t)=>{var a;if(1!==e.length||"palette"!==e[0].function)return t(),null;const{_:l,stop:n,gradient:s,...i}=null!==(a=e[0].arguments)&&void 0!==a?a:{};try{var o,r;const e=null!==(o=null==l?void 0:l.reduce(((e,a)=>ft(e,a,"string",t)),[]))&&void 0!==o?o:[],a=null!==(r=null==n?void 0:n.reduce(((e,a)=>ft(e,a,"number",t)),[]))&&void 0!==r?r:[],c=!(null==s||!s[0]),u=(a.length?yt.identifyPartialPalette:yt.identifyPalette)({colors:e,gradient:c}),m=Object.keys(i).reduce(((e,t)=>{var a,l;return e[t]=(null===(a=i[t])||void 0===a?void 0:a.length)>1?i[t]:null===(l=i[t])||void 0===l?void 0:l[0],e}),{});return u?{...u,...m,stops:a}:(p={colors:e,gradient:c,stops:a,...m},{id:"custom",label:jt.getCustomPaletteLabel(),...p})}catch(e){t()}var p;return null},vt=(e,t=[])=>{var a;const l=null!==(a=t.filter((t=>t.id===(null==e?void 0:e.id)))[0])&&void 0!==a?a:null;var n;return null===l?null!==(n=t.filter((t=>Object(c.isEqual)(t.colors,null==e?void 0:e.colors)))[0])&&void 0!==n?n:null:l},Ot=({id:e,label:t,gradient:a,colors:l})=>({value:e,title:t,type:a?"gradient":"fixed",palette:l}),Nt=()=>Ke.i18n.translate("xpack.canvas.palettePicker.emptyPaletteLabel",{defaultMessage:"None"}),Ct=e=>{var t;const{palette:a,palettes:l,onChange:n=(()=>{})}=e,s=l.map(Ot),i=vt(null!=a?a:null,l);return Object(x.jsx)(r.EuiColorPalettePicker,{id:e.id,compressed:!0,palettes:[{value:"clear",title:Nt(),type:"text"},...s],onChange:e=>{const t=l.find((t=>t.id===e));n(t||null)},valueOfSelected:null!==(t=null==i?void 0:i.id)&&void 0!==t?t:"clear"})};var Tt=a(132);const St=()=>Ke.i18n.translate("xpack.canvas.palettePicker.noPaletteFoundErrorTitle",{defaultMessage:"Color palette not found"}),Et=e=>{const{palette:t,palettes:a,onChange:l=(()=>{})}=e,n=a.map(Ot),s=vt(null!=t?t:null,a);return Object(x.jsx)(r.EuiColorPalettePicker,{id:e.id,compressed:!0,palettes:n,onChange:e=>{const t=a.find((t=>t.id===e));if(!t)throw new Error(St());l(t)},valueOfSelected:null==s?void 0:s.id})},Dt=e=>{const{additionalPalettes:t=[]}=e,a=[...Tt.c,...t];return e.clearable?Object(x.jsx)(Ct,{palettes:a,palette:e.palette,onChange:e.onChange}):Object(x.jsx)(Et,{palettes:a,palette:e.palette,onChange:e.onChange})},Ft=()=>Ke.i18n.translate("xpack.canvas.stopsColorPicker.deleteColorStopLabel",{defaultMessage:"Delete"}),At=e=>{const t=!isNaN(e.stop);return{valid:t,stop:t,color:!0}},It=e=>{const{stop:t,color:a,onDelete:l,onChange:n,removable:i=!0}=e,[o,p]=Object(s.useState)({stop:null!=t?t:0,color:null!=a?a:""}),[c,u]=Object(s.useState)({stop:!0,color:!0}),m=e=>{p(e)},[,g]=pt()((()=>{if(a===o.color&&t===o.stop)return;const{valid:e,...l}=At(o);e?n(o):u(l)}),150,[o]);return Object(s.useEffect)((()=>{const e={stop:null!=t?t:0,color:null!=a?a:""};p(e);const{valid:l,...n}=At(e);u(n)}),[a,t]),Object(s.useEffect)((()=>()=>{g()}),[g]),Object(x.jsx)(r.EuiFlexGroup,{alignItems:"center",gutterSize:"s",responsive:!1},Object(x.jsx)(r.EuiFlexItem,null,Object(x.jsx)(r.EuiFieldNumber,{compressed:!0,value:o.stop,min:-1/0,onChange:({target:{valueAsNumber:e}})=>m({...o,stop:e}),isInvalid:!c.stop})),Object(x.jsx)(r.EuiFlexItem,null,Object(x.jsx)(r.EuiColorPicker,{secondaryInputDisplay:"top",color:o.color,showAlpha:!0,compressed:!0,onChange:e=>{m({...o,color:e})},isInvalid:!c.color})),Object(x.jsx)(r.EuiFlexItem,{grow:!1},Object(x.jsx)(r.EuiButtonIcon,{iconType:"trash",color:"danger",title:Ft(),onClick:l,isDisabled:!i,"aria-label":Ft()})))},_t=Object(r.htmlIdGenerator)(),wt=({stops:e=[],colors:t})=>Object(c.zip)(e,t).map((([e,t])=>((e=0,t="")=>({stop:e,color:t,id:_t()}))(e,t))),kt=(e=[],t)=>{var a;const l=Object(c.take)(e,t),n=l.length;return n===t?l:[...l,...Array(t-n).fill(null!==(a=l[n-1])&&void 0!==a?a:"")]},Ht=()=>Ke.i18n.translate("xpack.canvas.stopsPalettePicker.addColorStopLabel",{defaultMessage:"Add color stop"}),Pt=()=>Ke.i18n.translate("xpack.canvas.stopsPalettePicker.colorStopsLabel",{defaultMessage:"Color stops"}),Lt=[0,1],Vt="default",zt={[Vt]:Dt,stops:e=>{var t;const{palette:a,onChange:l}=e,n=Object(s.useMemo)((()=>null!=a&&a.stops&&a.stops.length?a.stops:Lt),[null==a?void 0:a.stops]),o=Object(s.useMemo)((()=>kt(null==a?void 0:a.colors,n.length)),[null==a?void 0:a.colors,n.length]),p=Object(s.useCallback)((t=>{if(t){var l;const s=kt(null==t?void 0:t.colors,n.length);null===(l=e.onChange)||void 0===l||l.call(e,{...a,...t,colors:s,stops:n})}}),[a,e,n]);_()((()=>{p({range:"number",continuity:"below",...a})}));const u=Object(s.useMemo)((()=>wt({stops:n,colors:o})),[o,n]),m=Object(s.useCallback)((e=>Object(c.flowRight)(null!=l?l:c.identity,(e=>t=>{const a=t.reduce(((e,{color:t,stop:a})=>(e.colors.push(null!=t?t:""),e.stops.push(a),e)),{colors:[],stops:[]});return{...e,...a}})(a),e)),[l,a]),g=Object(s.useCallback)((e=>m((e=>t=>(t.splice(e,1),t))(e))(u)),[u,m]),d=Object(s.useCallback)(((e,t)=>m(((e,t)=>a=>(a.splice(e,1,t),a))(e,t))(u)),[u,m]),b=Object(s.useCallback)((()=>m((e=>t=>{const a=t.length-1,l=a>=0?t[a].stop+1:0,n=a+1;return[...t,{stop:l,color:e.colors.length>n+1?e.colors[n]:e.colors[e.colors.length-1]}]})(a))(u)),[a,u,m]),h=u.map((({id:e,...t},a)=>Object(x.jsx)(r.EuiFlexItem,null,Object(x.jsx)(It,N()({},t,{key:a,removable:a>=2,onDelete:()=>g(a),onChange:e=>d(a,e)})))));return Object(x.jsx)(i.a.Fragment,null,Object(x.jsx)(r.EuiFlexGroup,{direction:"column",gutterSize:"s"},Object(x.jsx)(r.EuiFlexItem,null,Object(x.jsx)(Dt,{additionalPalettes:"custom"===(null==a?void 0:a.id)?[a]:[],palette:null!==(t=e.palette)&&void 0!==t?t:void 0,onChange:p,clearable:!1})),Object(x.jsx)(r.EuiFormRow,{label:Pt()},Object(x.jsx)(r.EuiFlexGroup,{gutterSize:"s",direction:"column"},h))),Object(x.jsx)(r.EuiSpacer,{size:"s"}),Object(x.jsx)(r.EuiButtonEmpty,{iconType:"plusInCircle",color:"primary","aria-label":Ht(),size:"xs",flush:"left",onClick:b},Ht()))}},{Palette:Mt,StopsPalette:Rt}=f.b,Bt=({onValueChange:e,argId:t,argValue:a,renderError:l,typeInstance:n})=>{var s;const i=xt(a,l);if(!i)return l(),null;const o=((e="default")=>{var t;return null!==(t=zt[e])&&void 0!==t?t:zt.default})(null===(s=n.options)||void 0===s?void 0:s.type);return Object(x.jsx)(o,{id:t,palette:i,onChange:t=>{var a;let l={};null!==(a=t.stops)&&void 0!==a&&a.length&&(l={stop:t.stops,...t.range?{range:[t.range]}:{},...t.continuity?{continuity:[t.continuity]}:{}});const n={type:"expression",chain:[{type:"function",function:"palette",arguments:{_:t.colors,gradient:[t.gradient],...l}}]};e(n)}})},Ut=e=>{var t;const{typeInstance:a}=e,{type:l,...n}=null!==(t=a.options)&&void 0!==t?t:{};return Object(x.jsx)(Bt,N()({},e,{typeInstance:{...e.typeInstance,options:n}}))},Gt=e=>{var t;return Object(x.jsx)(Bt,N()({},e,{typeInstance:{...e.typeInstance,options:{...null!==(t=e.typeInstance.options)&&void 0!==t?t:{},type:"stops"}}}))},qt={default:"{palette #882E72 #B178A6 #D6C1DE #1965B0 #5289C7 #7BAFDE #4EB265 #90C987 #CAE0AB #F7EE55 #F6C141 #F1932D #E8601C #DC050C}"},{Percentage:$t}=f.b,Wt=({onValueChange:e,argValue:t})=>{const[a,l]=Object(s.useState)(t),n=Object(s.useCallback)((t=>{const{value:a}=t.target,n=Number(a)/100;l(n),e(n)}),[e]);return Object(x.jsx)(r.EuiRange,{compressed:!0,min:0,max:100,showLabels:!0,showInput:!0,value:100*a,onChange:n})},{Range:Yt}=f.b,Xt=({typeInstance:e,onValueChange:t,argValue:a})=>{const{min:l,max:n,step:i}=e.options,[o,p]=Object(s.useState)(a),c=Object(s.useCallback)((e=>{const{value:a}=e.target,l=Number(a);p(l),t(l)}),[t]);return Object(x.jsx)(r.EuiRange,{compressed:!0,min:l,max:n,step:i,showLabels:!0,showInput:!0,value:o,onChange:c})},{Select:Qt}=f.b,Jt=({typeInstance:e,onValueChange:t,argValue:a,argId:l})=>{const n=e.options.choices.map((({value:e,name:t})=>({value:e,text:t})));return Object(x.jsx)(r.EuiSelect,{compressed:!0,id:l,value:a,options:n,onChange:e=>{const{value:a}=n[e.target.selectedIndex];return t(a)}})};var Zt=a(84),Kt=a(30);const ea=Object(tt.withSuspense)(Kt.LazyShapeDrawer);function ta(e,t){const{minX:a,minY:l,width:n,height:s}=t;return{minX:a-e/2,minY:l-e/2,width:n+e,height:s+e}}const aa=({shape:e})=>{const[t,a]=Object(s.useState)(Object(Kt.getDefaultShapeData)()),l=Object(s.useCallback)((e=>{null!==e&&a(e.getData())}),[]);return e?Object(x.jsx)("div",{className:"canvasShapePreview"},Object(x.jsx)(ea,{ref:l,shapeType:e,shapeAttributes:{fill:"none",stroke:"black",viewBox:ta(5,t.viewBox)}})):Object(x.jsx)("div",{className:"canvasShapePreview"})},la=({shapes:e,onChange:t=(()=>{})})=>Object(x.jsx)(r.EuiFlexGrid,{gutterSize:"s",columns:4,className:"canvasShapePicker"},e.sort().map((e=>Object(x.jsx)(r.EuiFlexItem,{key:e},Object(x.jsx)(r.EuiLink,{onClick:()=>t(e)},Object(x.jsx)(aa,{shape:e})))))),na=({shapes:e,onChange:t,value:a,ariaLabel:l})=>Object(x.jsx)(Zt.a,{panelClassName:"canvas",button:e=>Object(x.jsx)(r.EuiPanel,{paddingSize:"s",hasShadow:!1},Object(x.jsx)(r.EuiLink,{"aria-label":l,style:{fontSize:0},onClick:e},Object(x.jsx)(aa,{shape:a})))},(()=>Object(x.jsx)(la,{onChange:t,shapes:e}))),{Shape:sa}=f.b,ia=({onValueChange:e,argValue:t,typeInstance:a})=>Object(x.jsx)(r.EuiFlexGroup,{gutterSize:"s"},Object(x.jsx)(r.EuiFlexItem,{grow:!1},Object(x.jsx)(na,{value:t,onChange:e,shapes:a.options.shapes,ariaLabel:a.displayName}))),{String:oa}=f.b,ra=({argValue:e,typeInstance:t,onValueChange:a,argId:l})=>{var n;const[i,o]=Object(s.useState)(e),p=null==t||null===(n=t.options)||void 0===n?void 0:n.confirm;Object(s.useEffect)((()=>{o(e)}),[e]);const c=Object(s.useCallback)((e=>{const{value:t}=e.target;o(t),p||a(t)}),[p,a]);return Object(x.jsx)(r.EuiFlexGroup,{gutterSize:"s"},Object(x.jsx)(r.EuiFlexItem,null,Object(x.jsx)(r.EuiFieldText,{compressed:!0,id:l,value:i,onChange:c})),p&&Object(x.jsx)(r.EuiFlexItem,{grow:!1,className:"canvasSidebar__panel-noMinWidth"},Object(x.jsx)(r.EuiButton,{size:"s",onClick:()=>a(i)},p)))},{Textarea:pa}=f.b,ca=({argValue:e,typeInstance:t,onValueChange:a,renderError:l,argId:n})=>{var i;const o=null==t||null===(i=t.options)||void 0===i?void 0:i.confirm,[p,c]=Object(s.useState)(e),u=Object(s.useCallback)((e=>{const{value:t}=e.target;c(t),o||a(t)}),[o,a]);return Object(s.useEffect)((()=>{c(e)}),[e]),"string"!=typeof e?(l(),null):Object(x.jsx)("div",null,Object(x.jsx)(r.EuiFormRow,{display:"rowCompressed"},Object(x.jsx)(r.EuiTextArea,{className:"canvasTextArea__code",id:n,compressed:!0,rows:10,value:p,resize:"none",onChange:u})),Object(x.jsx)(r.EuiSpacer,{size:"s"}),Object(x.jsx)(r.EuiButton,{size:"s",onClick:()=>a(p)},o),Object(x.jsx)(r.EuiSpacer,{size:"xs"}))},{Toggle:ua}=f.b,ma=({onValueChange:e,argValue:t,argId:a,renderError:l,typeInstance:n})=>"boolean"!=typeof t?(l(),null):Object(x.jsx)("div",null,Object(x.jsx)(r.EuiFormRow,{display:"rowCompressed"},Object(x.jsx)(r.EuiSwitch,{compressed:!0,id:a,checked:t,onChange:()=>e(!t),className:"canvasArg__form","aria-label":n.displayName,resize:"none",label:n.options.labelValue,showLabel:!0}))),{VisDimension:ga}=f.b,da=({argValue:e,typeInstance:t,onValueChange:a,resolved:{columns:l}})=>{var n,i;const[o,p]=Object(s.useState)(e),c=null==t||null===(n=t.options)||void 0===n?void 0:n.confirm;Object(s.useEffect)((()=>{p(e)}),[e]);const u=Object(s.useCallback)((e=>{(c?p:a)({type:"expression",chain:[{type:"function",function:"visdimension",arguments:{_:[e.target.value]}}]})}),[c,a]),m=[{value:"",text:ga.getDefaultOptionName(),disabled:!0},...l.map((e=>({value:e.name,text:e.name})))],g=null===(i=o.chain[0].arguments._)||void 0===i?void 0:i[0],d=l.map((e=>e.name)).find((e=>e===g))||"";return Object(x.jsx)(r.EuiFlexGroup,{gutterSize:"s",direction:"column"},Object(x.jsx)(r.EuiFlexItem,null,Object(x.jsx)(r.EuiSelect,{compressed:!0,options:m,value:d,onChange:u})),c&&Object(x.jsx)(r.EuiFlexItem,{grow:!1},Object(x.jsx)(r.EuiButton,{size:"s",onClick:()=>a(o)},c)))},{Color:ba}=f.b,ha=({onValueChange:e,argValue:t})=>{const[a,l,n]=Object(r.useColorPickerState)(t);return Object(x.jsx)(r.EuiFlexGroup,{gutterSize:"s"},Object(x.jsx)(r.EuiFlexItem,{grow:!1},Object(x.jsx)(r.EuiColorPicker,{compressed:!0,onChange:(t,a)=>{l(t,a),e(t)},color:a,isInvalid:!!n})))},ya=[()=>({name:"axisConfig",displayName:Le.getDisplayName(),help:Le.getHelp(),simpleTemplate:Object(j.a)(Ae),template:Object(j.a)(extended_template_ExtendedTemplate)}),()=>({name:"datacolumn",displayName:Be.getDisplayName(),help:Be.getHelp(),default:'""',simpleTemplate:Object(j.a)($e)}),()=>({name:"filterGroup",displayName:Je.getDisplayName(),help:Je.getHelp(),simpleTemplate:Object(j.a)(Ze)}),()=>({name:"imageUpload",displayName:ot.getDisplayName(),help:ot.getHelp(),resolveArgValue:!0,template:Object(j.a)(image_upload_ImageUpload),resolve:async({args:e})=>{const{elasticOutline:t}=await Object(tt.getElasticOutline)();return{dataurl:Object(tt.resolveFromArgs)(e,t)}}}),()=>({name:"number",displayName:gt.getDisplayName(),help:gt.getHelp(),simpleTemplate:Object(j.a)(mt(dt)),default:"0"}),()=>({name:"palette",displayName:Mt.getDisplayName(),help:Mt.getHelp(),simpleTemplate:Object(j.a)(Ut),...qt}),()=>({name:"stops_palette",help:Rt.getHelp(),displayName:Rt.getDisplayName(),template:Object(j.a)(Gt),...qt}),()=>({name:"percentage",displayName:$t.getDisplayName(),help:$t.getHelp(),simpleTemplate:Object(j.a)(mt(Wt,50))}),()=>({name:"range",displayName:Yt.getDisplayName(),help:Yt.getHelp(),simpleTemplate:Object(j.a)(mt(Xt,50))}),()=>({name:"select",displayName:Qt.getDisplayName(),help:Qt.getHelp(),simpleTemplate:Object(j.a)(Jt)}),()=>({name:"shape",displayName:sa.getDisplayName(),help:sa.getHelp(),simpleTemplate:Object(j.a)(ia),default:'"square"'}),()=>({name:"string",displayName:oa.getDisplayName(),help:oa.getHelp(),simpleTemplate:Object(j.a)(mt(ra))}),()=>({name:"textarea",displayName:pa.getDisplayName(),help:pa.getHelp(),template:Object(j.a)(mt(ca))}),()=>({name:"toggle",displayName:ua.getDisplayName(),help:ua.getHelp(),template:Object(j.a)(ma),default:"false"}),()=>({name:"vis_dimension",displayName:ga.getDisplayName(),help:ga.getHelp(),simpleTemplate:Object(j.a)(da)}),()=>({name:"color_picker",displayName:ba.getDisplayName(),help:ba.getHelp(),simpleTemplate:Object(j.a)(mt(ha)),default:'"#000"'})],ja=[(e,t)=>{const a={DEFAULT:e.uiSettings.get("dateFormat"),NANOS:e.uiSettings.get("dateNanosFormat"),ISO8601:"",LOCAL_LONG:"LLLL",LOCAL_SHORT:"LLL",LOCAL_DATE:"l",LOCAL_TIME_WITH_SECONDS:"LTS"},l=Object.values(a).map((e=>({value:e,text:Ye.a.utc(Ye()()).format(e)})));return()=>{return{name:"dateFormat",displayName:Qe.getDisplayName(),help:Qe.getHelp(),simpleTemplate:Object(j.a)((e=l,t=>Object(x.jsx)(Xe,N()({dateFormats:e},t))))};var e}},(e,t)=>{const a={NUMBER:e.uiSettings.get($.FORMATS_UI_SETTINGS.FORMAT_NUMBER_DEFAULT_PATTERN),PERCENT:e.uiSettings.get($.FORMATS_UI_SETTINGS.FORMAT_PERCENT_DEFAULT_PATTERN),CURRENCY:e.uiSettings.get($.FORMATS_UI_SETTINGS.FORMAT_CURRENCY_DEFAULT_PATTERN),DURATION:"00:00:00",BYTES:e.uiSettings.get($.FORMATS_UI_SETTINGS.FORMAT_BYTES_DEFAULT_PATTERN)},l=[{value:a.NUMBER,text:ht.getFormatNumber()},{value:a.PERCENT,text:ht.getFormatPercent()},{value:a.CURRENCY,text:ht.getFormatCurrency()},{value:a.DURATION,text:ht.getFormatDuration()},{value:a.BYTES,text:ht.getFormatBytes()}];return()=>{return{name:"numberFormat",displayName:ht.getDisplayName(),help:ht.getHelp(),simpleTemplate:Object(j.a)((e=l,t=>Object(x.jsx)(bt,N()({numberFormats:e},t))))};var e}}],fa=(e,t)=>[...ya,...ja.map((a=>a(e,t)))],xa=Object(r.euiPaletteColorBlind)(),va=[()=>({name:f.n.presentation(),color:"#017D73"}),()=>({name:f.n.report(),color:xa[2]})],{FormatDate:Oa}=f.o,{FormatNumber:Na}=f.o,{RoundDate:Ca}=f.o,{Sort:Ta}=f.o,Sa=[()=>({name:"formatdate",displayName:Oa.getDisplayName(),args:[{name:"format",displayName:Oa.getFormatDisplayName(),argType:"dateformat"}]}),()=>({name:"formatnumber",displayName:Na.getDisplayName(),args:[{name:"format",displayName:Na.getFormatDisplayName(),argType:"numberformat"}]}),()=>({name:"rounddate",displayName:Ca.getDisplayName(),args:[{name:"format",displayName:Ca.getFormatDisplayName(),argType:"dateformat",help:Ca.getFormatHelp()}]}),()=>({name:"sort",displayName:Ta.getDisplayName(),args:[{name:"_",displayName:Ta.getSortFieldDisplayName(),argType:"datacolumn"},{name:"reverse",displayName:Ta.getReverseDisplayName(),argType:"toggle"}],resolve:({context:e})=>"ready"===Object(Z.b)(e)?{columns:Object(c.get)(Object(Z.c)(e),"columns",[])}:{columns:[]}})]},58:function(e,t,a){e.exports=a(13)(3)},61:function(e,t,a){"use strict";a.d(t,"a",(function(){return m}));var l=a(58),n=a.n(l),s=a(17),i=a(22),o=a(67),r=a.n(o),p=a(27),c=a(115),u=a(18);const m=e=>{const t=(t,a)=>{const[l,n]=Object(s.useState)(t);return Object(s.useImperativeHandle)(a,(()=>({updateProps:e=>{n(e)}}))),Object(u.jsx)(c.a,null,(({error:a})=>a?(t.renderError(),null):Object(u.jsx)(p.I18nProvider,null,Object(u.jsx)(e,l))))},a=Object(s.forwardRef)(t);return a.propTypes={renderError:r.a.func},(e,t,l,s)=>{try{const o=Object(u.jsx)(a,n()({},t,{ref:e=>{l.done(),null==s||s(e)}}));return l.onDestroy((()=>{Object(i.unmountComponentAtNode)(e)})),Object(i.createPortal)(o,e)}catch(e){l.done(),t.renderError()}}}},67:function(e,t,a){e.exports=a(13)(7)},72:function(e,t,a){"use strict";a.d(t,"b",(function(){return n})),a.d(t,"c",(function(){return s})),a.d(t,"a",(function(){return i}));var l=a(20);function n(e){return Object(l.get)(e,"state",null)}function s(e){return Object(l.get)(e,"value",null)}function i(e){return"error"!==n(e)?null:Object(l.get)(e,"error",null)}},77:function(e,t,a){"use strict";var l=Array.isArray,n=Object.keys,s=Object.prototype.hasOwnProperty,i="undefined"!=typeof Element;function o(e,t){if(e===t)return!0;if(e&&t&&"object"==typeof e&&"object"==typeof t){var a,r,p,c=l(e),u=l(t);if(c&&u){if((r=e.length)!=t.length)return!1;for(a=r;0!=a--;)if(!o(e[a],t[a]))return!1;return!0}if(c!=u)return!1;var m=e instanceof Date,g=t instanceof Date;if(m!=g)return!1;if(m&&g)return e.getTime()==t.getTime();var d=e instanceof RegExp,b=t instanceof RegExp;if(d!=b)return!1;if(d&&b)return e.toString()==t.toString();var h=n(e);if((r=h.length)!==n(t).length)return!1;for(a=r;0!=a--;)if(!s.call(t,h[a]))return!1;if(i&&e instanceof Element&&t instanceof Element)return e===t;for(a=r;0!=a--;)if(!("_owner"===(p=h[a])&&e.$$typeof||o(e[p],t[p])))return!1;return!0}return e!=e&&t!=t}e.exports=function(e,t){try{return o(e,t)}catch(e){if(e.message&&e.message.match(/stack|recursion/i)||-2146828260===e.number)return console.warn("Warning: react-fast-compare does not handle circular references.",e.name,e.message),!1;throw e}}},84:function(e,t,a){"use strict";a.d(t,"a",(function(){return popover_Popover}));var l=a(58),n=a.n(l),s=a(1),i=a.n(s),o=a(17),r=a(19),p=a(18);class popover_Popover extends o.Component{constructor(...e){super(...e),i()(this,"state",{isPopoverOpen:!!this.props.isOpen}),i()(this,"handleClick",(()=>{this.setState((e=>({isPopoverOpen:!e.isPopoverOpen})))})),i()(this,"closePopover",(()=>{this.setState({isPopoverOpen:!1})}))}componentDidMount(){this.props.isOpen&&this.setState({isPopoverOpen:!0})}render(){const{button:e,children:t,tooltip:a,tooltipPosition:l,...s}=this.props,i=document.querySelector(".kbnAppWrapper"),o=r.EuiPopover;return Object(p.jsx)(o,n()({},s,{button:(t=>!this.state.isPopoverOpen&&a&&a.length?Object(p.jsx)(r.EuiToolTip,{position:l,content:a},e(t)):e(t))(this.handleClick),isOpen:this.state.isPopoverOpen,closePopover:this.closePopover,container:i}),t({closePopover:this.closePopover}))}}i()(popover_Popover,"defaultProps",{isOpen:!1,ownFocus:!0,tooltip:"",tooltipPosition:"top"})},90:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=a(17);t.default=function(e){l.useEffect(e,[])}}}]);